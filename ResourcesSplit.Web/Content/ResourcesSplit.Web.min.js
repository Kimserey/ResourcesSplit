try{Object.defineProperty(Error.prototype,"message",{enumerable:!0})}catch(e){}var IntelliFactory={Runtime:{Class:function(n,t){function i(){}i.prototype=n;for(var r in t)i[r]=t[r];return i},Define:function(n,t){function i(n,t){var u,f,e;for(u in t)if(f=typeof n[u],e=typeof t[u],f=="object"&&e=="object")i(n[u],t[u]);else if(f=="undefined"||r)n[u]=t[u];else throw new Error("Name conflict: "+u);}var r=!!this.overwrite;i(n,t)},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===undefined&&delete n[r];return n},Field:function(n){var t,i=!1;return function(){return i||(i=!0,t=n()),t}},GetOptional:function(n){return n===undefined?{$:0}:{$:1,$0:n}},New:function(n,t){var i=new n;for(var r in t)r in i||(i[r]=t[r]);return i},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},OnInit:function(n){"init"in this||(this.init=[]);this.init.push(n)},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Inherit:function(n,t){var i,r;if(typeof t=="function"){i=n.prototype;n.prototype=new t;for(r in i)n.prototype[r]=i[r]}},Safe:function(n){return n===undefined?{}:n},SetOptional:function(n,t,i){i.$==0?delete n[t]:n[t]=i.$0},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");}}};Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1;$.Define($$,{Arrays:{contains:function(_2,_3){var _4,_5,_6;_4=true;_5=0;_6=_3.length;while(_4?_5<_6:false){a.Equals(_3[_5],_2)?_4=false:_5=_5+1;}return!_4;},mapFold:function(_7,_8,_9){var _,ba,bb,bc,bd,be;_=b(_9.length);ba=_8;for(bb=0;bb<=_9.length-1;bb++){bc=(_7(ba))(c.get(_9,bb));bd=bc[1];be=bc[0];c.set(_,bb,be);ba=bd;}return[_,ba];},mapFoldBack:function(be,bf,bg){var bh,bi,bj,bk,bl,bm,bn,bo;bh=b(bf.length);bi=bg;bj=bf.length;for(bk=1;bk<=bj;bk++){bl=bj-bk;bm=(be(c.get(bf,bl)))(bi);bn=bm[1];bo=bm[0];c.set(bh,bl,bo);bi=bn;}return[bh,bi];},sortInPlaceByDescending:function(bp,bq){return bq.sort(function(br,bs){return-d.Compare(bp(br),bp(bs));});},splitInto:function(bt,bu){var bv,bw,bx,by,bz,bA,bB,bC;bt<=0?d.FailWith("Count must be positive"):null;bv=c.length(bu);if(bv===0){bw=[];}else{bx=d.Min(bt,bv);by=b(bx);bz=bv/bx>>0;bA=0;for(bB=0;bB<=bv%bx-1;bB++){c.set(by,bB,c.sub(bu,bA,bz+1));bA=bA+bz+1;}for(bC=bv%bx;bC<=bx-1;bC++){c.set(by,bC,c.sub(bu,bA,bz));bA=bA+bz;}bw=by;}return bw;},tryFindBack:function(bD,bE){var bF,bG;bF={$:0};bG=bE.length-1;while(bG>0?bF.$==0:false){bD(c.get(bE,bG))?bF={$:1,$0:c.get(bE,bG)}:null;bG=bG-1;}return bF;},tryFindIndexBack:function(bH,bI){var bJ,bK;bJ={$:0};bK=bI.length-1;while(bK>0?bJ.$==0:false){bH(c.get(bI,bK))?bJ={$:1,$0:bK}:null;bK=bK-1;}return bJ;}},List:{map3:function(bL,bM,bN,bO){var bP;bP=c.map2(function(bQ){return function(bR){return bQ(bR);};},c.map2(bL,c.ofSeq(bM),c.ofSeq(bN)),c.ofSeq(bO));return e.ofArray(bP);},skip:function(bS,bT){var bU,bV,bW,bX;bU=bT;for(bV=1;bV<=bS;bV++){if(bU.$==0){bW=d.FailWith("Input list too short.");}else{bX=bU.$1;bW=bU=bX;}}return bU;},skipWhile:function(bY,bZ){var b0;b0=bZ;while(!(b0.$==0)?bY(e.head(b0)):false){b0=e.tail(b0);}return b0;}},Seq:{chunkBySize:function(b1,b2){var b3;b1<=0?d.FailWith("Chunk size must be positive"):null;b3=function(){var b5,b6,b8;b5=f.Get(b2);b6=function(){return b5.Dispose();};b8=function(b9){var b_,b$,ca;if(b5.MoveNext()){b$=[b5.get_Current()];while(c.length(b$)<b1?b5.MoveNext():false){ca=b$.push(b5.get_Current());}b9.c=b$;b_=true;}else{b_=false;}return b_;};return g.New(null,null,b8,b6);};return h.Of(b3);},compareWith:function(cb,cc,cd){var ce,cf,cg,ch,ci,cj,ck;ce=f.Get(cc);try{cg=f.Get(cd);try{ci=0;cj=true;while(cj?ci===0:false){ck=[ce.MoveNext(),cg.MoveNext()];ck[0]?ck[1]?ci=(cb(ce.get_Current()))(cg.get_Current()):ci=1:ck[1]?ci=-1:cj=false;}ch=ci;}finally{cg.Dispose!=undefined?cg.Dispose():null;}cf=ch;}finally{ce.Dispose!=undefined?ce.Dispose():null;}return cf;},contains:function(cl,cm){var cn,co,cp;cn=f.Get(cm);try{cp=false;while(!cp?cn.MoveNext():false){cp=a.Equals(cn.get_Current(),cl);}co=cp;}finally{cn.Dispose!=undefined?cn.Dispose():null;}return co;},countBy:function(cq,cr){var cs;cs=function(){var cu,cv,cw,cx,cy,cz,cA,cB,cD,cE;cu={};cv=f.Get(cr);try{cx=[];while(cv.MoveNext()){cy=cq(cv.get_Current());cz=a.Hash(cy);if(cu.hasOwnProperty(cz)){cA=void(cu[cz]=cu[cz]+1);}else{cx.push(cy);cA=void(cu[cz]=1);}}cB=function(cC){return[cC,cu[a.Hash(cC)]];};cD=cx.slice(0);cE=c.map(cB,cD);cw=cE;}finally{cv.Dispose!=undefined?cv.Dispose():null;}return cw;};return i.delay(cs);},distinct:function(cF){return j.distinctBy(function(cG){return cG;},cF);},distinctBy:function(cH,cI){var cJ;cJ=function(){var cL,cM,cN,cV,cX;cL=f.Get(cI);cM=b.prototype.constructor.apply(b,[]);cN=function(cO){var cP,cQ,cR,cS,cT,cU;cP=cH(cO);cQ=a.Hash(cP);cR=cM[cQ];if(a.Equals(cR,undefined)){cM[cQ]=[cP];cS=true;}else{if(k.contains(cP,cR)){cT=false;}else{cU=cR.push(cP);cT=true;}cS=cT;}return cS;};cV=function(){return cL.Dispose();};cX=function(cY){var cZ,c0,c1,c2;if(cL.MoveNext()){c0=cL.get_Current();c1=cN(c0);while(!c1?cL.MoveNext():false){c0=cL.get_Current();c1=cN(c0);}if(c1){cY.c=c0;c2=true;}else{c2=false;}cZ=c2;}else{cZ=false;}return cZ;};return g.New(null,null,cX,cV);};return h.Of(cJ);},except:function(c3,c4){var c5;c5=function(){var c7,c8,c9,de,df,dg,dh,di,dk;c7=f.Get(c4);c8=b.prototype.constructor.apply(b,[]);c9=function(c_){var c$,da,db,dc,dd;c$=a.Hash(c_);da=c8[c$];if(a.Equals(da,undefined)){c8[c$]=[c_];db=true;}else{if(k.contains(c_,da)){dc=false;}else{dd=da.push(c_);dc=true;}db=dc;}return db;};de=f.Get(c3);try{while(de.MoveNext()){dg=de.get_Current();dh=c9(dg);}}finally{de.Dispose!=undefined?de.Dispose():null;}di=function(){return c7.Dispose();};dk=function(dl){var dm,dn,_do,dp;if(c7.MoveNext()){dn=c7.get_Current();_do=c9(dn);while(!_do?c7.MoveNext():false){dn=c7.get_Current();_do=c9(dn);}if(_do){dl.c=dn;dp=true;}else{dp=false;}dm=dp;}else{dm=false;}return dm;};return g.New(null,null,dk,di);};return h.Of(c5);},groupBy:function(dq,dr){return i.delay(function(){var dt,du,dv,dw,dx,dy,dz,dA;dt={};du={};dv=[];dw=f.Get(dr);try{while(dw.MoveNext()){dy=dw.get_Current();dz=dq(dy);dA=a.Hash(dz);!dt.hasOwnProperty(dA)?dv.push(dz):null;du[dA]=dz;dt.hasOwnProperty(dA)?dt[dA].push(dy):void(dt[dA]=[dy]);}dx=c.map(function(dB){return[dB,dt[a.Hash(dB)]];},dv);}finally{dw.Dispose!=undefined?dw.Dispose():null;}return dx;});},insufficient:function(){return d.FailWith("The input sequence has an insufficient number of elements.");},last:function(dC){var dD,dE,dF,dG;dD=f.Get(dC);try{dF=dD.MoveNext();if(!dF){dG=j.insufficient();}else{while(dD.MoveNext()){}dG=dD.get_Current();}dE=dG;}finally{dD.Dispose!=undefined?dD.Dispose():null;}return dE;},nonNegative:function(){return d.FailWith("The input must be non-negative.");},pairwise:function(dH){var dI,dK;dI=function(dJ){return[c.get(dJ,0),c.get(dJ,1)];};dK=j.windowed(2,dH);return i.map(dI,dK);},truncate:function(dL,dM){return i.delay(function(){return i.enumUsing(f.Get(dM),function(dO){var dP;dP=[0];return i.enumWhile(function(){return dO.MoveNext()?dP[0]<dL:false;},i.delay(function(){l.incr(dP);return[dO.get_Current()];}));});});},tryHead:function(dS){var dT,dU;dT=f.Get(dS);try{dU=dT.MoveNext()?{$:1,$0:dT.get_Current()}:{$:0};}finally{dT.Dispose!=undefined?dT.Dispose():null;}return dU;},tryItem:function(dV,dW){var dX,dY,dZ,d0,d1;if(dV<0){dX={$:0};}else{dY=0;dZ=f.Get(dW);try{d1=true;while(d1?dY<=dV:false){dZ.MoveNext()?dY=dY+1:d1=false;}d0=d1?{$:1,$0:dZ.get_Current()}:{$:0};}finally{dZ.Dispose!=undefined?dZ.Dispose():null;}dX=d0;}return dX;},tryLast:function(d2){var d3,d4,d5;d3=f.Get(d2);try{if(d3.MoveNext()){while(d3.MoveNext()){}d5={$:1,$0:d3.get_Current()};}else{d5={$:0};}d4=d5;}finally{d3.Dispose!=undefined?d3.Dispose():null;}return d4;},unfold:function(d6,d7){var d8;d8=function(){var d_;d_=function(d$){var ea,eb,ec,ed;ea=d6(d$.s);if(ea.$==0){eb=false;}else{ec=ea.$0[0];ed=ea.$0[1];d$.c=ec;d$.s=ed;eb=true;}return eb;};return g.New(d7,null,d_,function(){});};return h.Of(d8);},windowed:function(ef,eg){ef<=0?d.FailWith("The input must be positive."):null;return i.delay(function(){return i.enumUsing(f.Get(eg),function(ei){var ej;ej=[];return i.append(i.enumWhile(function(){return ej.length<ef?ei.MoveNext():false;},i.delay(function(){ej.push(ei.get_Current());return i.empty();})),i.delay(function(){return ej.length===ef?i.append([ej.slice(0)],i.delay(function(){return i.enumWhile(function(){return ei.MoveNext();},i.delay(function(){ej.shift();ej.push(ei.get_Current());return[ej.slice(0)];}));})):i.empty();}));});});}},WebSharper:{Activator:{Activate:$.Field(function(){var eq,er;if(m.hasDocument()){er=n.getElementById("websharper-data");eq=er?o(n).ready(function(){var et,eu,ev,eB;et=er.getAttribute("content");eu=p.Activate(q.parse(et));ev=function(ew){var ex,ey,ez,eA;ex=ew[0];ey=ew[1];ez=ey.get_Body();eA=n.getElementById(ex);return ez.ReplaceInDom(eA);};eB=s.GetFields(eu);return c.iter(ev,eB);}):null;}else{eq=null;}return eq;}),hasDocument:function(){var $0=this,$this=this;return typeof $$.document!=="undefined";}},AggregateException:$.Class({},{New:function(eC){return $.New(this,t.New1("One or more errors occurred.",eC));},New1:function(eD){return $.New(this,u.New1(eD));}}),ArgumentException:$.Class({},{New:function(){return $.New(this,v.New1("Value does not fall within the expected range."));},New1:function(eF){return $.New(this,u.New1(eF));}}),Arrays:{average:function(eG){return w(c.sum(eG))/w(eG.length);},averageBy:function(eH,eI){return w(c.sumBy(eH,eI))/w(eI.length);},blit:function(eJ,eK,eL,eM,eN){var eO;c.checkRange(eJ,eK,eN);c.checkRange(eL,eM,eN);for(eO=0;eO<=eN-1;eO++){c.set(eL,eM+eO,c.get(eJ,eK+eO));}return;},checkBounds:function(eP,eQ){return(eQ<0?true:eQ>=eP.length)?d.FailWith("Index was outside the bounds of the array."):null;},checkBounds2D:function(eR,eS,eT){return(((eS<0?true:eT<0)?true:eS>=eR.length)?true:eT>=(eR.length?eR[0].length:0))?d.Raise(x.New()):null;},checkLength:function(eU,eV){return eU.length!==eV.length?d.FailWith("Arrays differ in length."):null;},checkRange:function(eW,eX,eY){return((eY<0?true:eX<0)?true:eW.length<eX+eY)?d.FailWith("Index was outside the bounds of the array."):null;},choose:function(eZ,e0){var e1,e2,e3,e4,e5;e1=[];for(e2=0;e2<=e0.length-1;e2++){e3=eZ(c.get(e0,e2));if(e3.$==0){e4=null;}else{e5=e3.$0;e4=e1.push(e5);}}return e1;},chunkBySize:function(e6,e7){var e8;e8=j.chunkBySize(e6,e7);return i.toArray(e8);},collect:function(e9,e_){return b.prototype.concat.apply([],c.map(e9,e_));},compareWith:function(e$,fa,fb){return j.compareWith(e$,fa,fb);},concat:function(fc){return b.prototype.concat.apply([],c.ofSeq(fc));},contains:function(fd,fe){return j.contains(fd,fe);},countBy:function(ff,fg){var fh;fh=j.countBy(ff,fg);return i.toArray(fh);},create:function(fi,fj){var fk,fl;fk=b(fi);for(fl=0;fl<=fi-1;fl++){c.set(fk,fl,fj);}return fk;},create2D:function(fm){var fn,fp,fq;fn=function(fo){return c.ofSeq(fo);};fp=i.map(fn,fm);fq=c.ofSeq(fp);fq.dims=2;return fq;},distinct:function(fr){var fs;fs=j.distinct(fr);return i.toArray(fs);},distinctBy:function(ft,fu){var fv;fv=j.distinctBy(ft,fu);return i.toArray(fv);},exactlyOne:function(fw){return c.length(fw)===1?c.get(fw,0):d.FailWith("The input does not have precisely one element.");},except:function(fx,fy){var fz;fz=j.except(fx,fy);return i.toArray(fz);},exists2:function(fA,fB,fC){c.checkLength(fB,fC);return i.exists2(fA,fB,fC);},fill:function(fD,fE,fF,fG){var fH;c.checkRange(fD,fE,fF);for(fH=fE;fH<=fE+fF-1;fH++){c.set(fD,fH,fG);}return;},filter:function(fI,fJ){var fK,fL;fK=[];for(fL=0;fL<=fJ.length-1;fL++){fI(c.get(fJ,fL))?fK.push(c.get(fJ,fL)):null;}return fK;},find:function(fM,fN){var fO,fP,fQ;fO=c.tryFind(fM,fN);if(fO.$==0){fP=d.FailWith("KeyNotFoundException");}else{fQ=fO.$0;fP=fQ;}return fP;},findBack:function(fR,fS){var fT,fU,fV;fT=k.tryFindBack(fR,fS);if(fT.$==0){fU=d.FailWith("KeyNotFoundException");}else{fV=fT.$0;fU=fV;}return fU;},findINdex:function(fW,fX){var fY,fZ,f0;fY=c.tryFindIndex(fW,fX);if(fY.$==0){fZ=d.FailWith("KeyNotFoundException");}else{f0=fY.$0;fZ=f0;}return fZ;},findIndexBack:function(f1,f2){var f3,f4,f5;f3=k.tryFindIndexBack(f1,f2);if(f3.$==0){f4=d.FailWith("KeyNotFoundException");}else{f5=f3.$0;f4=f5;}return f4;},fold:function(f6,f7,f8){var f9,f_;f9=f7;for(f_=0;f_<=f8.length-1;f_++){f9=(f6(f9))(c.get(f8,f_));}return f9;},fold2:function(f$,ga,gb,gc){var gd,ge;c.checkLength(gb,gc);gd=ga;for(ge=0;ge<=gb.length-1;ge++){gd=((f$(gd))(c.get(gb,ge)))(c.get(gc,ge));}return gd;},foldBack:function(gf,gg,gh){var gi,gj,gk;gi=gh;gj=gg.length;for(gk=1;gk<=gj;gk++){gi=(gf(c.get(gg,gj-gk)))(gi);}return gi;},foldBack2:function(gl,gm,gn,go){var gp,gq,gr;c.checkLength(gm,gn);gp=gm.length;gq=go;for(gr=1;gr<=gp;gr++){gq=((gl(c.get(gm,gp-gr)))(c.get(gn,gp-gr)))(gq);}return gq;},forall2:function(gs,gt,gu){c.checkLength(gt,gu);return i.forall2(gs,gt,gu);},get:function(gv,gw){c.checkBounds(gv,gw);return gv[gw];},get2D:function(gx,gy,gz){c.checkBounds2D(gx,gy,gz);return gx[gy][gz];},groupBy:function(gA,gB){var gC,gG,gH;gC=function(gD){var gE,gF;gE=gD[0];gF=gD[1];return[gE,i.toArray(gF)];};gG=j.groupBy(gA,gB);gH=i.toArray(gG);return c.map(gC,gH);},head:function(gI){return e.head(e.ofArray(gI));},indexed:function(gJ){return c.mapi(function(gK){return function(gL){return[gK,gL];};},gJ);},init:function(gM,gN){var gO,gP;gM<0?d.FailWith("Negative size given."):null;gO=b(gM);for(gP=0;gP<=gM-1;gP++){c.set(gO,gP,gN(gP));}return gO;},iter:function(gQ,gR){var gS;for(gS=0;gS<=gR.length-1;gS++){gQ(c.get(gR,gS));}return;},iter2:function(gT,gU,gV){var gW;c.checkLength(gU,gV);for(gW=0;gW<=gU.length-1;gW++){(gT(c.get(gU,gW)))(c.get(gV,gW));}return;},iteri:function(gX,gY){var gZ;for(gZ=0;gZ<=gY.length-1;gZ++){(gX(gZ))(c.get(gY,gZ));}return;},iteri2:function(g0,g1,g2){var g3;c.checkLength(g1,g2);for(g3=0;g3<=g1.length-1;g3++){((g0(g3))(c.get(g1,g3)))(c.get(g2,g3));}return;},last:function(g4){return j.last(g4);},length:function(g5){var g6;g6=g5.dims;return g6===2?g5.length*g5.length:g5.length;},map:function(g7,g8){var g9,g_;g9=b(g8.length);for(g_=0;g_<=g8.length-1;g_++){c.set(g9,g_,g7(c.get(g8,g_)));}return g9;},map2:function(g$,ha,hb){var hc,hd;c.checkLength(ha,hb);hc=b(hb.length);for(hd=0;hd<=hb.length-1;hd++){c.set(hc,hd,(g$(c.get(ha,hd)))(c.get(hb,hd)));}return hc;},map3:function(he,hf,hg,hh){var hi;hi=y.map3(he,e.ofArray(hf),e.ofArray(hg),e.ofArray(hh));return c.ofSeq(hi);},mapi:function(hj,hk){var hl,hm;hl=b(hk.length);for(hm=0;hm<=hk.length-1;hm++){c.set(hl,hm,(hj(hm))(c.get(hk,hm)));}return hl;},mapi2:function(hn,ho,hp){var hq,hr;c.checkLength(ho,hp);hq=b(ho.length);for(hr=0;hr<=ho.length-1;hr++){c.set(hq,hr,((hn(hr))(c.get(ho,hr)))(c.get(hp,hr)));}return hq;},max:function(hs){return c.reduce(function(ht){return function(hu){return d.Max(ht,hu);};},hs);},maxBy:function(hv,hw){return c.reduce(function(hx){return function(hy){return a.Compare(hv(hx),hv(hy))===1?hx:hy;};},hw);},min:function(hz){return c.reduce(function(hA){return function(hB){return d.Min(hA,hB);};},hz);},minBy:function(hC,hD){return c.reduce(function(hE){return function(hF){return a.Compare(hC(hE),hC(hF))===-1?hE:hF;};},hD);},nonEmpty:function(hG){return hG.length===0?d.FailWith("The input array was empty."):null;},ofSeq:function(hH){var hI,hJ,hK;hI=[];hJ=f.Get(hH);try{while(hJ.MoveNext()){hI.push(hJ.get_Current());}hK=hI;}finally{hJ.Dispose!=undefined?hJ.Dispose():null;}return hK;},pairwise:function(hL){var hM;hM=j.pairwise(hL);return i.toArray(hM);},partition:function(hN,hO){var hP,hQ,hR;hP=[];hQ=[];for(hR=0;hR<=hO.length-1;hR++){hN(c.get(hO,hR))?hP.push(c.get(hO,hR)):hQ.push(c.get(hO,hR));}return[hP,hQ];},permute:function(hS,hT){var hU,hV;hU=b(hT.length);for(hV=0;hV<=hT.length-1;hV++){c.set(hU,hS(hV),c.get(hT,hV));}return hU;},pick:function(hW,hX){var hY,hZ,h0;hY=c.tryPick(hW,hX);if(hY.$==0){hZ=d.FailWith("KeyNotFoundException");}else{h0=hY.$0;hZ=h0;}return hZ;},reduce:function(h1,h2){var h3,h4;c.nonEmpty(h2);h3=c.get(h2,0);for(h4=1;h4<=h2.length-1;h4++){h3=(h1(h3))(c.get(h2,h4));}return h3;},reduceBack:function(h5,h6){var h7,h8,h9;c.nonEmpty(h6);h7=h6.length;h8=c.get(h6,h7-1);for(h9=2;h9<=h7;h9++){h8=(h5(c.get(h6,h7-h9)))(h8);}return h8;},replicate:function(h_,h$){return c.create(h_,h$);},reverse:function(ia,ib,ic){var id;id=c.sub(ia,ib,ic).slice().reverse();return c.blit(id,0,ia,ib,c.length(id));},scan:function(ie,_if,ig){var ih,ii;ih=b(1+ig.length);c.set(ih,0,_if);for(ii=0;ii<=ig.length-1;ii++){c.set(ih,ii+1,(ie(c.get(ih,ii)))(c.get(ig,ii)));}return ih;},scanBack:function(ij,ik,il){var im,_in,io;im=ik.length;_in=b(1+im);c.set(_in,im,il);for(io=0;io<=im-1;io++){c.set(_in,im-io-1,(ij(c.get(ik,im-io-1)))(c.get(_in,im-io)));}return _in;},set:function(ip,iq,ir){c.checkBounds(ip,iq);ip[iq]=ir;return;},set2D:function(is,it,iu,iv){c.checkBounds2D(is,it,iu);is[it][iu]=iv;return;},setSub:function(iw,ix,iy,iz){var iA;for(iA=0;iA<=iy-1;iA++){c.set(iw,ix+iA,c.get(iz,iA));}return;},setSub2D:function(iB,iC,iD,iE,iF,iG){var iH,iI;for(iH=0;iH<=iE-1;iH++){for(iI=0;iI<=iF-1;iI++){c.set2D(iB,iC+iH,iD+iI,c.get2D(iG,iH,iI));}}return;},skip:function(iJ,iK){return iJ<0?j.nonNegative():iJ>c.length(iK)?j.insufficient():iK.slice(iJ);},skipWhile:function(iL,iM){var iN,iO;iN=c.length(iM);iO=0;while(iO<iN?iL(c.get(iM,iO)):false){iO=iO+1;}return iM.slice(iO);},sort:function(iP){return c.sortBy(function(iQ){return iQ;},iP);},sortBy:function(iR,iS){return iS.slice().sort(function(iT,iU){return d.Compare(iR(iT),iR(iU));});},sortByDescending:function(iV,iW){return iW.slice().sort(function(iX,iY){return-d.Compare(iV(iX),iV(iY));});},sortDescending:function(iZ){return c.sortByDescending(function(i0){return i0;},iZ);},sortInPlace:function(i1){return c.sortInPlaceBy(function(i2){return i2;},i1);},sortInPlaceBy:function(i3,i4){return i4.sort(function(i5,i6){return d.Compare(i3(i5),i3(i6));});},sortInPlaceWith:function(i7,i8){return i8.sort(function(i9,i_){return(i7(i9))(i_);});},sortWith:function(i$,ja){return ja.slice().sort(function(jb,jc){return(i$(jb))(jc);});},splitAt:function(jd,je){return[c.take(jd,je),c.skip(jd,je)];},sub:function(jf,jg,jh){c.checkRange(jf,jg,jh);return jf.slice(jg,jg+jh);},sub2D:function(ji,jj,jk,jl,jm){var jn,jo,jp,jq,jr;jn=jl<0?0:jl;jo=jm<0?0:jm;jp=c.zeroCreate2D(jn,jo);for(jq=0;jq<=jn-1;jq++){for(jr=0;jr<=jo-1;jr++){c.set2D(jp,jq,jr,c.get2D(ji,jj+jq,jk+jr));}}return jp;},sum:function($arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$arr[i];return sum;},sumBy:function($f,$arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$f($arr[i]);return sum;},tail:function(js){return c.skip(1,js);},take:function(jt,ju){return jt<0?j.nonNegative():jt>c.length(ju)?j.insufficient():ju.slice(0,jt);},takeWhile:function(jv,jw){var jx,jy;jx=c.length(jw);jy=0;while(jy<jx?jv(c.get(jw,jy)):false){jy=jy+1;}return jw.slice(0,jy);},truncate:function(jz,jA){return jA.slice(jz);},tryFind:function(jB,jC){var jD,jE;jD={$:0};jE=0;while(jE<jC.length?jD.$==0:false){jB(c.get(jC,jE))?jD={$:1,$0:c.get(jC,jE)}:null;jE=jE+1;}return jD;},tryFindIndex:function(jF,jG){var jH,jI;jH={$:0};jI=0;while(jI<jG.length?jH.$==0:false){jF(c.get(jG,jI))?jH={$:1,$0:jI}:null;jI=jI+1;}return jH;},tryHead:function(jJ){return c.length(jJ)===0?{$:0}:{$:1,$0:jJ[0]};},tryItem:function(jK,jL){return(c.length(jL)<=jK?true:jK<0)?{$:0}:{$:1,$0:jL[jK]};},tryLast:function(jM){var jN;jN=c.length(jM);return jN===0?{$:0}:{$:1,$0:jM[jN-1]};},tryPick:function(jO,jP){var jQ,jR,jS;jQ={$:0};jR=0;while(jR<jP.length?jQ.$==0:false){jS=jO(c.get(jP,jR));jS.$==1?jQ=jS:null;jR=jR+1;}return jQ;},unfold:function(jT,jU){var jV;jV=j.unfold(jT,jU);return i.toArray(jV);},unzip:function(jW){var jX,jY,jZ,j0,j1,j2;jX=[];jY=[];for(jZ=0;jZ<=jW.length-1;jZ++){j0=c.get(jW,jZ);j1=j0[1];j2=j0[0];jX.push(j2);jY.push(j1);}return[jX,jY];},unzip3:function(j3){var j4,j5,j6,j7,j8,j9,j_,j$;j4=[];j5=[];j6=[];for(j7=0;j7<=j3.length-1;j7++){j8=c.get(j3,j7);j9=j8[2];j_=j8[1];j$=j8[0];j4.push(j$);j5.push(j_);j6.push(j9);}return[j4,j5,j6];},windowed:function(ka,kb){var kc;kc=j.windowed(ka,kb);return i.toArray(kc);},zeroCreate2D:function(kd,ke){var kf;kf=c.init(kd,function(){return b(ke);});kf.dims=2;return kf;},zip:function(kh,ki){var kj,kk;c.checkLength(kh,ki);kj=b(kh.length);for(kk=0;kk<=kh.length-1;kk++){c.set(kj,kk,[c.get(kh,kk),c.get(ki,kk)]);}return kj;},zip3:function(kl,km,kn){var ko,kp;c.checkLength(kl,km);c.checkLength(km,kn);ko=b(kl.length);for(kp=0;kp<=kl.length-1;kp++){c.set(ko,kp,[c.get(kl,kp),c.get(km,kp),c.get(kn,kp)]);}return ko;}},Arrays2D:{copy:function(kq){return z.init(kq.length,kq.length?kq[0].length:0,function(kr){return function(ks){return c.get2D(kq,kr,ks);};});},init:function(kt,ku,kv){var kw,kx,ky;kw=c.zeroCreate2D(kt,ku);for(kx=0;kx<=kt-1;kx++){for(ky=0;ky<=ku-1;ky++){c.set2D(kw,kx,ky,(kv(kx))(ky));}}return kw;},iter:function(kz,kA){var kB,kC,kD,kE;kB=kA.length;kC=kA.length?kA[0].length:0;for(kD=0;kD<=kB-1;kD++){for(kE=0;kE<=kC-1;kE++){kz(c.get2D(kA,kD,kE));}}return;},iteri:function(kF,kG){var kH,kI,kJ,kK;kH=kG.length;kI=kG.length?kG[0].length:0;for(kJ=0;kJ<=kH-1;kJ++){for(kK=0;kK<=kI-1;kK++){((kF(kJ))(kK))(c.get2D(kG,kJ,kK));}}return;},map:function(kL,kM){return z.init(kM.length,kM.length?kM[0].length:0,function(kN){return function(kO){return kL(c.get2D(kM,kN,kO));};});},mapi:function(kP,kQ){return z.init(kQ.length,kQ.length?kQ[0].length:0,function(kR){return function(kS){return((kP(kR))(kS))(c.get2D(kQ,kR,kS));};});}},AsyncProxy:$.Class({},{get_CancellationToken:function(){return A.GetCT();},get_DefaultCancellationToken:function(){return(A.defCTS())[0];}}),CancellationTokenSource:$.Class({Cancel:function(){var kT,kU,kY,kZ;if(!this.c){this.c=true;kU=function(kV){var kW,kX;try{kV(null);kW={$:0};}catch(kX){kW={$:1,$0:kX};}return kW;};kY=this.r;kZ=c.choose(kU,kY);kT=c.length(kZ)>0?d.Raise(t.New(kZ)):null;}else{kT=null;}return kT;},Cancel1:function(k0){var k1,k2,k3,k5;if(!k0){k1=this.Cancel();}else{if(!this.c){this.c=true;k3=function(k4){return k4(null);};k5=this.r;k2=c.iter(k3,k5);}else{k2=null;}k1=k2;}return k1;},CancelAfter:function(k6){var k7,k8,k_,la=this;if(!this.c){k8=this.pending;B.iter(function(k9){return C(k9);},k8);k_=D(function(){return la.Cancel();},k6);k7=void(this.pending={$:1,$0:k_});}else{k7=null;}return k7;},get_IsCancellationRequested:function(){return this.c;}},{CreateLinkedTokenSource:function(lb,lc){return E.CreateLinkedTokenSource1([lb,lc]);},CreateLinkedTokenSource1:function(ld){var le,lf;le=E.New();lf=function(lg){var lh;lh=A.Register(lg,function(){return function(){return le.Cancel();}();});return;};return c.iter(lf,ld);},New:function(){var lk;lk=$.New(this,{});lk.c=false;lk.pending={$:0};lk.r=[];return lk;}}),Char:$.Class({},{GetNumericValue:function(ll){return(ll>=48?ll<=57:false)?w(ll)-w(48):-1;},IsControl:function(lm){return(lm>=0?lm<=31:false)?true:lm>=128?lm<=159:false;},IsDigit:function(ln){return ln>=48?ln<=57:false;},IsLetter:function(lo){return(lo>=65?lo<=90:false)?true:lo>=97?lo<=122:false;},IsLetterOrDigit:function(lp){return F.IsLetter(lp)?true:F.IsDigit(lp);},IsLower:function(lq){return lq>=97?lq<=122:false;},IsUpper:function(lr){return lr>=65?lr<=90:false;},IsWhiteSpace:function($c){var $0=this,$this=this;return $$.String.fromCharCode($c).match(/\s/)!==null;},Parse:function(ls){return ls.length===1?ls.charCodeAt(0):d.FailWith("String must be exactly one character long.");}}),Concurrency:{AwaitEvent:function(lt,lu){var lv;lv=function(lw){var lx,ly,lz,lA,lB,lC;lx=function(){return G.subscribeTo(lt,function(lE){var lF;H.Force(ly).Dispose();H.Force(lA).Dispose();lF=function(){return lw.k.call(null,{$:0,$0:lE});};return A.scheduler().Fork(lF);});};ly=H.Create(lx);lz=function(){return A.Register(lw.ct,function(){var lJ,lK,lL;if(lu.$==1){lK=lu.$0;lJ=lK(null);}else{H.Force(ly).Dispose();lL=function(){return lw.k.call(null,{$:2,$0:I.New()});};lJ=A.scheduler().Fork(lL);}return lJ;});};lA=H.Create(lz);lB=H.Force(ly);lC=H.Force(lA);return null;};return A.checkCancel(lv);},Bind:function(lN,lO){var lP;lP=function(lQ){return lN({k:function(lR){var lS,lT,lU,lY;if(lR.$==0){lT=lR.$0;lU=function(){var lW,lX;try{lW=(lO(lT))(lQ);}catch(lX){lW=lQ.k.call(null,{$:1,$0:lX});}return lW;};lS=A.scheduler().Fork(lU);}else{lY=function(){return lQ.k.call(null,lR);};lS=A.scheduler().Fork(lY);}return lS;},ct:lQ.ct});};return A.checkCancel(lP);},Catch:function(l0){var l1;l1=function(l2){var l3,l8;try{l3=l0({k:function(l4){var l5,l6,l7;if(l4.$==0){l6=l4.$0;l5=l2.k.call(null,{$:0,$0:{$:0,$0:l6}});}else{if(l4.$==1){l7=l4.$0;l5=l2.k.call(null,{$:0,$0:{$:1,$0:l7}});}else{l5=l2.k.call(null,l4);}}return l5;},ct:l2.ct});}catch(l8){l3=l2.k.call(null,{$:0,$0:{$:1,$0:l8}});}return l3;};return A.checkCancel(l1);},Combine:function(l9,l_){return A.Bind(l9,function(){return l_;});},Delay:function(ma){var mb;mb=function(mc){var md,me;try{md=(ma(null))(mc);}catch(me){md=mc.k.call(null,{$:1,$0:me});}return md;};return A.checkCancel(mb);},For:function(mf,mg){return A.Using(f.Get(mf),function(mh){return A.While(function(){return mh.MoveNext();},A.Delay(function(){return mg(mh.get_Current());}));});},FromContinuations:function(mk){var ml;ml=function(mm){var mn,mo;mn=[false];mo=function(mp){var mq;if(mn[0]){mq=d.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");}else{mn[0]=true;mq=A.scheduler().Fork(mp);}return mq;};return mk([function(mr){return mo(function(){return mm.k.call(null,{$:0,$0:mr});});},function(mt){return mo(function(){return mm.k.call(null,{$:1,$0:mt});});},function(mv){return mo(function(){return mm.k.call(null,{$:2,$0:mv});});}]);};return A.checkCancel(ml);},GetCT:$.Field(function(){var mx;mx=function(my){return my.k.call(null,{$:0,$0:my.ct});};return A.checkCancel(mx);}),Ignore:function(mz){return A.Bind(mz,function(){return A.Return(null);});},OnCancel:function(mB){var mC;mC=function(mD){return mD.k.call(null,{$:0,$0:A.Register(mD.ct,mB)});};return A.checkCancel(mC);},Parallel:function(mE){var mF,mG,mH;mF=c.ofSeq(mE);if(c.length(mF)===0){mG=A.Return([]);}else{mH=function(mI){var mJ,mK,mL,mM;mJ=mF.length;mK=[mJ];mL=c.create(mJ,undefined);mM=function(mN){return function(mO){var mP,mQ,mR,mS,mT,mU,mV,mW,mX;mP=[mK[0],mO];if(mP[0]===0){mQ=null;}else{if(mP[0]===1){if(mP[1].$==0){mS=mP[1].$0;c.set(mL,mN,mS);mK[0]=0;mR=mI.k.call(null,{$:0,$0:mL});}else{mP[0];mT=mP[1];mK[0]=0;mR=mI.k.call(null,mT);}mQ=mR;}else{if(mP[1].$==0){mV=mP[1].$0;mW=mP[0];c.set(mL,mN,mV);mU=void(mK[0]=mW-1);}else{mP[0];mX=mP[1];mK[0]=0;mU=mI.k.call(null,mX);}mQ=mU;}}return mQ;};};return c.iteri(function(mY){return function(mZ){var m0;m0=function(){return mZ({k:mM(mY),ct:mI.ct});};return A.scheduler().Fork(m0);};},mF);};mG=A.checkCancel(mH);}return mG;},Register:function(m2,m3){var m4;m4=m2.r.push(m3)-1;return{Dispose:function(){return c.set(m2.r,m4,function(){});}};},Return:function(m7){var m8;m8=function(m9){return m9.k.call(null,{$:0,$0:m7});};return A.checkCancel(m8);},Scheduler:$.Class({Fork:function(m_){var m$,na,nc=this;this.robin.push(m_);if(this.idle){this.idle=false;na=D(function(){return nc.tick();},0);m$=void na;}else{m$=null;}return m$;},tick:function(){var nd,ne,nf,ng,nh,ni,nk=this;nd=J.now();ne=true;while(ne){nf=this.robin.length;if(nf===0){this.idle=true;ng=ne=false;}else{(this.robin.shift())(null);if(J.now()-nd>40){ni=D(function(){return nk.tick();},0);nh=ne=false;}else{nh=null;}ng=nh;}}return;}},{New:function(){var nl;nl=$.New(this,{});nl.idle=true;nl.robin=[];return nl;}}),Sleep:function(nm){var nn;nn=function(no){var np,nq,nr,ns,nt,nu;np=function(){return D(function(){var nx;H.Force(ns).Dispose();nx=function(){return no.k.call(null,{$:0,$0:null});};return A.scheduler().Fork(nx);},nm);};nq=H.Create(np);nr=function(){return A.Register(no.ct,function(){var nB;C(H.Force(nq));nB=function(){return no.k.call(null,{$:2,$0:I.New()});};return A.scheduler().Fork(nB);});};ns=H.Create(nr);nt=H.Force(nq);nu=H.Force(ns);return null;};return A.checkCancel(nn);},Start:function(nD,nE){return A.StartWithContinuations(nD,function(){},function(nG){var nH;nH=[nG];return K?K.log.apply(K,["WebSharper: Uncaught asynchronous exception"].concat(nH)):undefined;},function(){},nE);},StartChild:function(nJ,nK){var nL;nL=function(nM){var nN,nO,nP,nQ,nR,nS,nT,nW,n2,n8;nN=[true];nO=[{$:0}];nP=[];if(nK.$==1){nS=nK.$0;nT=D(function(){var nV;nN[0]=false;nV={$:1,$0:L.New()};while(nP.length>0){(nP.shift())(nV);}return;},nS);nR={$:1,$0:nT};}else{nR={$:0};}nQ=nR;nW=function(){return nJ({k:function(nY){var nZ,n0,n1;if(nN[0]){nO[0]={$:1,$0:nY};if(nQ.$==1){n1=nQ.$0;n0=C(n1);}else{n0=null;}while(nP.length>0){(nP.shift())(nY);}}else{nZ=null;}return nZ;},ct:nM.ct});};A.scheduler().Fork(nW);n2=function(n3){var n4,n5,n6,n7;if(nN[0]){n5=nO[0];if(n5.$==0){n6=nP.push(n3.k);}else{n7=n5.$0;n6=n3.k.call(null,n7);}n4=n6;}else{n4=n3.k.call(null,{$:1,$0:L.New()});}return n4;};n8=A.checkCancel(n2);return nM.k.call(null,{$:0,$0:n8});};return A.checkCancel(nL);},StartWithContinuations:function(n9,n_,n$,oa,ob){var oc,od;oc=d.DefaultArg(ob,(A.defCTS())[0]);od=function(){return n9({k:function(of){var og,oh,oi,oj;if(of.$==1){oh=of.$0;og=n$(oh);}else{if(of.$==2){oi=of.$0;og=oa(oi);}else{oj=of.$0;og=n_(oj);}}return og;},ct:oc});};return A.scheduler().Fork(od);},TryCancelled:function(ok,ol){var om;om=function(on){return ok({k:function(oo){var op,oq;if(oo.$==2){oq=oo.$0;ol(oq);op=on.k.call(null,oo);}else{op=on.k.call(null,oo);}return op;},ct:on.ct});};return A.checkCancel(om);},TryFinally:function(or,os){var ot;ot=function(ou){return or({k:function(ov){var ow,ox;try{os(null);ow=ou.k.call(null,ov);}catch(ox){ow=ou.k.call(null,{$:1,$0:ox});}return ow;},ct:ou.ct});};return A.checkCancel(ot);},TryWith:function(oy,oz){var oA;oA=function(oB){return oy({k:function(oC){var oD,oE,oF,oG,oH;if(oC.$==0){oE=oC.$0;oD=oB.k.call(null,{$:0,$0:oE});}else{if(oC.$==1){oF=oC.$0;try{oG=(oz(oF))(oB);}catch(oH){oG=oB.k.call(null,oC);}oD=oG;}else{oD=oB.k.call(null,oC);}}return oD;},ct:oB.ct});};return A.checkCancel(oA);},Using:function(oI,oJ){return A.TryFinally(oJ(oI),function(){return oI.Dispose();});},While:function(oL,oM){return oL(null)?A.Bind(oM,function(){return A.While(oL,oM);}):A.Return(null);},checkCancel:function(oO){return function(oP){return oP.ct.c?oP.k.call(null,{$:2,$0:I.New()}):oO(oP);};},defCTS:$.Field(function(){return[E.New()];}),scheduler:$.Field(function(){return M.New();})},Control:{createEvent:function(oQ,oR,oS){return{AddHandler:oQ,RemoveHandler:oR,Subscribe:function(oT){var oU;oU=oS(function(){return function(oW){return oT.OnNext.call(null,oW);};});oQ(oU);return{Dispose:function(){return oR(oU);}};}};}},DateTimeHelpers:{AddMonths:function(oY,oZ){var o0;o0=new J(oY);return(new J(o0.getFullYear(),o0.getMonth()+oZ,o0.getDate(),o0.getHours(),o0.getMinutes(),o0.getSeconds(),o0.getMilliseconds())).getTime();},AddYears:function(o1,o2){var o3;o3=new J(o1);return(new J(o3.getFullYear()+o2,o3.getMonth(),o3.getDate(),o3.getHours(),o3.getMinutes(),o3.getSeconds(),o3.getMilliseconds())).getTime();},DatePortion:function(o4){var o5;o5=new J(o4);return(new J(o5.getFullYear(),o5.getMonth(),o5.getDate())).getTime();},LongDate:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});},LongTime:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});},Parse:function(o6){var o7;o7=J.parse(o6);return $$.isNaN(o7)?d.FailWith("Failed to parse date string."):o7;},ShortTime:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});},TimePortion:function(o8){var o9;o9=new J(o8);return(((24*0+o9.getHours())*60+o9.getMinutes())*60+o9.getSeconds())*1000+o9.getMilliseconds();}},Enumerable:{Of:function(o_){return{GetEnumerator:o_};}},Enumerator:{Get:function(o$){return o$ instanceof $$.Array?g.New(0,null,function(pa){var pb,pc;pb=pa.s;if(pb<c.length(o$)){pa.c=c.get(o$,pb);pa.s=pb+1;pc=true;}else{pc=false;}return pc;},function(){}):a.Equals(typeof o$,"string")?g.New(0,null,function(pe){var pf,pg;pf=pe.s;if(pf<o$.length){pe.c=o$.charCodeAt(pf);pe.s=pf+1;pg=true;}else{pg=false;}return pg;},function(){}):o$.GetEnumerator();},T:$.Class({Dispose:function(){return this.d.call(null,this);},MoveNext:function(){return this.n.call(null,this);},get_Current:function(){return this.c;}},{New:function(pi,pj,pk,pl){var pm;pm=$.New(this,{});pm.s=pi;pm.c=pj;pm.n=pk;pm.d=pl;return pm;}})},Exception:$.Class({},{New:function(){return $.New(this,u.New1("Exception of type 'System.Exception' was thrown."));},New1:function($message){var $0=this,$this=this;return new $$.Error($message);}}),Guid:$.Class({},{NewGuid:function(){var $0=this,$this=this;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=$$.Math.random()*16|0,v=c=="x"?r:r&0x3|0x8;return v.toString(16);});}}),HtmlContentExtensions:{"IControlBody.SingleNode.Static":function(pn){return O.New(pn);},SingleNode:$.Class({ReplaceInDom:function(po){var pp;pp=this.node.parentNode.replaceChild(this.node,po);return;}},{New:function(pq){var pr;pr=$.New(this,{});pr.node=pq;return pr;}})},IndexOutOfRangeException:$.Class({},{New:function(){return $.New(this,x.New1("Index was outside the bounds of the array."));},New1:function(ps){return $.New(this,u.New1(ps));}}),InvalidOperationException:$.Class({},{New:function(){return $.New(this,P.New1("Operation is not valid due to the current state of the object."));},New1:function(pt){return $.New(this,u.New1(pt));}}),JavaScript:{JSModule:{Delete:function($x,$field){var $0=this,$this=this;return delete $x[$field];},ForEach:function($x,$iter){var $0=this,$this=this;for(var k in $x){if($iter(k))break;}},GetFieldNames:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push(k);return r;},GetFieldValues:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push($o[k]);return r;},GetFields:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push([k,$o[k]]);return r;},Log:function($x){var $0=this,$this=this;if($$.console)$$.console.log($x);},LogMore:function($args){var $0=this,$this=this;if($$.console)$$.console.log.apply($$.console,$args);}},Pervasives:{NewFromList:function(pu){var pv,pw,px,py,pz,pA;pv={};pw=f.Get(pu);try{while(pw.MoveNext()){py=pw.get_Current();pz=py[1];pA=py[0];pv[pA]=pz;}}finally{pw.Dispose!=undefined?pw.Dispose():null;}return pv;}}},Json:{Activate:function(pB){var pC,pD,pE;pC=pB.$TYPES;for(pD=0;pD<=c.length(pC)-1;pD++){c.set(pC,pD,p.lookup(c.get(pC,pD)));}pE=function(pF){var pG,pH,pI,pJ,pK,pL,pM,pN;if(a.Equals(pF,null)){pG=pF;}else{pH=typeof pF;if(pH==="object"){if(pF instanceof $$.Array){pJ=p.shallowMap(pE,pF);}else{pK=p.shallowMap(pE,pF.$V);pL=pF.$T;if(a.Equals(typeof pL,"undefined")){pM=pK;}else{pN=new(c.get(pC,pL))();s.ForEach(pK,function(pO){pN[pO]=pK[pO];return false;});pM=pN;}pJ=pM;}pI=pJ;}else{pI=pF;}pG=pI;}return pG;};return pE(pB.$DATA);},lookup:function(pP){var pQ,pR,pS,pT,pU,pV;pQ=c.length(pP);pR=$$;pS=0;while(pS<pQ){pT=c.get(pP,pS);pU=pR[pT];if(!a.Equals(typeof pU,undefined)){pR=pU;pV=pS=pS+1;}else{pV=d.FailWith("Invalid server reply. Failed to find type: "+pT);}}return pR;},shallowMap:function(pW,pX){var pY,pZ,p0,p1;if(pX instanceof $$.Array){pY=c.map(pW,pX);}else{pZ=typeof pX;if(pZ==="object"){p1={};s.ForEach(pX,function(p2){p1[p2]=pW(pX[p2]);return false;});p0=p1;}else{p0=pX;}pY=p0;}return pY;}},Lazy:{Create:function(p3){var p4,p5;p4={value:undefined,created:false,eval:p3};p5=function(){var p7;if(p4.created){p7=p4.value;}else{p4.created=true;p4.value=p3(null);p7=p4.value;}return p7;};p4.eval=p5;return p4;},CreateFromValue:function(p8){return{value:p8,created:true,eval:function(){return p8;},eval:function(){return p8;}};},Force:function(p$){return p$.eval.call(null,null);}},List:{T:$.Class({GetEnumerator:function(){return g.New(this,null,function(qa){var qb,qc,qd,qe;qb=qa.s;if(qb.$==0){qc=false;}else{qd=qb.$1;qe=qb.$0;qa.c=qe;qa.s=qd;qc=true;}return qc;},function(){});},GetSlice:function(qg,qh){var qi,qj,qk,ql,qm,qn,qo,qp,qq,qr,qs,qt,qu;qi=[qg,qh];if(qi[0].$==1){if(qi[1].$==1){ql=qi[0].$0;qm=qi[1].$0;qn=qm-ql+1;qo=y.skip(ql,this);qp=i.take(qn,qo);qk=e.ofSeq(qp);}else{qq=qi[0].$0;qk=y.skip(qq,this);}qj=qk;}else{if(qi[1].$==1){qs=qi[1].$0;qt=qs+1;qu=i.take(qt,this);qr=e.ofSeq(qu);}else{qr=this;}qj=qr;}return qj;},get_Item:function(qv){return i.nth(qv,this);},get_Length:function(){return i.length(this);}}),append:function(qw,qx){return e.ofSeq(i.append(qw,qx));},choose:function(qy,qz){return e.ofSeq(i.choose(qy,qz));},chunkBySize:function(qA,qB){var qC,qE,qF;qC=function(qD){return e.ofArray(qD);};qE=j.chunkBySize(qA,qB);qF=i.toList(qE);return e.map(qC,qF);},collect:function(qG,qH){return e.ofSeq(i.collect(qG,qH));},compareWith:function(qI,qJ,qK){return j.compareWith(qI,qJ,qK);},concat:function(qL){return e.ofSeq(i.concat(qL));},contains:function(qM,qN){return j.contains(qM,qN);},countBy:function(qO,qP){var qQ;qQ=j.countBy(qO,qP);return i.toList(qQ);},distinct:function(qR){var qS;qS=j.distinct(qR);return i.toList(qS);},distinctBy:function(qT,qU){var qV;qV=j.distinctBy(qT,qU);return i.toList(qV);},exactlyOne:function(qW){var qX,qY,qZ;if(qW.$==1){if(qW.$1.$==0){qZ=qW.$0;qY=qZ;}else{qY=d.FailWith("The input does not have precisely one element.");}qX=qY;}else{qX=d.FailWith("The input does not have precisely one element.");}return qX;},except:function(q0,q1){var q2;q2=j.except(q0,q1);return i.toList(q2);},exists2:function(q3,q4,q5){return c.exists2(q3,c.ofSeq(q4),c.ofSeq(q5));},filter:function(q6,q7){return e.ofSeq(i.filter(q6,q7));},findBack:function(q8,q9){var q_,q$,ra;q_=e.tryFindBack(q8,q9);if(q_.$==0){q$=d.FailWith("KeyNotFoundException");}else{ra=q_.$0;q$=ra;}return q$;},findIndexBack:function(rb,rc){var rd,re,rf;rd=k.tryFindIndexBack(rb,c.ofSeq(rc));if(rd.$==0){re=d.FailWith("KeyNotFoundException");}else{rf=rd.$0;re=rf;}return re;},fold2:function(rg,rh,ri,rj){return c.fold2(rg,rh,c.ofSeq(ri),c.ofSeq(rj));},foldBack:function(rk,rl,rm){return c.foldBack(rk,c.ofSeq(rl),rm);},foldBack2:function(rn,ro,rp,rq){return c.foldBack2(rn,c.ofSeq(ro),c.ofSeq(rp),rq);},forall2:function(rr,rs,rt){return c.forall2(rr,c.ofSeq(rs),c.ofSeq(rt));},groupBy:function(ru,rv){var rw,rA,rB;rw=function(rx){var ry,rz;ry=rx[0];rz=rx[1];return[ry,i.toList(rz)];};rA=j.groupBy(ru,rv);rB=i.toList(rA);return e.map(rw,rB);},head:function(rC){var rD,rE;if(rC.$==1){rE=rC.$0;rD=rE;}else{rD=d.FailWith("The input list was empty.");}return rD;},indexed:function(rF){return e.mapi(function(rG){return function(rH){return[rG,rH];};},rF);},init:function(rI,rJ){return e.ofArray(c.init(rI,rJ));},iter2:function(rK,rL,rM){return c.iter2(rK,c.ofSeq(rL),c.ofSeq(rM));},iteri2:function(rN,rO,rP){return c.iteri2(rN,c.ofSeq(rO),c.ofSeq(rP));},last:function(rQ){return j.last(rQ);},map:function(rR,rS){return e.ofSeq(i.map(rR,rS));},map2:function(rT,rU,rV){return e.ofArray(c.map2(rT,c.ofSeq(rU),c.ofSeq(rV)));},mapFold:function(rW,rX,rY){var rZ,r0,r1;rZ=k.mapFold(rW,rX,c.ofSeq(rY));r0=rZ[0];r1=rZ[1];return[e.ofArray(r0),r1];},mapFoldBack:function(r2,r3,r4){var r5,r6,r7;r5=k.mapFoldBack(r2,c.ofSeq(r3),r4);r6=r5[0];r7=r5[1];return[e.ofArray(r6),r7];},mapi:function(r8,r9){return e.ofSeq(i.mapi(r8,r9));},mapi2:function(r_,r$,sa){return e.ofArray(c.mapi2(r_,c.ofSeq(r$),c.ofSeq(sa)));},max:function(sb){return i.reduce(function(sc){return function(sd){return d.Max(sc,sd);};},sb);},maxBy:function(se,sf){return i.reduce(function(sg){return function(sh){return a.Compare(se(sg),se(sh))===1?sg:sh;};},sf);},min:function(si){return i.reduce(function(sj){return function(sk){return d.Min(sj,sk);};},si);},minBy:function(sl,sm){return i.reduce(function(sn){return function(so){return a.Compare(sl(sn),sl(so))===-1?sn:so;};},sm);},ofArray:function(sp){var sq,sr;sq=$.New(Q,{$:0});for(sr=0;sr<=c.length(sp)-1;sr++){sq=$.New(Q,{$:1,$0:c.get(sp,c.length(sp)-sr-1),$1:sq});}return sq;},ofSeq:function(ss){var st,su,sv,sw,sx;st=$.New(Q,{$:0});su=st;sv=f.Get(ss);try{while(sv.MoveNext()){su.$=1;sx=$.New(Q,{$:0});su.$0=sv.get_Current();su.$1=sx;su=sx;}su.$=0;sw=st;}finally{sv.Dispose!=undefined?sv.Dispose():null;}return sw;},pairwise:function(sy){var sz;sz=j.pairwise(sy);return i.toList(sz);},partition:function(sA,sB){var sC,sD,sE;sC=c.partition(sA,c.ofSeq(sB));sD=sC[1];sE=sC[0];return[e.ofArray(sE),e.ofArray(sD)];},permute:function(sF,sG){return e.ofArray(c.permute(sF,c.ofSeq(sG)));},reduceBack:function(sH,sI){return c.reduceBack(sH,c.ofSeq(sI));},replicate:function(sJ,sK){return e.ofArray(c.create(sJ,sK));},rev:function(sL){var sM;sM=c.ofSeq(sL);sM.reverse();return e.ofArray(sM);},scan:function(sN,sO,sP){return e.ofSeq(i.scan(sN,sO,sP));},scanBack:function(sQ,sR,sS){return e.ofArray(c.scanBack(sQ,c.ofSeq(sR),sS));},singleton:function(sT){return e.ofArray([sT]);},sort:function(sU){var sV;sV=c.ofSeq(sU);c.sortInPlace(sV);return e.ofArray(sV);},sortBy:function(sW,sX){return e.sortWith(function(sY){return function(sZ){return d.Compare(sW(sY),sW(sZ));};},sX);},sortByDescending:function(s0,s1){return e.sortWith(function(s2){return function(s3){return-d.Compare(s0(s2),s0(s3));};},s1);},sortDescending:function(s4){var s5;s5=c.ofSeq(s4);k.sortInPlaceByDescending(function(s6){return s6;},s5);return e.ofArray(s5);},sortWith:function(s7,s8){var s9;s9=c.ofSeq(s8);c.sortInPlaceWith(s7,s9);return e.ofArray(s9);},splitAt:function(s_,s$){return[e.ofSeq(i.take(s_,s$)),y.skip(s_,s$)];},splitInto:function(ta,tb){var tc,te,tf;tc=function(td){return e.ofArray(td);};te=k.splitInto(ta,c.ofSeq(tb));tf=e.ofArray(te);return e.map(tc,tf);},tail:function(tg){var th,ti;if(tg.$==1){ti=tg.$1;th=ti;}else{th=d.FailWith("The input list was empty.");}return th;},tryFindBack:function(tj,tk){return k.tryFindBack(tj,c.ofSeq(tk));},tryHead:function(tl){var tm,tn;if(tl.$==0){tm={$:0};}else{tn=tl.$0;tm={$:1,$0:tn};}return tm;},tryItem:function(to,tp){return j.tryItem(to,tp);},tryLast:function(tq){return j.tryLast(tq);},unfold:function(tr,ts){var tt;tt=j.unfold(tr,ts);return i.toList(tt);},unzip:function(tu){var tv,tw,tx,ty,tz,tA,tB;tv=[];tw=[];tx=f.Get(tu);try{while(tx.MoveNext()){tz=tx.get_Current();tA=tz[1];tB=tz[0];tv.push(tB);tw.push(tA);}}finally{tx.Dispose!=undefined?tx.Dispose():null;}return[e.ofArray(tv.slice(0)),e.ofArray(tw.slice(0))];},unzip3:function(tC){var tD,tE,tF,tG,tH,tI,tJ,tK,tL;tD=[];tE=[];tF=[];tG=f.Get(tC);try{while(tG.MoveNext()){tI=tG.get_Current();tJ=tI[2];tK=tI[1];tL=tI[0];tD.push(tL);tE.push(tK);tF.push(tJ);}}finally{tG.Dispose!=undefined?tG.Dispose():null;}return[e.ofArray(tD.slice(0)),e.ofArray(tE.slice(0)),e.ofArray(tF.slice(0))];},windowed:function(tM,tN){var tO,tQ,tR;tO=function(tP){return e.ofArray(tP);};tQ=j.windowed(tM,tN);tR=i.map(tO,tQ);return i.toList(tR);},zip:function(tS,tT){return e.ofArray(c.zip(c.ofSeq(tS),c.ofSeq(tT)));},zip3:function(tU,tV,tW){return e.ofArray(c.zip3(c.ofSeq(tU),c.ofSeq(tV),c.ofSeq(tW)));}},MatchFailureException:$.Class({},{New:function(tX,tY,tZ){return $.New(this,u.New1(tX+" at "+$$.String(tY)+":"+$$.String(tZ)));}}),Nullable:{get:function(t0){return t0==null?d.FailWith("Nullable object must have a value."):t0;},getOrValue:function(t1,t2){return t1==null?t2:t1;}},OperationCanceledException:$.Class({},{New:function(){return $.New(this,I.New1("The operation was canceled."));},New1:function(t3){return $.New(this,u.New1(t3));}}),Operators:{Compare:function(t4,t5){return a.Compare(t4,t5);},DefaultArg:function(t6,t7){var t8,t9;if(t6.$==0){t8=t7;}else{t9=t6.$0;t8=t9;}return t8;},FailWith:function(t_){return d.Raise(u.New1(t_));},KeyValue:function(t$){return[t$.K,t$.V];},Max:function(ua,ub){return a.Compare(ua,ub)===1?ua:ub;},Min:function(uc,ud){return a.Compare(uc,ud)===-1?uc:ud;},Pown:function(ue,uf){var ug;ug=function(uh){var ui,uj,uk;if(uh===1){ui=ue;}else{if(uh%2===0){uk=ug(uh/2>>0);uj=uk*uk;}else{uj=ue*ug(uh-1);}ui=uj;}return ui;};return ug(uf);},Raise:function($e){var $0=this,$this=this;throw $e;},Sign:function(ul){return ul===0?0:ul<0?-1:1;},Truncate:function(um){return um<0?S.ceil(um):S.floor(um);},Using:function(un,uo){var up;try{up=uo(un);}finally{un.Dispose();}return up;},range:function(uq,ur){var us;us=1+ur-uq;return us<=0?i.empty():i.init(us,function(ut){return ut+uq;});},step:function(uu,uv,uw){var ux,uy,uA,uC;ux=d.Sign(uv);uy=function(uz){return ux*(uw-uz)>=0;};uA=i.initInfinite(function(uB){return uu+uB*uv;});uC=i.takeWhile(uy,uA);return uC;}},Option:{bind:function(uD,uE){var uF,uG;if(uE.$==0){uF={$:0};}else{uG=uE.$0;uF=uD(uG);}return uF;},exists:function(uH,uI){var uJ,uK;if(uI.$==0){uJ=false;}else{uK=uI.$0;uJ=uH(uK);}return uJ;},filter:function(uL,uM){var uN,uO;if(uM.$==1){uO=uM.$0;uN=uL(uO)?{$:1,$0:uO}:{$:0};}else{uN={$:0};}return uN;},fold:function(uP,uQ,uR){var uS,uT;if(uR.$==0){uS=uQ;}else{uT=uR.$0;uS=(uP(uQ))(uT);}return uS;},foldBack:function(uU,uV,uW){var uX,uY;if(uV.$==0){uX=uW;}else{uY=uV.$0;uX=(uU(uY))(uW);}return uX;},forall:function(uZ,u0){var u1,u2;if(u0.$==0){u1=true;}else{u2=u0.$0;u1=uZ(u2);}return u1;},iter:function(u3,u4){var u5,u6;if(u4.$==0){u5=null;}else{u6=u4.$0;u5=u3(u6);}return u5;},map:function(u7,u8){var u9,u_;if(u8.$==0){u9={$:0};}else{u_=u8.$0;u9={$:1,$0:u7(u_)};}return u9;},ofObj:function(u$){return u$==null?{$:0}:{$:1,$0:u$};},toArray:function(va){var vb,vc;if(va.$==0){vb=[];}else{vc=va.$0;vb=[vc];}return vb;},toList:function(vd){var ve,vf;if(vd.$==0){ve=$.New(Q,{$:0});}else{vf=vd.$0;ve=e.ofArray([vf]);}return ve;},toObj:function(vg){var vh,vi;if(vg.$==0){}else{vi=vg.$0;vh=vi;}return vh;}},PrintfHelpers:{padNumLeft:function(vj,vk){var vl;vl=c.get(vj,0);return((vl===" "?true:vl==="+")?true:vl==="-")?vl+T.PadLeftWith(vj.substr(1),vk-1,48):T.PadLeftWith(vj,vk,48);},plusForPos:function(vm,vn){return 0<=vm?"+"+vn:vn;},prettyPrint:function(vo){var vp,vz,vA,vB,vC,vD,vF;vp=function(vq){var vr,vs,vt,vx,vy;vr=$$.String(vq);if(vr==="[object Object]"){vt=function(vu){var vv,vw;vv=vu[0];vw=vu[1];return vv+" = "+U.prettyPrint(vw);};vx=s.GetFields(vq);vy=c.map(vt,vx);vs="{"+T.concat("; ",vy)+"}";}else{vs=vr;}return vs;};vz=typeof vo;if(vz=="string"){vA="\""+vo+"\"";}else{if(vz=="object"){if(vo instanceof $$.Array){vD=function(vE){return U.prettyPrint(vE);};vF=c.map(vD,vo);vC="[|"+T.concat("; ",vF)+"|]";}else{vC=vp(vo);}vB=vC;}else{vB=$$.String(vo);}vA=vB;}return vA;},printArray:function(vG,vH){var vI;vI=c.map(vG,vH);return"[|"+T.concat("; ",vI)+"|]";},printArray2D:function(vJ,vK){var vL;vL=i.delay(function(){var vN;vN=vK.length?vK[0].length:0;return i.map(function(vO){var vP;vP=i.delay(function(){return i.map(function(vR){return vJ(c.get2D(vK,vO,vR));},d.range(0,vN-1));});return T.concat("; ",vP);},d.range(0,vK.length-1));});return"[["+T.concat("][",vL)+"]]";},printList:function(vS,vT){var vU;vU=i.map(vS,vT);return"["+T.concat("; ",vU)+"]";},spaceForPos:function(vV,vW){return 0<=vV?" "+vW:vW;},toSafe:function(vX){return vX==null?"":vX;}},Queue:{Clear:function(vY){return vY.splice(0,c.length(vY));},Contains:function(vZ,v0){return i.exists(function(v1){return a.Equals(v0,v1);},vZ);},CopyTo:function(v2,v3,v4){return c.blit(v2,0,v3,v4,c.length(v2));}},Random:$.Class({Next:function(){return S.floor(S.random()*2147483648);},Next1:function(v5){return v5<0?d.FailWith("'maxValue' must be greater than zero."):S.floor(S.random()*v5);},Next2:function(v6,v7){var v8,v9;if(v6>v7){v8=d.FailWith("'minValue' cannot be greater than maxValue.");}else{v9=v7-v6;v8=v6+S.floor(S.random()*v9);}return v8;},NextBytes:function(v_){var v$;for(v$=0;v$<=c.length(v_)-1;v$++){c.set(v_,v$,S.floor(S.random()*256));}return;}},{New:function(){return $.New(this,{});}}),Ref:{decr:function($x){var $0=this,$this=this;return void($x[0]--);},incr:function($x){var $0=this,$this=this;return void($x[0]++);}},Remoting:{AjaxProvider:$.Field(function(){return W.New();}),AjaxRemotingProvider:$.Class({},{Async:function(wa,wb){var wc,wd;wc=V.makeHeaders(wa);wd=V.makePayload(wb);return A.Delay(function(){var wf;wf=X.get_CancellationToken();return A.Bind(wf,function(wg){return A.FromContinuations(function(wh){var wi,wj,wk,wl,wm,wq,wt,ww;wi=wh[0];wj=wh[1];wk=wh[2];wl=[true];wm=A.Register(wg,function(){return function(){var wp;if(wl[0]){wl[0]=false;wp=wk(I.New());}else{wp=null;}return wp;}();});wq=function(wr){var ws;if(wl[0]){wl[0]=false;wm.Dispose();ws=wi(p.Activate(q.parse(wr)));}else{ws=null;}return ws;};wt=function(wu){var wv;if(wl[0]){wl[0]=false;wm.Dispose();wv=wj(wu);}else{wv=null;}return wv;};ww=V.EndPoint();return V.AjaxProvider().Async(ww,wc,wd,wq,wt);});});});},Send:function(wx,wy){return A.Start(A.Ignore(Y.Async(wx,wy)),{$:0});},Sync:function(wz,wA){var wB,wC,wD,wE;wB=V.EndPoint();wC=V.makeHeaders(wz);wD=V.makePayload(wA);wE=V.AjaxProvider().Sync(wB,wC,wD);return p.Activate(q.parse(wE));}}),EndPoint:$.Field(function(){return"?";}),UseHttps:function(){var wF,wG,wH,wI;try{if(!T.StartsWith(Z.location.href,"https://")){wH=T.Replace(Z.location.href,"http://","https://");V.EndPoint=function(){return wH;};wG=true;}else{wG=false;}wF=wG;}catch(wI){wF=false;}return wF;},XhrProvider:$.Class({Async:function(wJ,wK,wL,wM,wN){return V.ajax(true,wJ,wK,wL,wM,wN,function(){return V.ajax(true,wJ,wK,wL,wM,wN,undefined);});},Sync:function(wP,wQ,wR){var wS;wS=[undefined];V.ajax(false,wP,wQ,wR,function(wT){wS[0]=wT;},function(wU){return d.Raise(wU);},function(){return V.ajax(false,wP,wQ,wR,function(wW){wS[0]=wW;},function(wX){return d.Raise(wX);},undefined);});return wS[0];}},{New:function(){return $.New(this,{});}}),ajax:function($async,$url,$headers,$data,$ok,$err,$csrf){var $0=this,$this=this;var xhr=new $$.XMLHttpRequest();var csrf=$$.document.cookie.replace(new $$.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");xhr.open("POST",$url,$async);if($async==true){xhr.withCredentials=true;}for(var h in $headers){xhr.setRequestHeader(h,$headers[h]);}if(csrf){xhr.setRequestHeader("x-csrftoken",csrf);}function k(){if(xhr.status==200){$ok(xhr.responseText);}else if($csrf&&xhr.status==403&&xhr.responseText=="CSRF"){$csrf();}else{var msg="Response status is not 200: ";$err(new $$.Error(msg+xhr.status));}}if("onload"in xhr){xhr.onload=xhr.onerror=xhr.onabort=k;}else{xhr.onreadystatechange=function(){if(xhr.readyState==4){k();}};}xhr.send($data);},makeHeaders:function(wY){var wZ;wZ={};wZ["content-type"]="application/json";wZ["x-websharper-rpc"]=wY;return wZ;},makePayload:function(w0){return q.stringify(w0);}},Seq:{append:function(w1,w2){return h.Of(function(){var w4,w5;w4=f.Get(w1);w5=[true];return g.New(w4,null,function(w6){var w7,w8,w9,w_;if(w6.s.MoveNext()){w6.c=w6.s.get_Current();w7=true;}else{w8=w6.s;!a.Equals(w8,null)?w8.Dispose():null;w6.s=null;if(w5[0]){w5[0]=false;w6.s=f.Get(w2);if(w6.s.MoveNext()){w6.c=w6.s.get_Current();w_=true;}else{w6.s.Dispose();w6.s=null;w_=false;}w9=w_;}else{w9=false;}w7=w9;}return w7;},function(w$){var xa;xa=w$.s;return!a.Equals(xa,null)?xa.Dispose():null;});});},average:function(xb){var xc,xh,xi;xc=i.fold(function(xd){var xe,xf;xe=xd[0];xf=xd[1];return function(xg){return[xe+1,xf+xg];};},[0,0],xb);xh=xc[1];xi=xc[0];return xh/xi;},averageBy:function(xj,xk){var xl,xq,xr;xl=i.fold(function(xm){var xn,xo;xn=xm[0];xo=xm[1];return function(xp){return[xn+1,xo+xj(xp)];};},[0,0],xk);xq=xl[1];xr=xl[0];return xq/xr;},cache:function(xs){var xt,xu,xv;xt=[];xu=[f.Get(xs)];xv=function(){var xx;xx=function(xy){var xz,xA,xB,xC;if(xy.s+1<xt.length){xy.s=xy.s+1;xy.c=xt[xy.s];xz=true;}else{xA=xu[0];if(a.Equals(xA,null)){xB=false;}else{if(xA.MoveNext()){xy.s=xy.s+1;xy.c=xA.get_Current();xt.push(xy.get_Current());xC=true;}else{xA.Dispose();xu[0]=null;xC=false;}xB=xC;}xz=xB;}return xz;};return g.New(0,null,xx,function(){});};return h.Of(xv);},choose:function(xE,xF){var xG;xG=function(xH){var xI,xJ,xK;xI=xE(xH);if(xI.$==0){xJ=$.New(Q,{$:0});}else{xK=xI.$0;xJ=e.ofArray([xK]);}return xJ;};return i.collect(xG,xF);},collect:function(xL,xM){return i.concat(i.map(xL,xM));},concat:function(xN){return h.Of(function(){var xP,xQ;xP=f.Get(xN);xQ=function(xR){var xS,xT,xU,xV;xS=xR.s;if(a.Equals(xS,null)){if(xP.MoveNext()){xR.s=f.Get(xP.get_Current());xU=xQ(xR);}else{xP.Dispose();xU=false;}xT=xU;}else{if(xS.MoveNext()){xR.c=xS.get_Current();xV=true;}else{xR.Dispose();xR.s=null;xV=xQ(xR);}xT=xV;}return xT;};return g.New(null,null,xQ,function(xW){var xX;xX=xW.s;!a.Equals(xX,null)?xX.Dispose():null;return!a.Equals(xP,null)?xP.Dispose():null;});});},delay:function(xY){return h.Of(function(){return f.Get(xY(null));});},empty:function(){return[];},enumFinally:function(x0,x1){var x2;x2=function(){var x4,x5,x6,x7,x9;try{x5=f.Get(x0);}catch(x6){x1(null);x5=d.Raise(x6);}x4=x5;x7=function(){x4.Dispose();return x1(null);};x9=function(x_){var x$;if(x4.MoveNext()){x_.c=x4.get_Current();x$=true;}else{x$=false;}return x$;};return g.New(null,null,x9,x7);};return h.Of(x2);},enumUsing:function(ya,yb){var yc;yc=function(){var ye,yf,yg,yh,yj;try{yf=f.Get(yb(ya));}catch(yg){ya.Dispose();yf=d.Raise(yg);}ye=yf;yh=function(){ye.Dispose();return ya.Dispose();};yj=function(yk){var yl;if(ye.MoveNext()){yk.c=ye.get_Current();yl=true;}else{yl=false;}return yl;};return g.New(null,null,yj,yh);};return h.Of(yc);},enumWhile:function(ym,yn){return h.Of(function(){var yp;yp=function(yq){var yr,ys,yt,yu;yr=yq.s;if(a.Equals(yr,null)){if(ym(null)){yq.s=f.Get(yn);yt=yp(yq);}else{yt=false;}ys=yt;}else{if(yr.MoveNext()){yq.c=yr.get_Current();yu=true;}else{yr.Dispose();yq.s=null;yu=yp(yq);}ys=yu;}return ys;};return g.New(null,null,yp,function(yv){var yw;yw=yv.s;return!a.Equals(yw,null)?yw.Dispose():null;});});},exists:function(yx,yy){var yz,yA,yB;yz=f.Get(yy);try{yB=false;while(!yB?yz.MoveNext():false){yB=yx(yz.get_Current());}yA=yB;}finally{yz.Dispose!=undefined?yz.Dispose():null;}return yA;},exists2:function(yC,yD,yE){var yF,yG,yH,yI,yJ;yF=f.Get(yD);try{yH=f.Get(yE);try{yJ=false;while((!yJ?yF.MoveNext():false)?yH.MoveNext():false){yJ=(yC(yF.get_Current()))(yH.get_Current());}yI=yJ;}finally{yH.Dispose!=undefined?yH.Dispose():null;}yG=yI;}finally{yF.Dispose!=undefined?yF.Dispose():null;}return yG;},filter:function(yK,yL){var yM;yM=function(){var yO,yP,yR;yO=f.Get(yL);yP=function(){return yO.Dispose();};yR=function(yS){var yT,yU,yV,yW;yT=yO.MoveNext();yU=yO.get_Current();yV=false;while(yT){if(yK(yU)){yS.c=yU;yV=true;yW=yT=false;}else{yW=yO.MoveNext()?yU=yO.get_Current():yT=false;}}return yV;};return g.New(null,null,yR,yP);};return h.Of(yM);},find:function(yX,yY){var yZ,y0,y1;yZ=i.tryFind(yX,yY);if(yZ.$==0){y0=d.FailWith("KeyNotFoundException");}else{y1=yZ.$0;y0=y1;}return y0;},findBack:function(y2,y3){var y4,y5,y6;y4=k.tryFindBack(y2,c.ofSeq(y3));if(y4.$==0){y5=d.FailWith("KeyNotFoundException");}else{y6=y4.$0;y5=y6;}return y5;},findIndex:function(y7,y8){var y9,y_,y$;y9=i.tryFindIndex(y7,y8);if(y9.$==0){y_=d.FailWith("KeyNotFoundException");}else{y$=y9.$0;y_=y$;}return y_;},findIndexBack:function(za,zb){var zc,zd,ze;zc=k.tryFindIndexBack(za,c.ofSeq(zb));if(zc.$==0){zd=d.FailWith("KeyNotFoundException");}else{ze=zc.$0;zd=ze;}return zd;},fold:function(zf,zg,zh){var zi,zj,zk;zi=zg;zj=f.Get(zh);try{while(zj.MoveNext()){zi=(zf(zi))(zj.get_Current());}zk=zi;}finally{zj.Dispose!=undefined?zj.Dispose():null;}return zk;},fold2:function(zl,zm,zn,zo){return c.fold2(zl,zm,c.ofSeq(zn),c.ofSeq(zo));},foldBack:function(zp,zq,zr){return c.foldBack(zp,c.ofSeq(zq),zr);},foldBack2:function(zs,zt,zu,zv){return c.foldBack2(zs,c.ofSeq(zt),c.ofSeq(zu),zv);},forall:function(zw,zx){return!i.exists(function(zy){return!zw(zy);},zx);},forall2:function(zz,zA,zB){return!i.exists2(function(zC){return function(zD){return!(zz(zC))(zD);};},zA,zB);},head:function(zE){var zF,zG;zF=f.Get(zE);try{zG=zF.MoveNext()?zF.get_Current():j.insufficient();}finally{zF.Dispose!=undefined?zF.Dispose():null;}return zG;},indexed:function(zH){return i.mapi(function(zI){return function(zJ){return[zI,zJ];};},zH);},init:function(zK,zL){return i.take(zK,i.initInfinite(zL));},initInfinite:function(zM){var zN;zN=function(){var zP;zP=function(zQ){zQ.c=zM(zQ.s);zQ.s=zQ.s+1;return true;};return g.New(0,null,zP,function(){});};return h.Of(zN);},isEmpty:function(zS){var zT,zU;zT=f.Get(zS);try{zU=!zT.MoveNext();}finally{zT.Dispose!=undefined?zT.Dispose():null;}return zU;},iter:function(zV,zW){return i.iteri(function(){return function(zY){return zV(zY);};},zW);},iter2:function(zZ,z0,z1){var z2,z3,z4,z5;z2=f.Get(z0);try{z4=f.Get(z1);try{while(z2.MoveNext()?z4.MoveNext():false){(zZ(z2.get_Current()))(z4.get_Current());}}finally{z4.Dispose!=undefined?z4.Dispose():null;}z3=z5;}finally{z2.Dispose!=undefined?z2.Dispose():null;}return z3;},iteri:function(z6,z7){var z8,z9,z_;z8=0;z9=f.Get(z7);try{while(z9.MoveNext()){(z6(z8))(z9.get_Current());z8=z8+1;}}finally{z9.Dispose!=undefined?z9.Dispose():null;}return z_;},iteri2:function(z$,Aa,Ab){return c.iteri2(z$,c.ofSeq(Aa),c.ofSeq(Ab));},length:function(Ac){var Ad,Ae,Af;Ad=0;Ae=f.Get(Ac);try{while(Ae.MoveNext()){Ad=Ad+1;}Af=Ad;}finally{Ae.Dispose!=undefined?Ae.Dispose():null;}return Af;},map:function(Ag,Ah){var Ai;Ai=function(){var Ak,Al,An;Ak=f.Get(Ah);Al=function(){return Ak.Dispose();};An=function(Ao){var Ap;if(Ak.MoveNext()){Ao.c=Ag(Ak.get_Current());Ap=true;}else{Ap=false;}return Ap;};return g.New(null,null,An,Al);};return h.Of(Ai);},map2:function(Aq,Ar,As){var At;At=function(){var Av,Aw,Ax,Az;Av=f.Get(Ar);Aw=f.Get(As);Ax=function(){Av.Dispose();return Aw.Dispose();};Az=function(AA){var AB;if(Av.MoveNext()?Aw.MoveNext():false){AA.c=(Aq(Av.get_Current()))(Aw.get_Current());AB=true;}else{AB=false;}return AB;};return g.New(null,null,Az,Ax);};return h.Of(At);},map3:function(AC,AD,AE,AF){var AG;AG=function(){var AI,AJ,AK,AL,AN;AI=f.Get(AD);AJ=f.Get(AE);AK=f.Get(AF);AL=function(){AI.Dispose();AJ.Dispose();return AK.Dispose();};AN=function(AO){var AP;if((AI.MoveNext()?AJ.MoveNext():false)?AK.MoveNext():false){AO.c=((AC(AI.get_Current()))(AJ.get_Current()))(AK.get_Current());AP=true;}else{AP=false;}return AP;};return g.New(null,null,AN,AL);};return h.Of(AG);},mapFold:function(AQ,AR,AS){var AT,AU,AV;AT=k.mapFold(AQ,AR,i.toArray(AS));AU=AT[0];AV=AT[1];return[AU,AV];},mapFoldBack:function(AW,AX,AY){var AZ,A0,A1;AZ=k.mapFoldBack(AW,i.toArray(AX),AY);A0=AZ[0];A1=AZ[1];return[A0,A1];},mapi:function(A2,A3){return i.map2(A2,i.initInfinite(function(A4){return A4;}),A3);},mapi2:function(A5,A6,A7){return i.map3(A5,i.initInfinite(function(A8){return A8;}),A6,A7);},max:function(A9){return i.reduce(function(A_){return function(A$){return a.Compare(A_,A$)>=0?A_:A$;};},A9);},maxBy:function(Ba,Bb){return i.reduce(function(Bc){return function(Bd){return a.Compare(Ba(Bc),Ba(Bd))>=0?Bc:Bd;};},Bb);},min:function(Be){return i.reduce(function(Bf){return function(Bg){return a.Compare(Bf,Bg)<=0?Bf:Bg;};},Be);},minBy:function(Bh,Bi){return i.reduce(function(Bj){return function(Bk){return a.Compare(Bh(Bj),Bh(Bk))<=0?Bj:Bk;};},Bi);},nth:function(Bl,Bm){var Bn,Bo,Bp;Bl<0?d.FailWith("negative index requested"):null;Bn=-1;Bo=f.Get(Bm);try{while(Bn<Bl){!Bo.MoveNext()?j.insufficient():null;Bn=Bn+1;}Bp=Bo.get_Current();}finally{Bo.Dispose!=undefined?Bo.Dispose():null;}return Bp;},permute:function(Bq,Br){return i.delay(function(){return c.permute(Bq,c.ofSeq(Br));});},pick:function(Bt,Bu){var Bv,Bw,Bx;Bv=i.tryPick(Bt,Bu);if(Bv.$==0){Bw=d.FailWith("KeyNotFoundException");}else{Bx=Bv.$0;Bw=Bx;}return Bw;},readOnly:function(By){return h.Of(function(){return f.Get(By);});},reduce:function(BA,BB){var BC,BD,BE;BC=f.Get(BB);try{!BC.MoveNext()?d.FailWith("The input sequence was empty"):null;BE=BC.get_Current();while(BC.MoveNext()){BE=(BA(BE))(BC.get_Current());}BD=BE;}finally{BC.Dispose!=undefined?BC.Dispose():null;}return BD;},reduceBack:function(BF,BG){return c.reduceBack(BF,c.ofSeq(BG));},replicate:function(BH,BI){BH<0?j.nonNegative():null;return i.delay(function(){return i.map(function(){return BI;},d.range(0,BH-1));});},rev:function(BL){return i.delay(function(){var BN;BN=i.toArray(BL).slice().reverse();return BN;});},scan:function(BO,BP,BQ){var BR;BR=function(){var BT,BU,BW;BT=f.Get(BQ);BU=function(){return BT.Dispose();};BW=function(BX){var BY,BZ;if(BX.s){if(BT.MoveNext()){BX.c=(BO(BX.get_Current()))(BT.get_Current());BZ=true;}else{BZ=false;}BY=BZ;}else{BX.c=BP;BX.s=true;BY=true;}return BY;};return g.New(false,null,BW,BU);};return h.Of(BR);},scanBack:function(B0,B1,B2){return i.delay(function(){return c.scanBack(B0,c.ofSeq(B1),B2);});},skip:function(B4,B5){return h.Of(function(){var B7;B7=f.Get(B5);return g.New(true,null,function(B8){var B9,B_,B$;if(B8.s){for(B_=1;B_<=B4;B_++){!B7.MoveNext()?j.insufficient():null;}B9=void(B8.s=false);}else{B9=null;}if(B7.MoveNext()){B8.c=B7.get_Current();B$=true;}else{B$=false;}return B$;},function(){return B7.Dispose();});});},skipWhile:function(Cb,Cc){return h.Of(function(){var Ce;Ce=f.Get(Cc);return g.New(true,null,function(Cf){var Cg,Ch,Ci,Cj,Ck,Cl;if(Cf.s){Ch=true;Ci=false;while(Ch){if(Ce.MoveNext()){Cj=!Cb(Ce.get_Current())?Ch=false:null;}else{Ch=false;Cj=Ci=true;}}Cf.s=false;if(Ci){Ck=false;}else{Cf.c=Ce.get_Current();Ck=true;}Cg=Ck;}else{if(Ce.MoveNext()){Cf.c=Ce.get_Current();Cl=true;}else{Cl=false;}Cg=Cl;}return Cg;},function(){return Ce.Dispose();});});},sort:function(Cn){return i.sortBy(function(Co){return Co;},Cn);},sortBy:function(Cp,Cq){return i.delay(function(){var Cs;Cs=c.ofSeq(Cq);c.sortInPlaceBy(Cp,Cs);return Cs;});},sortByDescending:function(Ct,Cu){return i.delay(function(){var Cw;Cw=c.ofSeq(Cu);k.sortInPlaceByDescending(Ct,Cw);return Cw;});},sortDescending:function(Cx){return i.sortByDescending(function(Cy){return Cy;},Cx);},sortWith:function(Cz,CA){return i.delay(function(){var CC;CC=c.ofSeq(CA);c.sortInPlaceWith(Cz,CC);return CC;});},splitInto:function(CD,CE){CD<=0?d.FailWith("Count must be positive"):null;return i.delay(function(){var CG;CG=k.splitInto(CD,c.ofSeq(CE));return CG;});},sum:function(CH){return i.fold(function(CI){return function(CJ){return CI+CJ;};},0,CH);},sumBy:function(CK,CL){return i.fold(function(CM){return function(CN){return CM+CK(CN);};},0,CL);},tail:function(CO){return i.skip(1,CO);},take:function(CP,CQ){CP<0?j.nonNegative():null;return h.Of(function(){var CS;CS=[f.Get(CQ)];return g.New(0,null,function(CT){var CU,CV,CW,CX,CY;CT.s=CT.s+1;if(CT.s>CP){CU=false;}else{CV=CS[0];if(a.Equals(CV,null)){CW=j.insufficient();}else{if(CV.MoveNext()){CT.c=CV.get_Current();if(CT.s===CP){CV.Dispose();CY=void(CS[0]=null);}else{CY=null;}CX=true;}else{CV.Dispose();CS[0]=null;CX=j.insufficient();}CW=CX;}CU=CW;}return CU;},function(){var C0;C0=CS[0];return!a.Equals(C0,null)?C0.Dispose():null;});});},takeWhile:function(C1,C2){return i.delay(function(){return i.enumUsing(f.Get(C2),function(C4){return i.enumWhile(function(){return C4.MoveNext()?C1(C4.get_Current()):false;},i.delay(function(){return[C4.get_Current()];}));});});},toArray:function(C7){var C8,C9,C_,C$;C8=[];C9=f.Get(C7);try{while(C9.MoveNext()){C$=C9.get_Current();C8.push(C$);}}finally{C9.Dispose!=undefined?C9.Dispose():null;}return C8.slice(0);},toList:function(Da){return e.ofSeq(Da);},tryFind:function(Db,Dc){var Dd,De,Df,Dg;Dd=f.Get(Dc);try{Df={$:0};while(Df.$==0?Dd.MoveNext():false){Dg=Dd.get_Current();Db(Dg)?Df={$:1,$0:Dg}:null;}De=Df;}finally{Dd.Dispose!=undefined?Dd.Dispose():null;}return De;},tryFindIndex:function(Dh,Di){var Dj,Dk,Dl,Dm,Dn;Dj=f.Get(Di);try{Dl=true;Dm=0;while(Dl?Dj.MoveNext():false){Dn=Dj.get_Current();Dh(Dn)?Dl=false:Dm=Dm+1;}Dk=Dl?{$:0}:{$:1,$0:Dm};}finally{Dj.Dispose!=undefined?Dj.Dispose():null;}return Dk;},tryPick:function(Do,Dp){var Dq,Dr,Ds;Dq=f.Get(Dp);try{Ds={$:0};while(a.Equals(Ds,{$:0})?Dq.MoveNext():false){Ds=Do(Dq.get_Current());}Dr=Ds;}finally{Dq.Dispose!=undefined?Dq.Dispose():null;}return Dr;},zip:function(Dt,Du){return i.map2(function(Dv){return function(Dw){return[Dv,Dw];};},Dt,Du);},zip3:function(Dx,Dy,Dz){return i.map2(function(DA){return function(DB){var DC,DD;DC=DB[0];DD=DB[1];return[DA,DC,DD];};},Dx,i.zip(Dy,Dz));}},Slice:{array:function(DE,DF,DG){var DH,DI,DJ,DK,DL,DM,DN,DO;DH=[DF,DG];if(DH[0].$==0){if(DH[1].$==1){DK=DH[1].$0;DJ=DE.slice(0,DK+1);}else{DJ=[];}DI=DJ;}else{if(DH[1].$==0){DM=DH[0].$0;DL=DE.slice(DM);}else{DN=DH[1].$0;DO=DH[0].$0;DL=DE.slice(DO,DN+1);}DI=DL;}return DI;},array2D:function(DP,DQ,DR,DS,DT){var DU,DV,DW,DX,DY,DZ,D0,D1,D2,D3,D4,D5,D6,D7;if(DQ.$==1){DW=DQ.$0;DV=DW;}else{DV=0;}DU=DV;if(DS.$==1){DZ=DS.$0;DY=DZ;}else{DY=0;}DX=DY;if(DR.$==1){D2=DR.$0;D1=D2;}else{D1=DP.length-1;}D0=D1;if(DT.$==1){D5=DT.$0;D4=D5;}else{D4=(DP.length?DP[0].length:0)-1;}D3=D4;D6=D0-DU+1;D7=D3-DX+1;return c.sub2D(DP,DU,DX,D6,D7);},array2Dfix1:function(D8,D9,D_,D$){var Ea,Eb,Ec,Ed,Ee,Ef,Eg,Eh,Ei;if(D_.$==1){Ec=D_.$0;Eb=Ec;}else{Eb=0;}Ea=Eb;if(D$.$==1){Ef=D$.$0;Ee=Ef;}else{Ee=(D8.length?D8[0].length:0)-1;}Ed=Ee;Eg=Ed-Ea+1;Eh=b(Eg);for(Ei=0;Ei<=Eg-1;Ei++){c.set(Eh,Ei,c.get2D(D8,D9,Ea+Ei));}return Eh;},array2Dfix2:function(Ej,Ek,El,Em){var En,Eo,Ep,Eq,Er,Es,Et,Eu,Ev;if(Ek.$==1){Ep=Ek.$0;Eo=Ep;}else{Eo=0;}En=Eo;if(El.$==1){Es=El.$0;Er=Es;}else{Er=Ej.length-1;}Eq=Er;Et=Eq-En+1;Eu=b(Et);for(Ev=0;Ev<=Et-1;Ev++){c.set(Eu,Ev,c.get2D(Ej,En+Ev,Em));}return Eu;},setArray:function(Ew,Ex,Ey,Ez){var EA,EB,EC,ED,EE,EF;if(Ex.$==1){EC=Ex.$0;EB=EC;}else{EB=0;}EA=EB;if(Ey.$==1){EF=Ey.$0;EE=EF;}else{EE=Ew.length-1;}ED=EE;return c.setSub(Ew,EA,ED-EA+1,Ez);},setArray2D:function(EG,EH,EI,EJ,EK,EL){var EM,EN,EO,EP,EQ,ER,ES,ET,EU,EV,EW,EX;if(EH.$==1){EO=EH.$0;EN=EO;}else{EN=0;}EM=EN;if(EJ.$==1){ER=EJ.$0;EQ=ER;}else{EQ=0;}EP=EQ;if(EI.$==1){EU=EI.$0;ET=EU;}else{ET=EG.length-1;}ES=ET;if(EK.$==1){EX=EK.$0;EW=EX;}else{EW=(EG.length?EG[0].length:0)-1;}EV=EW;return c.setSub2D(EG,EM,EP,ES-EM+1,EV-EP+1,EL);},setArray2Dfix1:function(EY,EZ,E0,E1,E2){var E3,E4,E5,E6,E7,E8,E9,E_;if(E0.$==1){E5=E0.$0;E4=E5;}else{E4=0;}E3=E4;if(E1.$==1){E8=E1.$0;E7=E8;}else{E7=(EY.length?EY[0].length:0)-1;}E6=E7;E9=E6-E3+1;for(E_=0;E_<=E9-1;E_++){c.set2D(EY,EZ,E3+E_,c.get(E2,E_));}return;},setArray2Dfix2:function(E$,Fa,Fb,Fc,Fd){var Fe,Ff,Fg,Fh,Fi,Fj,Fk,Fl;if(Fa.$==1){Fg=Fa.$0;Ff=Fg;}else{Ff=0;}Fe=Ff;if(Fb.$==1){Fj=Fb.$0;Fi=Fj;}else{Fi=E$.length-1;}Fh=Fi;Fk=Fh-Fe+1;for(Fl=0;Fl<=Fk-1;Fl++){c.set2D(E$,Fe+Fl,Fc,c.get(Fd,Fl));}return;},string:function(Fm,Fn,Fo){var Fp,Fq,Fr,Fs,Ft,Fu,Fv,Fw;Fp=[Fn,Fo];if(Fp[0].$==0){if(Fp[1].$==1){Fs=Fp[1].$0;Fr=Fm.slice(0,Fs+1);}else{Fr="";}Fq=Fr;}else{if(Fp[1].$==0){Fu=Fp[0].$0;Ft=Fm.slice(Fu);}else{Fv=Fp[1].$0;Fw=Fp[0].$0;Ft=Fm.slice(Fw,Fv+1);}Fq=Ft;}return Fq;}},Stack:{Clear:function(Fx){return Fx.splice(0,c.length(Fx));},Contains:function(Fy,Fz){return i.exists(function(FA){return a.Equals(Fz,FA);},Fy);},CopyTo:function(FB,FC,FD){return c.blit(FC,0,FC,FD,c.length(FB));}},Strings:{Compare:function(FE,FF){return d.Compare(FE,FF);},CopyTo:function(FG,FH,FI,FJ,FK){return c.blit(T.ToCharArray(FG),FH,FI,FJ,FK);},EndsWith:function($x,$s){var $0=this,$this=this;return $x.substring($x.length-$s.length)==$s;},Filter:function(FL,FM){var FN,FP;FN=function(FO){return FL(FO)?{$:1,$0:_0.fromCharCode(FO)}:{$:0};};FP=i.choose(FN,FM);return c.ofSeq(FP).join("");},IndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.indexOf($$.String.fromCharCode($c),$i);},Insert:function($x,$index,$s){var $0=this,$this=this;return $x.substring(0,$index-1)+$s+$x.substring($index);},IsNullOrEmpty:function($x){var $0=this,$this=this;return $x==null||$x=="";},IsNullOrWhiteSpace:function($x){var $0=this,$this=this;return $x==null||(/^\s*$/).test($x);},Join:function($sep,$values){var $0=this,$this=this;return $values.join($sep);},LastIndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.lastIndexOf($$.String.fromCharCode($c),$i);},PadLeft:function(FQ,FR){return T.PadLeftWith(FQ,FR,32);},PadLeftWith:function($s,$n,$c){var $0=this,$this=this;return $n>$s.length?$$.Array($n-$s.length+1).join($$.String.fromCharCode($c))+$s:$s;},PadRight:function(FS,FT){return T.PadRightWith(FS,FT,32);},PadRightWith:function($s,$n,$c){var $0=this,$this=this;return $n>$s.length?$s+$$.Array($n-$s.length+1).join($$.String.fromCharCode($c)):$s;},RegexEscape:function($s){var $0=this,$this=this;return $s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");},Remove:function($x,$ix,$ct){var $0=this,$this=this;return $x.substring(0,$ix)+$x.substring($ix+$ct);},Replace:function(FU,FV,FW){var FX;FX=function(FY){var FZ,F0,F1,F2;FZ=FY.indexOf(FV);if(FZ!==-1){F1=T.ReplaceOnce(FY,FV,FW);F2=FZ+FW.length;F0=T.Substring(F1,0,FZ+FW.length)+FX(F1.substring(F2));}else{F0=FY;}return F0;};return FX(FU);},ReplaceChar:function(F3,F4,F5){return T.Replace(F3,_0.fromCharCode(F4),_0.fromCharCode(F5));},ReplaceOnce:function($string,$search,$replace){var $0=this,$this=this;return $string.replace($search,$replace);},Split:function(F6,F7,F8){var F9;F9=T.SplitWith(F6,F7);return F8===1?c.filter(function(F_){return F_!=="";},F9):F9;},SplitChars:function(F$,Ga,Gb){var Gc;Gc="["+T.RegexEscape(_0.fromCharCode.apply(undefined,Ga))+"]";return T.Split(F$,new _1(Gc),Gb);},SplitStrings:function(Gd,Ge,Gf){var Gg;Gg=T.concat("|",c.map(function(Gh){return T.RegexEscape(Gh);},Ge));return T.Split(Gd,new _1(Gg),Gf);},SplitWith:function($str,$pat){var $0=this,$this=this;return $str.split($pat);},StartsWith:function($t,$s){var $0=this,$this=this;return $t.substring(0,$s.length)==$s;},Substring:function($s,$ix,$ct){var $0=this,$this=this;return $s.substr($ix,$ct);},ToCharArray:function(Gi){return c.init(Gi.length,function(Gj){return Gi.charCodeAt(Gj);});},ToCharArrayRange:function(Gk,Gl,Gm){return c.init(Gm,function(Gn){return Gk.charCodeAt(Gl+Gn);});},Trim:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"").replace(/\s+$/,"");},TrimEnd:function($s){var $0=this,$this=this;return $s.replace(/\s+$/,"");},TrimStart:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"");},collect:function(Go,Gp){return c.init(Gp.length,function(Gq){return Go(Gp.charCodeAt(Gq));}).join("");},concat:function(Gr,Gs){return i.toArray(Gs).join(Gr);},exists:function(Gt,Gu){return i.exists(Gt,T.protect(Gu));},forall:function(Gv,Gw){return i.forall(Gv,T.protect(Gw));},init:function(Gx,Gy){return c.init(Gx,Gy).join("");},iter:function(Gz,GA){return i.iter(Gz,T.protect(GA));},iteri:function(GB,GC){return i.iteri(GB,T.protect(GC));},length:function(GD){return T.protect(GD).length;},map:function(GE,GF){return T.collect(function(GG){return _0.fromCharCode(GE(GG));},T.protect(GF));},mapi:function(GH,GI){return i.toArray(i.mapi(function(GJ){return function(GK){return _0.fromCharCode((GH(GJ))(GK));};},GI)).join("");},protect:function(GL){return GL===null?"":GL;},replicate:function(GM,GN){return T.init(GM,function(){return GN;});}},TimeoutException:$.Class({},{New:function(){return $.New(this,L.New1("The operation has timed out."));},New1:function(GP){return $.New(this,u.New1(GP));}}),Unchecked:{Compare:function(GQ,GR){var GS,G2,G3,G4,G5;GS=function(GT){return function(GU){var GV;GV=[0];s.ForEach(GT,function(GW){var GX,GY;if(!GT.hasOwnProperty(GW)){GX=false;}else{if(!GU.hasOwnProperty(GW)){GV[0]=1;GY=true;}else{GV[0]=a.Compare(GT[GW],GU[GW]);GY=GV[0]!==0;}GX=GY;}return GX;});GV[0]===0?s.ForEach(GU,function(GZ){var G0,G1;if(!GU.hasOwnProperty(GZ)){G0=false;}else{if(!GT.hasOwnProperty(GZ)){GV[0]=-1;G1=true;}else{G1=false;}G0=G1;}return G0;}):null;return GV[0];};};if(GQ===GR){G2=0;}else{G3=typeof GQ;if(G3==="function"){G4=d.FailWith("Cannot compare function values.");}else{if(G3==="boolean"){G4=GQ<GR?-1:1;}else{if(G3==="number"){G4=GQ<GR?-1:1;}else{if(G3==="string"){G4=GQ<GR?-1:1;}else{if(G3==="object"){G4=GQ===null?-1:GR===null?1:"CompareTo"in GQ?GQ.CompareTo(GR):(GQ instanceof b?GR instanceof b:false)?a.compareArrays(GQ,GR):(GQ instanceof J?GR instanceof J:false)?a.compareDates(GQ,GR):(GS(GQ))(GR);}else{G5=typeof GR;G4=G5==="undefined"?0:-1;}}}}}G2=G4;}return G2;},Equals:function(G6,G7){var G8,Hc,Hd;G8=function(G9){return function(G_){var G$;G$=[true];s.ForEach(G9,function(Ha){G$[0]=!G9.hasOwnProperty(Ha)?true:G_.hasOwnProperty(Ha)?a.Equals(G9[Ha],G_[Ha]):false;return!G$[0];});G$[0]?s.ForEach(G_,function(Hb){G$[0]=!G_.hasOwnProperty(Hb)?true:G9.hasOwnProperty(Hb);return!G$[0];}):null;return G$[0];};};if(G6===G7){Hc=true;}else{Hd=typeof G6;Hc=Hd==="object"?(((G6===null?true:G6===undefined)?true:G7===null)?true:G7===undefined)?false:"Equals"in G6?G6.Equals(G7):(G6 instanceof b?G7 instanceof b:false)?a.arrayEquals(G6,G7):(G6 instanceof J?G7 instanceof J:false)?a.dateEquals(G6,G7):(G8(G6))(G7):false;}return Hc;},Hash:function(He){var Hf;Hf=typeof He;return Hf==="function"?0:Hf==="boolean"?He?1:0:Hf==="number"?He:Hf==="string"?a.hashString(He):Hf==="object"?He==null?0:He instanceof b?a.hashArray(He):a.hashObject(He):0;},arrayEquals:function(Hg,Hh){var Hi,Hj,Hk;if(c.length(Hg)===c.length(Hh)){Hj=true;Hk=0;while(Hj?Hk<c.length(Hg):false){!a.Equals(c.get(Hg,Hk),c.get(Hh,Hk))?Hj=false:null;Hk=Hk+1;}Hi=Hj;}else{Hi=false;}return Hi;},compareArrays:function(Hl,Hm){var Hn,Ho,Hp,Hq;if(c.length(Hl)<c.length(Hm)){Hn=-1;}else{if(c.length(Hl)>c.length(Hm)){Ho=1;}else{Hp=0;Hq=0;while(Hp===0?Hq<c.length(Hl):false){Hp=a.Compare(c.get(Hl,Hq),c.get(Hm,Hq));Hq=Hq+1;}Ho=Hp;}Hn=Ho;}return Hn;},compareDates:function(Hr,Hs){return d.Compare(Hr.getTime(),Hs.getTime());},dateEquals:function(Ht,Hu){return Ht.getTime()===Hu.getTime();},hashArray:function(Hv){var Hw,Hx;Hw=-34948909;for(Hx=0;Hx<=c.length(Hv)-1;Hx++){Hw=a.hashMix(Hw,a.Hash(c.get(Hv,Hx)));}return Hw;},hashMix:function(Hy,Hz){return(Hy<<5)+Hy+Hz;},hashObject:function(HA){var HB,HC,HF;if("GetHashCode"in HA){HB=HA.GetHashCode();}else{HC=function(HD,HE){return a.hashMix(HD,HE);};HF=[0];s.ForEach(HA,function(HG){HF[0]=HC(HC(HF[0],a.hashString(HG)),a.Hash(HA[HG]));return false;});HB=HF[0];}return HB;},hashString:function(HH){var HI,HJ,HK;if(HH===null){HI=0;}else{HJ=5381;for(HK=0;HK<=HH.length-1;HK++){HJ=a.hashMix(HJ,HH.charCodeAt(HK)<<0);}HI=HJ;}return HI;}},Util:{addListener:function(HL,HM){HL.Subscribe(G.observer(HM));},observer:function(HN){return{OnCompleted:function(){},OnError:function(){},OnNext:HN};},subscribeTo:function(HQ,HR){return HQ.Subscribe(G.observer(HR));}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Unchecked);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Arrays);d=$.Safe($$.WebSharper.Operators);e=$.Safe($$.WebSharper.List);f=$.Safe($$.WebSharper.Enumerator);g=$.Safe(f.T);h=$.Safe($$.WebSharper.Enumerable);i=$.Safe($$.WebSharper.Seq);j=$.Safe($$.Seq);k=$.Safe($$.Arrays);l=$.Safe($$.WebSharper.Ref);m=$.Safe($$.WebSharper.Activator);n=$.Safe($$.document);o=$.Safe($$.jQuery);p=$.Safe($$.WebSharper.Json);q=$.Safe($$.JSON);r=$.Safe($$.WebSharper.JavaScript);s=$.Safe(r.JSModule);t=$.Safe($$.WebSharper.AggregateException);u=$.Safe($$.WebSharper.Exception);v=$.Safe($$.WebSharper.ArgumentException);w=$.Safe($$.Number);x=$.Safe($$.WebSharper.IndexOutOfRangeException);y=$.Safe($$.List);z=$.Safe($$.WebSharper.Arrays2D);A=$.Safe($$.WebSharper.Concurrency);B=$.Safe($$.WebSharper.Option);C=$.Safe($$.clearTimeout);D=$.Safe($$.setTimeout);E=$.Safe($$.WebSharper.CancellationTokenSource);F=$.Safe($$.WebSharper.Char);G=$.Safe($$.WebSharper.Util);H=$.Safe($$.WebSharper.Lazy);I=$.Safe($$.WebSharper.OperationCanceledException);J=$.Safe($$.Date);K=$.Safe($$.console);L=$.Safe($$.WebSharper.TimeoutException);M=$.Safe(A.Scheduler);N=$.Safe($$.WebSharper.HtmlContentExtensions);O=$.Safe(N.SingleNode);P=$.Safe($$.WebSharper.InvalidOperationException);Q=$.Safe(e.T);R=$.Safe($$.WebSharper.MatchFailureException);S=$.Safe($$.Math);T=$.Safe($$.WebSharper.Strings);U=$.Safe($$.WebSharper.PrintfHelpers);V=$.Safe($$.WebSharper.Remoting);W=$.Safe(V.XhrProvider);X=$.Safe($$.WebSharper.AsyncProxy);Y=$.Safe(V.AjaxRemotingProvider);Z=$.Safe($$.window);_0=$.Safe($$.String);return _1=$.Safe($$.RegExp);});$.OnLoad(function(){$.Inherit(t,u);$.Inherit(v,u);$.Inherit(x,u);$.Inherit(P,u);$.Inherit(R,u);$.Inherit(I,u);$.Inherit(L,u);V.EndPoint();V.AjaxProvider();A.scheduler();A.defCTS();A.GetCT();m.Activate();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;$.Define($$,{WebSharper:{Collections:{BalancedTree:{Add:function(D,E){return b.Put(function(){return function(G){return G;};},D,E);},Branch:function(H,I,J){return{Node:H,Left:I,Right:J,Height:1+c.Max(I==null?0:I.Height,J==null?0:J.Height),Count:1+(I==null?0:I.Count)+(J==null?0:J.Count)};},Build:function(K,L,M){var N,O,P,Q,R;N=M-L+1;if(N<=0){O=null;}else{P=(L+M)/2>>0;Q=b.Build(K,L,P-1);R=b.Build(K,P+1,M);O=b.Branch(d.get(K,P),Q,R);}return O;},Contains:function(S,T){return!((b.Lookup(S,T))[0]==null);},Enumerate:function(U,V){var W;W=function(X){var Y,Z,_0,_1,_2,_3,_4;Y=X[0];Z=X[1];if(Y==null){if(Z.$==1){_2=Z.$0[0];_3=Z.$1;_4=Z.$0[1];_1={$:1,$0:[_2,[_4,_3]]};}else{_1={$:0};}_0=_1;}else{_0=U?W([Y.Right,$.New(g,{$:1,$0:[Y.Node,Y.Left],$1:Z})]):W([Y.Left,$.New(g,{$:1,$0:[Y.Node,Y.Right],$1:Z})]);}return _0;};return e.unfold(W,[V,$.New(g,{$:0})]);},Lookup:function(_5,_6){var _7,_8,_9,_,ba,bb;_7=[];_8=_6;_9=true;while(_9){if(_8==null){_=_9=false;}else{ba=c.Compare(_5,_8.Node);if(ba===0){bb=_9=false;}else{if(ba===1){_7.unshift([true,_8.Node,_8.Left]);bb=_8=_8.Right;}else{_7.unshift([false,_8.Node,_8.Right]);bb=_8=_8.Left;}}_=bb;}}return[_8,_7];},OfSeq:function(bb){var bc;bc=d.sort(h.toArray(e.distinct(bb)));return b.Build(bc,0,bc.length-1);},Put:function(bd,be,bf){var bg,bh,bi;bg=b.Lookup(be,bf);bh=bg[0];bi=bg[1];return bh==null?b.Rebuild(bi,b.Branch(be,null,null)):b.Rebuild(bi,b.Branch((bd(bh.Node))(be),bh.Left,bh.Right));},Rebuild:function(bj,bk){var bl,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA;bl=function(bm){return bm==null?0:bm.Height;};bn=bk;for(bo=0;bo<=d.length(bj)-1;bo++){bp=d.get(bj,bo);if(bp[0]){br=bp[1];bs=bp[2];if(bl(bn)>bl(bs)+1){if(bl(bn.Left)===bl(bn.Right)+1){bv=bn.Left;bu=b.Branch(bv.Node,b.Branch(br,bs,bv.Left),b.Branch(bn.Node,bv.Right,bn.Right));}else{bu=b.Branch(bn.Node,b.Branch(br,bs,bn.Left),bn.Right);}bt=bu;}else{bt=b.Branch(br,bs,bn);}bq=bt;}else{bw=bp[1];bx=bp[2];if(bl(bn)>bl(bx)+1){if(bl(bn.Right)===bl(bn.Left)+1){bA=bn.Right;bz=b.Branch(bA.Node,b.Branch(bn.Node,bn.Left,bA.Left),b.Branch(bw,bA.Right,bx));}else{bz=b.Branch(bn.Node,bn.Left,b.Branch(bw,bn.Right,bx));}by=bz;}else{by=b.Branch(bw,bn,bx);}bq=by;}bn=bq;}return bn;},Remove:function(bB,bC){var bD,bE,bF,bG,bH,bI,bJ,bK,bL;bD=b.Lookup(bB,bC);bE=bD[0];bF=bD[1];if(bE==null){bG=bC;}else{if(bE.Right==null){bH=b.Rebuild(bF,bE.Left);}else{if(bE.Left==null){bI=b.Rebuild(bF,bE.Right);}else{bJ=h.append(b.Enumerate(false,bE.Left),b.Enumerate(false,bE.Right));bK=h.toArray(bJ);bL=b.Build(bK,0,bK.length-1);bI=b.Rebuild(bF,bL);}bH=bI;}bG=bH;}return bG;},TryFind:function(bM,bN){var bO;bO=(b.Lookup(bM,bN))[0];return bO==null?{$:0}:{$:1,$0:bO.Node};}},Dictionary:$.Class({Add:function(bP,bQ){var bR,bS;bR=this.hash.call(null,bP);if(this.data.hasOwnProperty(bR)){bS=c.FailWith("An item with the same key has already been added.");}else{this.data[bR]={K:bP,V:bQ};bS=void(this.count=this.count+1);}return bS;},Clear:function(){this.data={};this.count=0;return;},ContainsKey:function(bT){return this.data.hasOwnProperty(this.hash.call(null,bT));},GetEnumerator:function(){var bU;bU=j.GetFieldValues(this.data);return k.Get(bU);},Remove:function(bV){var bW,bX;bW=this.hash.call(null,bV);if(this.data.hasOwnProperty(bW)){j.Delete(this.data,bW);this.count=this.count-1;bX=true;}else{bX=false;}return bX;},get_Item:function(bY){var bZ,b0,b1;bZ=this.hash.call(null,bY);if(this.data.hasOwnProperty(bZ)){b1=this.data[bZ];b0=b1.V;}else{b0=l.notPresent();}return b0;},set_Item:function(b2,b3){var b4;b4=this.hash.call(null,b2);!this.data.hasOwnProperty(b4)?void(this.count=this.count+1):null;this.data[b4]={K:b2,V:b3};return;}},{New:function(b5){return $.New(this,m.New4(b5,function(b6){return function(b7){return n.Equals(b6,b7);};},function(b8){return n.Hash(b8);}));},New1:function(b9,b_){return $.New(this,m.New4(b9,function(b$){return function(ca){return b_.Equals(b$,ca);};},function(cb){return b_.GetHashCode(cb);}));},New11:function(cc,cd){return $.New(this,m.New3(cd));},New12:function(){return $.New(this,m.New4([],function(ce){return function(cf){return n.Equals(ce,cf);};},function(cg){return n.Hash(cg);}));},New2:function(){return $.New(this,m.New12());},New3:function(ci){return $.New(this,m.New4([],function(cj){return function(ck){return ci.Equals(cj,ck);};},function(cl){return ci.GetHashCode(cl);}));},New4:function(cm,cn,co){var cp,cq,cr,cs,ct;cp=$.New(this,{});cp.hash=co;cp.count=0;cp.data={};cq=k.Get(cm);try{while(cq.MoveNext()){cs=cq.get_Current();ct=cs.K;cp.data[cp.hash.call(null,ct)]=cs.V;}}finally{cq.Dispose!=undefined?cq.Dispose():null;}return cp;}}),DictionaryUtil:{notPresent:function(){return c.FailWith("The given key was not present in the dictionary.");}},FSharpMap:$.Class({Add:function(cu,cv){var cw,cx;cw=this.tree;cx=$.New(p,{Key:cu,Value:cv});return o.New(b.Add(cx,cw));},CompareTo:function(cy){return e.compareWith(function(cz){return function(cA){return c.Compare(cz,cA);};},this,cy);},ContainsKey:function(cB){var cC,cD;cC=this.tree;cD=$.New(p,{Key:cB,Value:undefined});return b.Contains(cD,cC);},Equals:function(cE){return this.get_Count()===cE.get_Count()?h.forall2(function(cF){return function(cG){return n.Equals(cF,cG);};},this,cE):false;},GetEnumerator:function(){var cH,cJ,cK;cH=function(cI){return{K:cI.Key,V:cI.Value};};cJ=b.Enumerate(false,this.tree);cK=h.map(cH,cJ);return k.Get(cK);},GetHashCode:function(){return n.Hash(h.toArray(this));},Remove:function(cL){var cM,cN;cM=this.tree;cN=$.New(p,{Key:cL,Value:undefined});return o.New(b.Remove(cN,cM));},TryFind:function(cO){var cP,cQ,cR,cT;cP=this.tree;cQ=$.New(p,{Key:cO,Value:undefined});cR=function(cS){return cS.Value;};cT=b.TryFind(cQ,cP);return q.map(cR,cT);},get_Count:function(){var cU;cU=this.tree;return cU==null?0:cU.Count;},get_IsEmpty:function(){return this.tree==null;},get_Item:function(cV){var cW,cX,cY;cW=this.TryFind(cV);if(cW.$==0){cX=c.FailWith("The given key was not present in the dictionary.");}else{cY=cW.$0;cX=cY;}return cX;},get_Tree:function(){return this.tree;}},{New:function(cZ){var c0;c0=$.New(this,{});c0.tree=cZ;return c0;},New1:function(c1){return $.New(this,o.New(r.fromSeq(c1)));}}),FSharpSet:$.Class({Add:function(c2){return s.New1(b.Add(c2,this.tree));},CompareTo:function(c3){return e.compareWith(function(c4){return function(c5){return c.Compare(c4,c5);};},this,c3);},Contains:function(c6){return b.Contains(c6,this.tree);},Equals:function(c7){return this.get_Count()===c7.get_Count()?h.forall2(function(c8){return function(c9){return n.Equals(c8,c9);};},this,c7):false;},GetEnumerator:function(){return k.Get(b.Enumerate(false,this.tree));},GetHashCode:function(){return-1741749453+n.Hash(h.toArray(this));},IsProperSubsetOf:function(c_){return this.IsSubsetOf(c_)?this.get_Count()<c_.get_Count():false;},IsProperSupersetOf:function(c$){return this.IsSupersetOf(c$)?this.get_Count()>c$.get_Count():false;},IsSubsetOf:function(da){return h.forall(function(db){return da.Contains(db);},this);},IsSupersetOf:function(dc){var de=this;return h.forall(function(dd){return de.Contains(dd);},dc);},Remove:function(df){return s.New1(b.Remove(df,this.tree));},add:function(dg){return s.New1(b.OfSeq(h.append(this,dg)));},get_Count:function(){var dh;dh=this.tree;return dh==null?0:dh.Count;},get_IsEmpty:function(){return this.tree==null;},get_MaximumElement:function(){return h.head(b.Enumerate(true,this.tree));},get_MinimumElement:function(){return h.head(b.Enumerate(false,this.tree));},get_Tree:function(){return this.tree;},sub:function(di){return t.Filter(function(dj){return!di.Contains(dj);},this);}},{New:function(dk){return $.New(this,s.New1(u.ofSeq(dk)));},New1:function(dl){var dm;dm=$.New(this,{});dm.tree=dl;return dm;}}),HashSetProxy:$.Class({Add:function(dn){return this.add(dn);},Clear:function(){this.data=v.prototype.constructor.apply(v,[]);this.count=0;return;},Contains:function(_do){var dp;dp=this.data[this.hash.call(null,_do)];return dp==null?false:this.arrContains(_do,dp);},CopyTo:function(dq){var dr,ds,dt;dr=0;ds=w.concat(this.data);for(dt=0;dt<=ds.length-1;dt++){d.set(dq,dt,ds[dt]);}return;},ExceptWith:function(du){var dv,dw,dx,dy;dv=k.Get(du);try{while(dv.MoveNext()){dx=dv.get_Current();dy=this.Remove(dx);}}finally{dv.Dispose!=undefined?dv.Dispose():null;}return dw;},GetEnumerator:function(){return k.Get(w.concat(this.data));},IntersectWith:function(dz){var dA,dB,dC,dD,dE,dF,dG;dA=x.New3(dz,this.equals,this.hash);dB=w.concat(this.data);for(dC=0;dC<=dB.length-1;dC++){dD=dB[dC];dE=dA.Contains(dD);if(!dE){dG=this.Remove(dD);dF=void dG;}else{dF=null;}}return;},IsProperSubsetOf:function(dH){var dI;dI=d.ofSeq(dH);return this.count<d.length(dI)?this.IsSubsetOf(dI):false;},IsProperSupersetOf:function(dJ){var dK;dK=d.ofSeq(dJ);return this.count>d.length(dK)?this.IsSupersetOf(dK):false;},IsSubsetOf:function(dL){var dM,dN,dP;dM=x.New3(dL,this.equals,this.hash);dN=function(dO){return dM.Contains(dO);};dP=w.concat(this.data);return h.forall(dN,dP);},IsSupersetOf:function(dQ){var dR,dT=this;dR=function(dS){return dT.Contains(dS);};return h.forall(dR,dQ);},Overlaps:function(dU){var dV,dX=this;dV=function(dW){return dX.Contains(dW);};return h.exists(dV,dU);},Remove:function(dY){var dZ,d0,d1,d2;dZ=this.hash.call(null,dY);d0=this.data[dZ];if(d0==null){d1=false;}else{if(this.arrRemove(dY,d0)){this.count=this.count-1;d2=true;}else{d2=false;}d1=d2;}return d1;},RemoveWhere:function(d3){var d4,d5,d6,d7,d8;d4=w.concat(this.data);for(d5=0;d5<=d4.length-1;d5++){d6=d4[d5];if(d3(d6)){d8=this.Remove(d6);d7=void d8;}else{d7=null;}}return;},SetEquals:function(d9){var d_;d_=x.New3(d9,this.equals,this.hash);return this.get_Count()===d_.get_Count()?this.IsSupersetOf(d_):false;},SymmetricExceptWith:function(d$){var ea,eb,ec,ed,ee,ef;ea=k.Get(d$);try{while(ea.MoveNext()){ec=ea.get_Current();if(this.Contains(ec)){ee=this.Remove(ec);ed=void ee;}else{ef=this.Add(ec);ed=void ef;}}}finally{ea.Dispose!=undefined?ea.Dispose():null;}return eb;},UnionWith:function(eg){var eh,ei,ej,ek;eh=k.Get(eg);try{while(eh.MoveNext()){ej=eh.get_Current();ek=this.Add(ej);}}finally{eh.Dispose!=undefined?eh.Dispose():null;}return ei;},add:function(el){var em,en,eo,ep,eq;em=this.hash.call(null,el);en=this.data[em];if(en==null){this.data[em]=[el];this.count=this.count+1;eo=true;}else{if(this.arrContains(el,en)){ep=false;}else{eq=en.push(el);this.count=this.count+1;ep=true;}eo=ep;}return eo;},arrContains:function(er,es){var et,eu,ev;et=true;eu=0;ev=es.length;while(et?eu<ev:false){(this.equals.call(null,es[eu]))(er)?et=false:eu=eu+1;}return!et;},arrRemove:function(ew,ex){var ey,ez,eA,eB,eC,eD,eE;ey=true;ez=0;eA=ex.length;while(ey?ez<eA:false){if((this.equals.call(null,ex[ez]))(ew)){eC=ez;eD=[];eE=ex.splice.apply(ex,[eC,1].concat(eD));eB=ey=false;}else{eB=ez=ez+1;}}return!ey;},get_Count:function(){return this.count;}},{New:function(eF){return $.New(this,x.New3(eF,function(eG){return function(eH){return n.Equals(eG,eH);};},function(eI){return n.Hash(eI);}));},New1:function(eJ){return $.New(this,x.New3(h.empty(),function(eK){return function(eL){return eJ.Equals(eK,eL);};},function(eM){return eJ.GetHashCode(eM);}));},New11:function(){return $.New(this,x.New3(h.empty(),function(eN){return function(eO){return n.Equals(eN,eO);};},function(eP){return n.Hash(eP);}));},New2:function(eQ,eR){return $.New(this,x.New3(eQ,function(eS){return function(eT){return eR.Equals(eS,eT);};},function(eU){return eR.GetHashCode(eU);}));},New3:function(eV,eW,eX){var eY,eZ,e0,e1,e2;eY=$.New(this,{});eY.equals=eW;eY.hash=eX;eY.data=v.prototype.constructor.apply(v,[]);eY.count=0;eZ=k.Get(eV);try{while(eZ.MoveNext()){e1=eZ.get_Current();e2=eY.add(e1);}}finally{eZ.Dispose!=undefined?eZ.Dispose():null;}return eY;}}),HashSetUtil:{concat:function($o){var $0=this,$this=this;var r=[];for(var k in $o){r.push.apply(r,$o[k]);};return r;}},LinkedList:{E:$.Class({Dispose:function(){return null;},MoveNext:function(){this.c=this.c.n;return!n.Equals(this.c,null);},get_Current:function(){return this.c.v;}},{New:function(e3){var e4;e4=$.New(this,{});e4.c=e3;return e4;}}),T:$.Class({AddAfter:function(e5,e6){var e7,e8,e9;e7=e5.n;e8={p:e5,n:e7,v:e6};n.Equals(e5.n,null)?void(this.p=e8):null;e5.n=e8;if(!n.Equals(e7,null)){e7.p=e8;e9=e8;}else{e9=null;}this.c=this.c+1;return e8;},AddBefore:function(e_,e$){var fa,fb,fc;fa=e_.p;fb={p:fa,n:e_,v:e$};n.Equals(e_.p,null)?void(this.n=fb):null;e_.p=fb;if(!n.Equals(fa,null)){fa.n=fb;fc=fb;}else{fc=null;}this.c=this.c+1;return fb;},AddFirst:function(fd){var fe,ff;if(this.c===0){ff={p:null,n:null,v:fd};this.n=ff;this.p=this.n;this.c=1;fe=ff;}else{fe=this.AddBefore(this.n,fd);}return fe;},AddLast:function(fg){var fh,fi;if(this.c===0){fi={p:null,n:null,v:fg};this.n=fi;this.p=this.n;this.c=1;fh=fi;}else{fh=this.AddAfter(this.p,fg);}return fh;},Clear:function(){this.c=0;this.n=null;this.p=null;return;},Contains:function(fj){var fk,fl;fk=false;fl=this.n;while(!n.Equals(fl,null)?!fk:false){fl.v==fj?fk=true:fl=fl.n;}return fk;},Find:function(fm){var fn,fo;fn=this.n;fo=true;while(fo?!n.Equals(fn,null):false){fn.v==fm?fo=false:fn=fn.n;}return fo?null:fn;},FindLast:function(fp){var fq,fr;fq=this.p;fr=true;while(fr?!n.Equals(fq,null):false){fq.v==fp?fr=false:fq=fq.p;}return fr?null:fq;},GetEnumerator:function(){return z.New(this);},Remove:function(fs){var ft,fu,fv,fw;ft=fs.p;fu=fs.n;if(n.Equals(ft,null)){fv=void(this.n=fu);}else{ft.n=fu;fv=fu;}if(n.Equals(fu,null)){fw=void(this.p=ft);}else{fu.p=ft;fw=ft;}this.c=this.c-1;return;},Remove1:function(fx){var fy,fz;fy=this.Find(fx);if(n.Equals(fy,null)){fz=false;}else{this.Remove(fy);fz=true;}return fz;},RemoveFirst:function(){return this.Remove(this.n);},RemoveLast:function(){return this.Remove(this.p);},get_Count:function(){return this.c;},get_First:function(){return this.n;},get_Last:function(){return this.p;}},{New:function(){return $.New(this,A.New1(h.empty()));},New1:function(fA){var fB,fC,fD,fE;fB=$.New(this,{});fB.c=0;fB.n=null;fB.p=null;fC=k.Get(fA);if(fC.MoveNext()){fB.n={p:null,n:null,v:fC.get_Current()};fB.p=fB.n;fD=void(fB.c=1);}else{fD=null;}while(fC.MoveNext()){fE={p:fB.p,n:null,v:fC.get_Current()};fB.p.n=fE;fB.p=fE;fB.c=fB.c+1;}return fB;}})},MapModule:{Exists:function(fF,fG){var fH;fH=function(fI){return(fF(fI.K))(fI.V);};return h.exists(fH,fG);},Filter:function(fJ,fK){var fL,fN,fO,fP,fQ;fL=function(fM){return(fJ(fM.Key))(fM.Value);};fN=b.Enumerate(false,fK.get_Tree());fO=h.filter(fL,fN);fP=h.toArray(fO);fQ=b.Build(fP,0,fP.length-1);return o.New(fQ);},FindKey:function(fR,fS){var fT;fT=function(fU){return(fR(fU.K))(fU.V)?{$:1,$0:fU.K}:{$:0};};return h.pick(fT,fS);},Fold:function(fV,fW,fX){var fY,f1;fY=function(fZ){return function(f0){return((fV(fZ))(f0.Key))(f0.Value);};};f1=b.Enumerate(false,fX.get_Tree());return h.fold(fY,fW,f1);},FoldBack:function(f2,f3,f4){var f5,f8;f5=function(f6){return function(f7){return((f2(f7.Key))(f7.Value))(f6);};};f8=b.Enumerate(true,f3.get_Tree());return h.fold(f5,f4,f8);},ForAll:function(f9,f_){var f$;f$=function(ga){return(f9(ga.K))(ga.V);};return h.forall(f$,f_);},Iterate:function(gb,gc){var gd;gd=function(ge){return(gb(ge.K))(ge.V);};return h.iter(gd,gc);},Map:function(gf,gg){var gh,gj,gk,gl;gh=function(gi){return $.New(p,{Key:gi.Key,Value:(gf(gi.Key))(gi.Value)});};gj=b.Enumerate(false,gg.get_Tree());gk=h.map(gh,gj);gl=b.OfSeq(gk);return o.New(gl);},OfArray:function(gm){var gn,gr,gs;gn=function(go){var gp,gq;gp=go[0];gq=go[1];return $.New(p,{Key:gp,Value:gq});};gr=h.map(gn,gm);gs=b.OfSeq(gr);return o.New(gs);},Partition:function(gt,gu){var gv,gx,gy,gz,gA;gv=function(gw){return(gt(gw.Key))(gw.Value);};gx=h.toArray(b.Enumerate(false,gu.get_Tree()));gy=d.partition(gv,gx);gz=gy[1];gA=gy[0];return[o.New(b.Build(gA,0,gA.length-1)),o.New(b.Build(gz,0,gz.length-1))];},Pick:function(gB,gC){var gD;gD=function(gE){return(gB(gE.K))(gE.V);};return h.pick(gD,gC);},ToSeq:function(gF){var gG,gI;gG=function(gH){return[gH.Key,gH.Value];};gI=b.Enumerate(false,gF.get_Tree());return h.map(gG,gI);},TryFind:function(gJ,gK){return gK.TryFind(gJ);},TryFindKey:function(gL,gM){var gN;gN=function(gO){return(gL(gO.K))(gO.V)?{$:1,$0:gO.K}:{$:0};};return h.tryPick(gN,gM);},TryPick:function(gP,gQ){var gR;gR=function(gS){return(gP(gS.K))(gS.V);};return h.tryPick(gR,gQ);}},MapUtil:{fromSeq:function(gT){var gU;gU=h.toArray(h.delay(function(){return h.collect(function(gW){var gX,gY;gX=gW[1];gY=gW[0];return[$.New(p,{Key:gY,Value:gX})];},e.distinctBy(function(gZ){return gZ[0];},gT));}));d.sortInPlace(gU);return b.Build(gU,0,gU.length-1);}},Pair:$.Class({CompareTo:function(g0){return c.Compare(this.Key,g0.Key);},Equals:function(g1){return n.Equals(this.Key,g1.Key);},GetHashCode:function(){return n.Hash(this.Key);}}),ResizeArray:{ResizeArrayProxy:$.Class({Add:function(g2){return this.arr.push(g2);},AddRange:function(g3){var g5=this;return h.iter(function(g4){return g5.Add(g4);},g3);},Clear:function(){var g6;g6=B.splice(this.arr,0,d.length(this.arr),[]);return;},CopyTo:function(g7){return this.CopyTo1(g7,0);},CopyTo1:function(g8,g9){return this.CopyTo2(0,g8,g9,this.get_Count());},CopyTo2:function(g_,g$,ha,hb){return d.blit(this.arr,g_,g$,ha,hb);},GetEnumerator:function(){return k.Get(this.arr);},GetRange:function(hc,hd){return C.New11(d.sub(this.arr,hc,hd));},Insert:function(he,hf){var hg;hg=B.splice(this.arr,he,0,[hf]);return;},InsertRange:function(hh,hi){var hj;hj=B.splice(this.arr,hh,0,h.toArray(hi));return;},RemoveAt:function(hk){var hl;hl=B.splice(this.arr,hk,1,[]);return;},RemoveRange:function(hm,hn){var ho;ho=B.splice(this.arr,hm,hn,[]);return;},Reverse:function(){return this.arr.reverse();},Reverse1:function(hp,hq){return d.reverse(this.arr,hp,hq);},ToArray:function(){return this.arr.slice();},get_Count:function(){return d.length(this.arr);},get_Item:function(hr){return d.get(this.arr,hr);},set_Item:function(hs,ht){return d.set(this.arr,hs,ht);}},{New:function(hu){return $.New(this,C.New11(h.toArray(hu)));},New1:function(){return $.New(this,C.New11([]));},New11:function(hw){var hx;hx=$.New(this,{});hx.arr=hw;return hx;},New2:function(){return $.New(this,C.New11([]));}}),splice:function($arr,$index,$howMany,$items){var $0=this,$this=this;return $$.Array.prototype.splice.apply($arr,[$index,$howMany].concat($items));}},SetModule:{Filter:function(hy,hz){var hA;hA=h.toArray(h.filter(hy,hz));return s.New1(b.Build(hA,0,hA.length-1));},FoldBack:function(hB,hC,hD){return h.fold(function(hE){return function(hF){return(hB(hF))(hE);};},hD,b.Enumerate(true,hC.get_Tree()));},Partition:function(hG,hH){var hI,hJ,hK;hI=d.partition(hG,h.toArray(hH));hJ=hI[1];hK=hI[0];return[s.New1(b.OfSeq(hK)),s.New1(b.OfSeq(hJ))];}},SetUtil:{ofSeq:function(hL){var hM;hM=h.toArray(hL);d.sortInPlace(hM);return b.Build(hM,0,hM.length-1);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Collections);b=$.Safe(a.BalancedTree);c=$.Safe($$.WebSharper.Operators);d=$.Safe($$.WebSharper.Arrays);e=$.Safe($$.Seq);f=$.Safe($$.WebSharper.List);g=$.Safe(f.T);h=$.Safe($$.WebSharper.Seq);i=$.Safe($$.WebSharper.JavaScript);j=$.Safe(i.JSModule);k=$.Safe($$.WebSharper.Enumerator);l=$.Safe(a.DictionaryUtil);m=$.Safe(a.Dictionary);n=$.Safe($$.WebSharper.Unchecked);o=$.Safe(a.FSharpMap);p=$.Safe(a.Pair);q=$.Safe($$.WebSharper.Option);r=$.Safe(a.MapUtil);s=$.Safe(a.FSharpSet);t=$.Safe(a.SetModule);u=$.Safe(a.SetUtil);v=$.Safe($$.Array);w=$.Safe(a.HashSetUtil);x=$.Safe(a.HashSetProxy);y=$.Safe(a.LinkedList);z=$.Safe(y.E);A=$.Safe(y.T);B=$.Safe(a.ResizeArray);return C=$.Safe(B.ResizeArrayProxy);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;$.Define($$,{WebSharper:{Json:{Internals:{Provider:$.Field(function(){return b.New();})},Provider:$.Class({DecodeArray:function(t){return this.EncodeArray(t);},DecodeDateTime:function(){return function(){return function(v){return(new c(v)).getTime();};};},DecodeList:function(w){return function(){return function(y){var z;z=w(null);return d.init(e.length(y),function(A){return z(e.get(y,A));});};};},DecodeRecord:function(B,C){return function(){return function(E){var F,G;F=B===undefined?{}:new B();G=function(H){var I,J,K;I=H[0];J=H[1];K=H[2];return f.Equals(K,0)?void(F[I]=(J(null))(E[I])):f.Equals(K,1)?void(F[I]=E.hasOwnProperty(I)?{$:1,$0:(J(null))(E[I])}:{$:0}):f.Equals(K,2)?E.hasOwnProperty(I)?void(F[I]=(J(null))(E[I])):null:g.FailWith("Invalid field option kind");};e.iter(G,C);return F;};};},DecodeSet:function(L){return function(){return function(N){var O;O=L(null);return i.New1(j.OfSeq(e.map(O,N)));};};},DecodeStringDictionary:function(P){return function(){return function(R){var S;S=k.New12();P(null);m.ForEach(R,function(T){S.set_Item(T,R[T]);return false;});return S;};};},DecodeStringMap:function(U){return function(){return function(W){var X;X=[n.New1([])];U(null);m.ForEach(W,function(Y){X[0]=X[0].Add(Y,W[Y]);return false;});return X[0];};};},DecodeTuple:function(Z){return this.EncodeTuple(Z);},DecodeUnion:function(_0,_1,_2){return function(){return function(_4){var _5,_6,_7,_8,_9,_,bc,bf,bg,bh;if(typeof _4==="object"){_6=_0===undefined?{}:new _0();if(f.Equals(typeof _1,"string")){_9=_4[_1];_=function(ba){var bb;bb=ba[0];ba[1];return bb===_9;};_8=e.findINdex(_,_2);}else{bc=[undefined];m.ForEach(_1,function(bd){var be;if(_4.hasOwnProperty(bd)){bc[0]=_1[bd];be=true;}else{be=false;}return be;});_8=bc[0];}_7=_8;_6.$=_7;bf=e.get(_2,_7);bg=bf[1];bh=function(bi){var bj,bk,bl,bm;bj=bi[0];bk=bi[1];bl=bi[2];bm=bi[3];return bj===null?void(_6.$0=(bl(null))(_4)):f.Equals(bm,0)?void(_6[bj]=(bl(null))(_4[bk])):f.Equals(bm,1)?void(_6[bj]=_4.hasOwnProperty(bk)?{$:1,$0:(bl(null))(_4[bk])}:{$:0}):g.FailWith("Invalid field option kind");};e.iter(bh,bg);_5=_6;}else{_5=_4;}return _5;};};},EncodeArray:function(bm){return function(){return function(bo){var bp;bp=bm(null);return e.map(bp,bo);};};},EncodeDateTime:function(){return function(){return function(br){return(new c(br)).toISOString();};};},EncodeList:function(bs){return function(){return function(bu){var bv,bw,bx;bv=[];bw=bs(null);bx=function(by){var bz;bz=bv.push(bw(by));return;};o.iter(bx,bu);return bv;};};},EncodeRecord:function(bA,bB){return function(){return function(bD){var bE,bF;bE={};bF=function(bG){var bH,bI,bJ,bK,bL,bM,bN;bH=bG[0];bI=bG[1];bJ=bG[2];if(f.Equals(bJ,0)){bK=void(bE[bH]=(bI(null))(bD[bH]));}else{if(f.Equals(bJ,1)){bL=bD[bH];if(bL.$==0){bM=null;}else{bN=bL.$0;bM=void(bE[bH]=(bI(null))(bN));}bK=bM;}else{bK=f.Equals(bJ,2)?bD.hasOwnProperty(bH)?void(bE[bH]=(bI(null))(bD[bH])):null:g.FailWith("Invalid field option kind");}}return bK;};e.iter(bF,bB);return bE;};};},EncodeSet:function(bO){return function(){return function(bQ){var bR,bS,bT;bR=[];bS=bO(null);bT=function(bU){var bV;bV=bR.push(bS(bU));return;};o.iter(bT,bQ);return bR;};};},EncodeStringDictionary:function(bW){return function(){return function(bY){var bZ,b0,b1,b2,b3,b4,b5,b6;bZ={};b0=bW(null);b1=p.Get(bY);try{while(b1.MoveNext()){b3=b1.get_Current();b4=g.KeyValue(b3);b5=b4[1];b6=b4[0];bZ[b6]=b0(b5);}}finally{b1.Dispose!=undefined?b1.Dispose():null;}return bZ;};};},EncodeStringMap:function(b7){return function(){return function(b9){var b_,b$,ca;b_={};b$=b7(null);ca=function(cb){return function(cc){b_[cb]=b$(cc);};};q.Iterate(ca,b9);return b_;};};},EncodeTuple:function(cd){return function(){return function(cf){return e.map2(function(cg){return function(ch){return(cg(null))(ch);};},cd,cf);};};},EncodeUnion:function(ci,cj,ck){return function(){return function(cm){var cn,co,cp,cq,cr,cs,ct;if(typeof cm==="object"){co={};cp=cm.$;cq=e.get(ck,cp);cr=cq[0];cs=cq[1];f.Equals(typeof cj,"string")?void(co[cj]=cr):null;ct=function(cu){var cv,cw,cx,cy,cz,cA,cC,cD,cE,cF;cv=cu[0];cw=cu[1];cx=cu[2];cy=cu[3];if(cv===null){cA=(cx(null))(cm.$0);cz=m.ForEach(cA,function(cB){co[cB]=cA[cB];return false;});}else{if(f.Equals(cy,0)){cC=void(co[cw]=(cx(null))(cm[cv]));}else{if(f.Equals(cy,1)){cD=cm[cv];if(cD.$==0){cE=null;}else{cF=cD.$0;cE=void(co[cw]=(cx(null))(cF));}cC=cE;}else{cC=g.FailWith("Invalid field option kind");}}cz=cC;}return cz;};e.iter(ct,cs);cn=co;}else{cn=cm;}return cn;};};}},{Id:function(){return function(cG){return cG;};},New:function(){return $.New(this,{});},get_Default:function(){return r.Provider();}})},Web:{InlineControl:$.Class({get_Body:function(){var cH;cH=e.fold(function(cI){return function(cJ){return cI[cJ];};},s,this.funcName);return cH.apply(null,this.args);}})}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Json);b=$.Safe(a.Provider);c=$.Safe($$.Date);d=$.Safe($$.WebSharper.List);e=$.Safe($$.WebSharper.Arrays);f=$.Safe($$.WebSharper.Unchecked);g=$.Safe($$.WebSharper.Operators);h=$.Safe($$.WebSharper.Collections);i=$.Safe(h.FSharpSet);j=$.Safe(h.BalancedTree);k=$.Safe(h.Dictionary);l=$.Safe($$.WebSharper.JavaScript);m=$.Safe(l.JSModule);n=$.Safe(h.FSharpMap);o=$.Safe($$.WebSharper.Seq);p=$.Safe($$.WebSharper.Enumerator);q=$.Safe(h.MapModule);r=$.Safe(a.Internals);return s=$.Safe($$.window);});$.OnLoad(function(){r.Provider();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv;$.Define($$,{WebSharper:{UI:{Next:{Abbrev:{Async:{Schedule:function(bw){var bx;bx=a.Delay(function(){return a.Return(bw(null));});return a.Start(bx,{$:0});},StartTo:function(by,bz){return a.StartWithContinuations(by,bz,function(){},function(){},{$:0});}},Dict:{ToKeyArray:function(bC){var bD,bE;bD=b(bC.count);bE=function(bF){return function(bG){return c.set(bD,bF,bG.K);};};d.iteri(bE,bC);return bD;},ToValueArray:function(bH){var bI,bJ;bI=b(bH.count);bJ=function(bK){return function(bL){return c.set(bI,bK,bL.V);};};d.iteri(bJ,bH);return bI;}},Fresh:{Id:function(){var bM;bM=h.counter()+1;h.counter=function(){return bM;};return"uid"+$$.String(h.counter());},Int:function(){var bN;bN=h.counter()+1;h.counter=function(){return bN;};return h.counter();},counter:$.Field(function(){return 0;})},HashSet:{Except:function(bO,bP){var bQ;bQ=j.New(k.ToArray(bP));bQ.ExceptWith(k.ToArray(bO));return bQ;},Filter:function(bR,bS){var bT;bT=k.ToArray(bS);return j.New(c.filter(bR,bT));},Intersect:function(bU,bV){var bW;bW=j.New(k.ToArray(bU));bW.IntersectWith(k.ToArray(bV));return bW;},ToArray:function(bX){var bY;bY=b(bX.get_Count());bX.CopyTo(bY);return bY;}},Mailbox:{StartProcessor:function(bZ){var b0,b1,b2,b9,ca;b0=[];b1=[false];b2=a.Delay(function(){return a.Combine(a.While(function(){return b0.length>0;},a.Delay(function(){var b6;b6=b0.shift();return a.Bind(bZ(b6),function(){return a.Return(null);});})),a.Delay(function(){return a.Return(void(b1[0]=false));}));});b9=function(){var b$;if(!b1[0]){b1[0]=true;b$=a.Start(b2,{$:0});}else{b$=null;}return b$;};ca=function(cb){b0.push(cb);return b9(null);};return ca;}},Slot:$.Class({},{Create:function(cc,cd){return l.New(cc,cd);}}),Slot1:$.Class({Equals:function(ce){return m.Equals(this.key.call(null,this.value),this.key.call(null,ce.get_Value()));},GetHashCode:function(){return m.Hash(this.key.call(null,this.value));},get_Value:function(){return this.value;}},{New:function(cf,cg){var ch;ch=$.New(this,{});ch.key=cf;ch.value=cg;return ch;}})},An:$.Class({},{Append:function(ci,cj){var ck,cl;ck=ci.$0;cl=cj.$0;return $.New(n,{$:0,$0:o.Append(ck,cl)});},Concat:function(cm){var cn,cp;cn=d.map(function(co){return p.List(co);},cm);cp=o.Concat(cn);return $.New(n,{$:0,$0:cp});},Const:function(cq){return p.Const(cq);},Delayed:function(cr,cs,ct,cu,cv,cw){var cx;cx=ct+cu;return{Compute:function(cy){var cz,cA;if(cy<=cu){cz=cv;}else{cA=cs.TransformTime.call(null,(cy-cu)/ct);cz=cr.Interpolate(cA,cv,cw);}return cz;},Duration:cx};},Map:function(cB,cC){var cD;cD=cC.Compute;return p.Def(cC.Duration,function(cE){return cB(cD(cE));});},Pack:function(cF){return $.New(n,{$:0,$0:o.Single({$:1,$0:cF})});},Play:function(cG){return a.Delay(function(){var cI,cK;cI=function(){};cK=p.Actions(cG);return a.Bind(n.Run(cI,cK),function(){return a.Return(p.Finalize(cG));});});},Run:function(cM,cN){var cO,cP;cO=cN.Duration;cP=function(cQ){var cR,cS,cT,cU,c1;cR=cQ[0];cS=cQ[1];cT=cQ[2];cU=function(cV,cW){var cX,cY,cZ;cX=cW-cV;cM(cN.Compute.call(null,cX));if(cX<=cO){cZ=q(function(c0){return cU(cV,c0);});cY=void cZ;}else{cY=cR(null);}return cY;};c1=q(function(c2){return cU(c2,c2);});return;};return a.FromContinuations(cP);},Simple:function(c3,c4,c5,c6,c7){return{Compute:function(c8){var c9;c9=c4.TransformTime.call(null,c8/c5);return c3.Interpolate(c9,c6,c7);},Duration:c5};},WhenDone:function(c_,c$){var da;da=$.New(n,{$:0,$0:o.Single({$:0,$0:c_})});return n.Append(da,c$);},get_Empty:function(){return $.New(n,{$:0,$0:o.Empty()});}}),AnimatedAttrNode:$.Class({GetChangeAnim:function(db){var dc,dd,df=this,dg,dh,di,dj,dk,dl,dm,dn,dp,dq;dc=[this.visible,this.logical];dd=function(){return df.sync(db);};if(dc[0].$==1){if(dc[1].$==1){dc[0].$0;dc[1].$0;if(df.dirty){dk=dc[1].$0;dl=dc[0].$0;dm=df.tr;dn=function(_do){return df.pushVisible(db,_do);};dp=r.AnimateChange(dm,dl,dk);dq=n.Map(dn,dp);dj=n.Pack(dq);}else{dj=n.get_Empty();}di=dj;}else{di=n.get_Empty();}dh=di;}else{dh=n.get_Empty();}dg=dh;return n.WhenDone(dd,dg);},GetEnterAnim:function(dr){var ds,dt,dv=this,dw,dx,dy,dz,dA,dB,dC,dD,dF,dG,dH,dI,dJ,dK,dL,dN,dO,dP,dQ,dR,dS,dT,dV,dW,dX,dY,dZ,d0,d1,d3,d4;ds=[this.visible,this.logical];dt=function(){return dv.sync(dr);};if(ds[0].$==1){if(ds[1].$==1){ds[0].$0;ds[1].$0;if(dv.dirty){dA=ds[1].$0;dB=ds[0].$0;dC=dv.tr;dD=function(dE){return dv.pushVisible(dr,dE);};dF=r.AnimateChange(dC,dB,dA);dG=n.Map(dD,dF);dz=n.Pack(dG);}else{if(ds[0].$==0){if(ds[1].$==1){dJ=ds[1].$0;dK=dv.tr;dL=function(dM){return dv.pushVisible(dr,dM);};dN=r.AnimateEnter(dK,dJ);dO=n.Map(dL,dN);dI=n.Pack(dO);}else{dI=n.get_Empty();}dH=dI;}else{dH=n.get_Empty();}dz=dH;}dy=dz;}else{if(ds[0].$==0){if(ds[1].$==1){dR=ds[1].$0;dS=dv.tr;dT=function(dU){return dv.pushVisible(dr,dU);};dV=r.AnimateEnter(dS,dR);dW=n.Map(dT,dV);dQ=n.Pack(dW);}else{dQ=n.get_Empty();}dP=dQ;}else{dP=n.get_Empty();}dy=dP;}dx=dy;}else{if(ds[0].$==0){if(ds[1].$==1){dZ=ds[1].$0;d0=dv.tr;d1=function(d2){return dv.pushVisible(dr,d2);};d3=r.AnimateEnter(d0,dZ);d4=n.Map(d1,d3);dY=n.Pack(d4);}else{dY=n.get_Empty();}dX=dY;}else{dX=n.get_Empty();}dx=dX;}dw=dx;return n.WhenDone(dt,dw);},GetExitAnim:function(d5){var d6,d7,d9=this,d_,d$,ea,eb,ec,ee,ef;d6=this.visible;d7=function(){d9.dirty=true;d9.visible={$:0};return;};if(d6.$==1){ea=d6.$0;eb=d9.tr;ec=function(ed){return d9.pushVisible(d5,ed);};ee=r.AnimateExit(eb,ea);ef=n.Map(ec,ee);d$=n.Pack(ef);}else{d$=n.get_Empty();}d_=d$;return n.WhenDone(d7,d_);},Init:function(){return null;},Sync:function(){return null;},get_Changed:function(){return this.updates;},pushVisible:function(ei,ej){this.visible={$:1,$0:ej};this.dirty=true;return(this.push.call(null,ei))(ej);},sync:function(ek){var el;if(this.dirty){s.iter(this.push.call(null,ek),this.logical);this.visible=this.logical;el=void(this.dirty=false);}else{el=null;}return el;}},{New:function(em,en,eo){var ep,eq;ep=$.New(this,{});ep.tr=em;ep.push=eo;ep.logical={$:0};ep.visible={$:0};ep.dirty=true;eq=function(er){ep.logical={$:1,$0:er};ep.dirty=true;return;};ep.updates=t.Map(eq,en);return ep;}}),Anims:{Actions:function(es){var et,eu,ey,ez;et=es.$0;eu=function(ev){var ew,ex;if(ev.$==1){ex=ev.$0;ew={$:1,$0:ex};}else{ew={$:0};}return ew;};ey=o.ToArray(et);ez=c.choose(eu,ey);return p.ConcatActions(ez);},ConcatActions:function(eA){var eB,eC,eD,eE,eG,eH,eI;eB=d.toArray(eA);eC=c.length(eB);if(eC===0){eD=p.Const(null);}else{if(eC===1){eD=c.get(eB,0);}else{eE=function(eF){return eF.Duration;};eG=d.map(eE,eB);eH=d.max(eG);eI=c.map(function(eJ){return p.Prolong(eH,eJ);},eB);eD=p.Def(eH,function(eK){return c.iter(function(eL){return eL.Compute.call(null,eK);},eI);});}}return eD;},Const:function(eM){return p.Def(0,function(){return eM;});},Def:function(eO,eP){return{Compute:eP,Duration:eO};},Finalize:function(eQ){var eR,eS,eW;eR=eQ.$0;eS=function(eT){var eU,eV;if(eT.$==0){eV=eT.$0;eU=eV(null);}else{eU=null;}return eU;};eW=o.ToArray(eR);return c.iter(eS,eW);},List:function(eX){var eY;eY=eX.$0;return eY;},Prolong:function(eZ,e0){var e1,e2,e3,e5;e1=e0.Compute;e2=e0.Duration;e3=u.Create(function(){return e0.Compute.call(null,e0.Duration);});e5=function(e6){return e6>=e2?e3.eval():e1(e6);};return{Compute:e5,Duration:eZ};}},AppendList1:{Append:function(e7,e8){var e9,e_,e$,fa,fb;e9=[e7,e8];if(e9[0].$==0){e$=e9[1];e_=e$;}else{if(e9[1].$==0){fb=e9[0];fa=fb;}else{fa={$:2,$0:e7,$1:e8};}e_=fa;}return e_;},Concat:function(fc){var fd,fe,fg,fh;fd=d.toArray(fc);fe=function(ff){return ff;};fg=o.Empty();fh=function(fi){return function(fj){return o.Append(fi,fj);};};return v.MapReduce(fe,fg,fh,fd);},Empty:function(){return{$:0};},FromArray:function(fk){var fl;fl=fk.length;return fl===0?{$:0}:fl===1?{$:1,$0:c.get(fk,0)}:{$:3,$0:fk.slice()};},Single:function(fm){return{$:1,$0:fm};},ToArray:function(fn){var fo,fp;fo=[];fp=function(fq){var fr,fs,ft,fu,fv;if(fq.$==1){fs=fq.$0;fr=fo.push(fs);}else{if(fq.$==2){ft=fq.$1;fu=fq.$0;fp(fu);fr=fp(ft);}else{if(fq.$==3){fv=fq.$0;fr=c.iter(function(fw){return fo.push(fw);},fv);}else{fr=null;}}}return fr;};fp(fn);return fo.slice(0);}},Array:{MapReduce:function(fx,fy,fz,fA){var fB;fB=function(fC,fD){var fE,fF,fG,fH,fI,fJ,fK,fL,fM;if(fD<=0){fE=fy;}else{if(fD===1){if(fC>=0?fC<c.length(fA):false){fG=fx(c.get(fA,fC));}else{fH=fD/2>>0;fI=fB(fC,fH);fJ=fB(fC+fH,fD-fH);fG=(fz(fI))(fJ);}fF=fG;}else{fK=fD/2>>0;fL=fB(fC,fK);fM=fB(fC+fK,fD-fK);fF=(fz(fL))(fM);}fE=fF;}return fE;};return fB(0,c.length(fA));}},AttrModule:{Animated:function(fN,fO,fP,fQ){return w.Animated(fO,fP,function(fR){return function(fS){return x.SetAttr(fR,fN,fQ(fS));};});},AnimatedStyle:function(fT,fU,fV,fW){return w.Animated(fU,fV,function(fX){return function(fY){return x.SetStyle(fX,fT,fW(fY));};});},Class:function(fZ){return w.Static(function(f0){return x.AddClass(f0,fZ);});},ContentEditableHtml:function(f1){var f2,f6;f2=y.CustomVar(f1,function(f3){return function(f4){f3.innerHTML=f4;};},function(f5){return{$:1,$0:f5.innerHTML};});f6=z.Create("contenteditable","true");return z.Append(f6,f2);},ContentEditableText:function(f7){var f8,ga;f8=y.CustomVar(f7,function(f9){return function(f_){f9.textContent=f_;};},function(f$){return{$:1,$0:f$.textContent};});ga=z.Create("contenteditable","true");return z.Append(ga,f8);},CustomValue:function(gb,gc,gd){return y.CustomVar(gb,function(ge){return function(gf){ge.value=gc(gf);};},function(gg){return gd(gg.value);});},CustomVar:function(gh,gi,gj){var gk,gs;gk=function(gl){return function(){return gh.UpdateMaybe(function(gn){var go,gp,gq,gr;go=gj(gl);if(go.$==1){gq=go.$0;if(!m.Equals(gq,gn)){go.$0;gr=go;}else{gr={$:0};}gp=gr;}else{gp={$:0};}return gp;});};};gs=function(gt){return function(gu){var gv,gw,gx,gy;gv=gj(gt);if(gv.$==1){gx=gv.$0;if(m.Equals(gx,gu)){gv.$0;gy=null;}else{gy=(gi(gt))(gu);}gw=gy;}else{gw=(gi(gt))(gu);}return gw;};};return z.Concat(A.ofArray([y.Handler("change",gk),y.Handler("input",gk),y.Handler("keypress",gk),y.DynamicCustom(gs,gh.get_View())]));},Dynamic:function(gz,gA){return w.Dynamic(gA,function(){},function(gC){return function(gD){return x.SetAttr(gC,gz,gD);};});},DynamicClass:function(gE,gF,gG){return w.Dynamic(gF,function(){},function(gI){return function(gJ){return gG(gJ)?x.AddClass(gI,gE):x.RemoveClass(gI,gE);};});},DynamicCustom:function(gK,gL){return w.Dynamic(gL,function(){},gK);},DynamicPred:function(gN,gO,gP){var gQ,gV,gY;gQ=function(gR){return function(gS){var gT,gU;gT=gS[0];gU=gS[1];return gT?x.SetAttr(gR,gN,gU):x.RemoveAttr(gR,gN);};};gV=function(gW){return function(gX){return[gW,gX];};};gY=t.Map2(gV,gO,gP);return w.Dynamic(gY,function(){},gQ);},DynamicProp:function(g0,g1){return w.Dynamic(g1,function(){},function(g3){return function(g4){g3[g0]=g4;};});},DynamicStyle:function(g5,g6){return w.Dynamic(g6,function(){},function(g8){return function(g9){return x.SetStyle(g8,g5,g9);};});},Handler:function(g_,g$){return w.Static(function(ha){return ha.addEventListener(g_,g$(ha),false);});},HandlerView:function(hb,hc,hd){var he,hf,hj;he=h.Id();hf=function(hg){var hh;hh=hd(hg);return hg.addEventListener(hb,function(hi){return(hh(hi))(hg[he]);},false);};hj=function(hk){return function(hl){hk[he]=hl;};};return w.Dynamic(hc,hf,hj);},OnAfterRender:function(hm){return w.Mk(0,{$:4,$0:hm});},OnAfterRenderView:function(hn,ho){var hp,hq,hs;hp=h.Id();hq=y.OnAfterRender(function(hr){return(ho(hr))(hr[hp]);});hs=y.DynamicCustom(function(ht){return function(hu){ht[hp]=hu;};},hn);return z.Append(hq,hs);},Style:function(hv,hw){return w.Static(function(hx){return x.SetStyle(hx,hv,hw);});},ValidateForm:function(){return y.OnAfterRender(function(hy){return $$.H5F?$$.H5F.setup(hy):undefined;});},Value:function(hz){return y.CustomValue(hz,function(hA){return hA;},function(hB){return{$:1,$0:hB};});}},AttrProxy:$.Class({},{Append:function(hC,hD){return w.Mk(hC.Flags|hD.Flags,w.AppendTree(hC.Tree,hD.Tree));},Concat:function(hE){var hF,hG,hI,hJ;hF=d.toArray(hE);hG=function(hH){return hH;};hI=z.get_Empty();hJ=function(hK){return function(hL){return z.Append(hK,hL);};};return v.MapReduce(hG,hI,hJ,hF);},Create:function(hM,hN){return w.Static(function(hO){return x.SetAttr(hO,hM,hN);});},Handler:function(hP,hQ){return w.Static(function(hR){return hR.addEventListener(hP,hQ(hR),false);});},get_Empty:function(){return w.EmptyAttr();}}),Attrs:{Animated:function(hS,hT,hU){var hV,hW;hV=B.New(hS,hT,hU);hW=4;C.CanAnimateEnter(hS)?hW=hW|1:null;C.CanAnimateExit(hS)?hW=hW|2:null;return w.Mk(hW,{$:1,$0:hV});},AppendTree:function(hX,hY){var hZ,h0,h1,h2,h3;hZ=[hX,hY];if(hZ[0].$==0){h1=hZ[1];h0=h1;}else{if(hZ[1].$==0){h3=hZ[0];h2=h3;}else{h2={$:2,$0:hX,$1:hY};}h0=h2;}return h0;},Dynamic:function(h4,h5,h6){var h7;h7={$:1,$0:D.New(h4,h5,h6)};return w.Mk(0,h7);},EmptyAttr:$.Field(function(){return w.Mk(0,{$:0});}),GetAnim:function(h8,h9){var h_,ia,ib;h_=function(h$){return(h9(h$))(h8.DynElem);};ia=h8.DynNodes;ib=c.map(h_,ia);return n.Concat(ib);},GetChangeAnim:function(ic){return w.GetAnim(ic,function(id){return function(ie){return id.GetChangeAnim(ie);};});},GetEnterAnim:function(_if){return w.GetAnim(_if,function(ig){return function(ih){return ig.GetEnterAnim(ih);};});},GetExitAnim:function(ii){return w.GetAnim(ii,function(ij){return function(ik){return ij.GetExitAnim(ik);};});},HasChangeAnim:function(il){return(il.DynFlags&4)!==0;},HasEnterAnim:function(im){return(im.DynFlags&1)!==0;},HasExitAnim:function(_in){return(_in.DynFlags&2)!==0;},Insert:function(io,ip){var iq,ir,is,iA;iq=[];ir=[];is=function(it){var iu,iv,iw,ix,iy,iz;if(it.$==1){iv=it.$0;iv.Init(io);iu=iq.push(iv);}else{if(it.$==2){iw=it.$1;ix=it.$0;is(ix);iu=is(iw);}else{if(it.$==3){iy=it.$0;iu=iy(io);}else{if(it.$==4){iz=it.$0;iu=ir.push(iz);}else{iu=null;}}}}return iu;};is(ip.Tree);iA=iq.slice(0);return $.DeleteEmptyFields({DynElem:io,DynFlags:ip.Flags,DynNodes:iA,OnAfterRender:(ir.length===0?{$:0}:{$:1,$0:function(iB){return d.iter(function(iC){return iC(iB);},ir);}}).$0},["OnAfterRender"]);},Mk:function(iD,iE){return $.New(z,{Flags:iD,Tree:iE});},Static:function(iF){return w.Mk(0,{$:3,$0:iF});},Sync:function(iG,iH){var iI,iK;iI=function(iJ){return iJ.Sync(iG);};iK=iH.DynNodes;return c.iter(iI,iK);},Updates:function(iL){var iM,iS,iT,iV;iM=function(iN){return function(iO){var iP;iP=function(){return function(){return null;};};return t.Map2(iP,iN,iO);};};iS=iL.DynNodes;iT=function(iU){return iU.get_Changed();};iV=E.Const(null);return v.MapReduce(iT,iV,iM,iS);}},CheckedInput:$.Class({get_Input:function(){var iW,iX,iY,iZ;if(this.$==1){iX=this.$0;iW=iX;}else{if(this.$==2){iY=this.$0;iW=iY;}else{iZ=this.$1;iW=iZ;}}return iW;}}),Doc:$.Class({ReplaceInDom:function(i0){var i1,i2;i1=F.createTextNode("");i2=i0.parentNode.replaceChild(i1,i0);return G.RunBefore(i1,this);},get_DocNode:function(){return this.docNode;},get_Updates:function(){return this.updates;}},{Append:function(i3,i4){var i5,i8,i9,i_,i$;i5=function(){return function(){return null;};};i8=i3.get_Updates();i9=i4.get_Updates();i_=t.Map2(i5,i8,i9);i$={$:0,$0:i3.get_DocNode(),$1:i4.get_DocNode()};return G.Mk(i$,i_);},Async:function(ja){var jb,jd,je;jb=function(jc){return jc;};jd=E.Const(ja);je=t.MapAsync(jb,jd);return G.EmbedView(je);},BindView:function(jf,jg){return G.EmbedView(t.Map(jf,jg));},Button:function(jh,ji,jj){var jk,jl,jm;jk=z.Concat(ji);jl=G.Clickable("button",jj);jm=G.TextNode(jh);return H.New(jl,jk,jm);},ButtonView:function(jn,jo,jp,jq){var jr,ju,jv,jw;jr=y.HandlerView("click",jp,function(){return function(){return jq;};});ju=z.Concat(d.append([jr],jo));jv=x.CreateElement("button");jw=G.TextNode(jn);return H.New(jv,ju,jw);},CheckBox:function(jx,jy){var jz,jA,jC,jG;jz=x.CreateElement("input");jA=function(){return jy.Set(jz.checked);};jz.addEventListener("click",jA,false);jC=z.Concat(d.toList(d.delay(function(){return d.append(jx,d.delay(function(){return d.append([z.Create("type","checkbox")],d.delay(function(){return[y.DynamicProp("checked",jy.get_View())];}));}));})));jG=G.get_Empty();return H.New(jz,jC,jG);},CheckBoxGroup:function(jH,jI,jJ){var jK,jL,jR,jT,jV,jW,jX,jY,jZ,j0,j1,j4;jK=jJ.get_View();jL=function(jM){return jJ.Update(function(jN){var jO,jQ;jO=jM?A.append(jN,A.ofArray([jI])):A.filter(function(jP){return!m.Equals(jP,jI);},jN);jQ=I.distinct(jO);return d.toList(jQ);});};jR=function(jS){return m.Equals(jS,jI);};jT=function(jU){return d.exists(jR,jU);};jV=t.Map(jT,jK);jX=jJ.get_Id();jY=h.Id();jW=A.append(A.ofArray([z.Create("type","checkbox"),z.Create("name",jX),z.Create("value",jY),y.DynamicProp("checked",jV)]),A.ofSeq(jH));jZ=z.Concat(jW);j0=x.CreateElement("input");j1=function(){var j3;j3=j0.checked;return jL(j3);};j0.addEventListener("click",j1,false);j4=G.get_Empty();return H.New(j0,jZ,j4);},Clickable:function(j5,j6){var j7;j7=x.CreateElement(j5);j7.addEventListener("click",function(j8){j8.preventDefault();return j6(null);},false);return j7;},Concat:function(j9){var j_,j$,kb,kc;j_=d.toArray(j9);j$=function(ka){return ka;};kb=G.get_Empty();kc=function(kd){return function(ke){return G.Append(kd,ke);};};return v.MapReduce(j$,kb,kc,j_);},Convert:function(kf,kg){var kh;kh=t.MapSeqCached(kf,kg);return G.Flatten(kh);},ConvertBy:function(ki,kj,kk){var kl;kl=t.MapSeqCachedBy(ki,kj,kk);return G.Flatten(kl);},ConvertSeq:function(km,kn){var ko;ko=t.MapSeqCachedView(km,kn);return G.Flatten(ko);},ConvertSeqBy:function(kp,kq,kr){var ks;ks=t.MapSeqCachedViewBy(kp,kq,kr);return G.Flatten(ks);},Element:function(kt,ku,kv){var kw,kx,ky;kw=z.Concat(ku);kx=G.Concat(kv);ky=x.CreateElement(kt);return H.New(ky,kw,kx);},EmbedView:function(kz){var kA,kB,kD,kF,kG,kH;kA=J.CreateEmbedNode();kB=function(kC){J.UpdateEmbedNode(kA,kC.get_DocNode());return kC.get_Updates();};kD=function(){};kF=E.Bind(kB,kz);kG=t.Map(kD,kF);kH={$:2,$0:kA};return G.Mk(kH,kG);},Flatten:function(kI){var kJ,kL;kJ=function(kK){return G.Concat(kK);};kL=t.Map(kJ,kI);return G.EmbedView(kL);},FloatInput:function(kM,kN){var kO,kU;kO=function(kP){return function(kQ){var kR,kS,kT;if(K.isBlank(kQ)){kS=(kP.checkValidity?kP.checkValidity():true)?$.New(L,{$:2,$0:kQ}):$.New(L,{$:1,$0:kQ});}else{kT=+kQ;kS=$$.isNaN(kT)?$.New(L,{$:1,$0:kQ}):$.New(L,{$:0,$0:kT,$1:kQ});}kR=kS;return{$:1,$0:kR};};};kU=function(kV){return d.append(kM,[y.CustomValue(kN,function(kW){return kW.get_Input();},kO(kV)),z.Create("type","number")]);};return G.InputInternal("input",kU);},FloatInputUnchecked:function(kX,kY){var kZ,k3;kZ=function(k0){var k1,k2;if(K.isBlank(k0)){k1={$:1,$0:0};}else{k2=+k0;k1=$$.isNaN(k2)?{$:0}:{$:1,$0:k2};}return k1;};k3=function(){return d.append(kX,[kY.Get()===0?z.Create("value","0"):z.get_Empty(),y.CustomValue(kY,function(k5){return $$.String(k5);},kZ),z.Create("type","number")]);};return G.InputInternal("input",k3);},Input:function(k6,k7){var k8;k8=function(){return d.append(k6,[y.Value(k7)]);};return G.InputInternal("input",k8);},InputArea:function(k_,k$){var la;la=function(){return d.append(k_,[y.Value(k$)]);};return G.InputInternal("textarea",la);},InputInternal:function(lc,ld){var le,lf,lg;le=x.CreateElement(lc);lf=z.Concat(ld(le));lg=G.get_Empty();return H.New(le,lf,lg);},IntInput:function(lh,li){var lj,lp;lj=function(lk){return function(ll){var lm,ln,lo;if(K.isBlank(ll)){ln=(lk.checkValidity?lk.checkValidity():true)?$.New(L,{$:2,$0:ll}):$.New(L,{$:1,$0:ll});}else{lo=+ll;ln=$$.isNaN(lo)?$.New(L,{$:1,$0:ll}):$.New(L,{$:0,$0:lo,$1:ll});}lm=ln;return{$:1,$0:lm};};};lp=function(lq){return d.append(lh,[y.CustomValue(li,function(lr){return lr.get_Input();},lj(lq)),z.Create("type","number"),z.Create("step","1")]);};return G.InputInternal("input",lp);},IntInputUnchecked:function(ls,lt){var lu,ly;lu=function(lv){var lw,lx;if(K.isBlank(lv)){lw={$:1,$0:0};}else{lx=+lv;lw=lx!==lx>>0?{$:0}:{$:1,$0:lx};}return lw;};ly=function(){return d.append(ls,[lt.Get()===0?z.Create("value","0"):z.get_Empty(),y.CustomValue(lt,function(lA){return $$.String(lA);},lu),z.Create("type","number"),z.Create("step","1")]);};return G.InputInternal("input",ly);},Link:function(lB,lC,lD){var lE,lF,lG,lH,lI;lE=z.Concat(lC);lF=z.Create("href","#");lG=z.Append(lF,lE);lH=G.Clickable("a",lD);lI=G.TextNode(lB);return H.New(lH,lG,lI);},LinkView:function(lJ,lK,lL,lM){var lN,lQ,lR,lS;lN=y.HandlerView("click",lL,function(){return function(){return lM;};});lQ=z.Concat(d.append([lN,z.Create("href","#")],lK));lR=x.CreateElement("a");lS=G.TextNode(lJ);return H.New(lR,lQ,lS);},Mk:function(lT,lU){return G.New(lT,lU);},New:function(lV,lW){var lX;lX=$.New(this,{});lX.docNode=lV;lX.updates=lW;return lX;},PasswordBox:function(lY,lZ){var l0;l0=function(){return d.append(lY,[y.Value(lZ),z.Create("type","password")]);};return G.InputInternal("input",l0);},Radio:function(l2,l3,l4){var l5,l7,l9,l_,l$,ma,md,me,mf;l5=x.CreateElement("input");l5.addEventListener("click",function(){return l4.Set(l3);},false);l7=function(l8){return m.Equals(l8,l3);};l9=l4.get_View();l_=t.Map(l7,l9);l$=y.DynamicProp("checked",l_);ma=function(mb,mc){return z.Create(mb,mc);};md=A.append(A.ofArray([ma("type","radio"),ma("name",l4.get_Id()),l$]),A.ofSeq(l2));me=z.Concat(md);mf=G.get_Empty();return H.New(l5,me,mf);},Run:function(mg,mh){var mi,mj,mk,mm;mi=mh.get_DocNode();J.LinkElement(mg,mi);mj=J.CreateRunState(mg,mi);mk=M.StartProcessor(function(){return J.PerformAnimatedUpdate(mj,mi);});mm=mh.get_Updates();return E.Sink(mk,mm);},RunAfter:function(mn,mo){var mp,mq;mp=F.createTextNode("");mq=mn.parentNode.insertBefore(mp,mn.nextSibling);return G.RunBetween(mn,mp,mo);},RunAfterById:function(mr,ms){var mt;mt=x.Doc().getElementById(mr);return m.Equals(mt,null)?N.FailWith("invalid id: "+mr):G.RunAfter(mt,ms);},RunAppend:function(mu,mv){var mw,mx;mw=F.createTextNode("");mx=mu.appendChild(mw);return G.RunBefore(mw,mv);},RunAppendById:function(my,mz){var mA;mA=x.Doc().getElementById(my);return m.Equals(mA,null)?N.FailWith("invalid id: "+my):G.RunAppend(mA,mz);},RunBefore:function(mB,mC){var mD,mE;mD=F.createTextNode("");mE=mB.parentNode.insertBefore(mD,mB);return G.RunBetween(mD,mB,mC);},RunBeforeById:function(mF,mG){var mH;mH=x.Doc().getElementById(mF);return m.Equals(mH,null)?N.FailWith("invalid id: "+mF):G.RunBefore(mH,mG);},RunBetween:function(mI,mJ,mK){var mL,mM,mO;J.LinkPrevElement(mJ,mK.get_DocNode());mL=J.CreateDelimitedRunState(mI,mJ,mK.get_DocNode());mM=M.StartProcessor(function(){return J.PerformAnimatedUpdate(mL,mK.get_DocNode());});mO=mK.get_Updates();return E.Sink(mM,mO);},RunById:function(mP,mQ){var mR;mR=x.Doc().getElementById(mP);return m.Equals(mR,null)?N.FailWith("invalid id: "+mP):G.Run(mR,mQ);},RunPrepend:function(mS,mT){var mU,mV;mU=F.createTextNode("");mV=mS.insertBefore(mU,mS.firstChild);return G.RunBefore(mU,mT);},RunPrependById:function(mW,mX){var mY;mY=x.Doc().getElementById(mW);return m.Equals(mY,null)?N.FailWith("invalid id: "+mW):G.RunPrepend(mY,mX);},Select:function(mZ,m0,m1,m2){var m3;m3=E.Const(m1);return G.SelectDyn(mZ,m0,m3,m2);},SelectDyn:function(m4,m5,m6,m7){var m8,m9,m$,nc,nf,nj,nk,nl,nm,nq,nv,nw,nE,nF,nG,nH,nJ;m8=[$.New(O,{$:0})];m9=function(m_){return m_.selectedIndex;};m$=function(na){var nb;nb=m9(na);return m8[0].get_Item(nb);};nc=function(nd){return d.findIndex(function(ne){return m.Equals(nd,ne);},m8[0]);};nf=function(ng){return function(nh){var ni;ni=nc(nh);ng.selectedIndex=ni;return;};};nj=x.CreateElement("select");nk=m7.get_View();nl=y.DynamicCustom(nf,nk);nm=function(){return m7.UpdateMaybe(function(no){var np;np=m$(nj);return m.Equals(no,np)?{$:0}:{$:1,$0:np};});};nj.addEventListener("change",nm,false);nq=function(nr){var ns;m8[0]=nr;ns=function(nt){return function(nu){return[nt,nu];};};return d.mapi(ns,nr);};nv=t.Map(nq,m6);nw=function(nx){var ny,nz,nA,nB,nC,nD;ny=nx[0];nz=nx[1];nA=G.TextNode(m5(nz));nC=$$.String(ny);nB=A.ofArray([z.Create("value",nC)]);nD=A.ofArray([nA]);return G.Element("option",nB,nD);};nE=G.Convert(nw,nv);nF=z.Concat(m4);nG=z.Append(nl,nF);nH=y.OnAfterRender(function(nI){return(nf(nI))(m7.Get());});nJ=z.Append(nH,nG);return H.New(nj,nJ,nE);},SelectDynOptional:function(nK,nL,nM,nN,nO){var nP,nT,nW;nP=function(nQ){var nR,nS;if(nQ.$==1){nS=nQ.$0;nR=nM(nS);}else{nR=nL;}return nR;};nT=function(nU){return $.New(O,{$:1,$0:{$:0},$1:A.map(function(nV){return{$:1,$0:nV};},nU)});};nW=t.Map(nT,nN);return G.SelectDyn(nK,nP,nW,nO);},SelectOptional:function(nX,nY,nZ,n0,n1){var n2,n6;n2=function(n3){var n4,n5;if(n3.$==1){n5=n3.$0;n4=nZ(n5);}else{n4=nY;}return n4;};n6=$.New(O,{$:1,$0:{$:0},$1:A.map(function(n7){return{$:1,$0:n7};},n0)});return G.Select(nX,n2,n6,n1);},Static:function(n8){var n9,n_;n9=z.get_Empty();n_=G.get_Empty();return H.New(n8,n9,n_);},SvgElement:function(n$,oa,ob){var oc,od,oe;oc=z.Concat(oa);od=G.Concat(ob);oe=x.CreateSvgElement(n$);return H.New(oe,oc,od);},TextNode:function(of){var og,oh;og={$:5,$0:x.CreateText(of)};oh=E.Const(null);return G.Mk(og,oh);},TextView:function(oi){var oj,ok,om,on;oj=J.CreateTextNode();ok=function(ol){return J.UpdateTextNode(oj,ol);};om=t.Map(ok,oi);on={$:4,$0:oj};return G.Mk(on,om);},Verbatim:function(oo){var op,oq,or,ot,ow,ox;op=P.parseHTML(oo);oq=m.Equals(op,null)?[]:op;or=function(os){return{$:1,$0:J.CreateElemNode(os,z.get_Empty(),{$:3})};};ot=function(ou){return function(ov){return{$:0,$0:ou,$1:ov};};};ow=v.MapReduce(or,{$:3},ot,oq);ox=E.Const(null);return G.Mk(ow,ox);},get_Empty:function(){var oy,oz;oy={$:3};oz=E.Const(null);return G.Mk(oy,oz);}}),DocElemNode:$.Class({Equals:function(oA){return this.ElKey===oA.ElKey;},GetHashCode:function(){return this.ElKey;}}),Docs:{ComputeChangeAnim:function(oB,oC){var oD,oF,oH,oI,oJ,oK,oM,oN;oD=function(oE){return w.HasChangeAnim(oE.Attr);};oF=function(oG){return Q.Filter(oD,oG);};oH=oF(oB.PreviousNodes);oI=oF(oC);oJ=Q.Intersect(oH,oI);oK=function(oL){return w.GetChangeAnim(oL.Attr);};oM=Q.ToArray(oJ);oN=c.map(oK,oM);return n.Concat(oN);},ComputeEnterAnim:function(oO,oP){var oQ,oS,oT,oU,oV,oX,oY;oQ=function(oR){return w.HasEnterAnim(oR.Attr);};oS=oO.PreviousNodes;oT=Q.Filter(oQ,oP);oU=Q.Except(oS,oT);oV=function(oW){return w.GetEnterAnim(oW.Attr);};oX=Q.ToArray(oU);oY=c.map(oV,oX);return n.Concat(oY);},ComputeExitAnim:function(oZ,o0){var o1,o3,o5,o6,o7,o8,o9;o1=function(o2){return w.HasExitAnim(o2.Attr);};o3=function(o4){return w.GetExitAnim(o4.Attr);};o5=oZ.PreviousNodes;o6=Q.Filter(o1,o5);o7=Q.Except(o0,o6);o8=Q.ToArray(o7);o9=c.map(o3,o8);return n.Concat(o9);},CreateDelimitedElemNode:function(o_,o$,pa,pb){var pc,pd;pc=o_.parentNode;J.LinkPrevElement(o$,pb);pd=w.Insert(pc,pa);return $.New(R,$.DeleteEmptyFields({Attr:pd,Children:pb,Delimiters:[o_,o$],El:pc,ElKey:h.Int(),Render:$.GetOptional(pd.OnAfterRender).$0},["Render"]));},CreateDelimitedRunState:function(pe,pf,pg){return{PreviousNodes:Q.get_Empty(),Top:J.CreateDelimitedElemNode(pe,pf,z.get_Empty(),pg)};},CreateElemNode:function(ph,pi,pj){var pk;J.LinkElement(ph,pj);pk=w.Insert(ph,pi);return $.New(R,$.DeleteEmptyFields({Attr:pk,Children:pj,El:ph,ElKey:h.Int(),Render:$.GetOptional(pk.OnAfterRender).$0},["Render"]));},CreateEmbedNode:function(){return{Current:{$:3},Dirty:false};},CreateRunState:function(pl,pm){return{PreviousNodes:Q.get_Empty(),Top:J.CreateElemNode(pl,z.get_Empty(),pm)};},CreateTextNode:function(){return{Text:x.CreateText(""),Dirty:false,Value:""};},DoSyncElement:function(pn){var po,pp,pA,pB,pC,pD,pE,pF,pH,pI,pJ,pK,pL,pM;po=pn.El;pp=function(pq,pr){var ps,pt,pu,pv,pw,px,py,pz;if(pq.$==1){pt=pq.$0;ps={$:1,$0:pt.El};}else{if(pq.$==2){pu=pq.$0;if(pu.Dirty){pu.Dirty=false;pv=J.InsertDoc(po,pu.Current,pr);}else{pv=pp(pu.Current,pr);}ps=pv;}else{if(pq.$==3){ps=pr;}else{if(pq.$==4){pw=pq.$0;ps={$:1,$0:pw.Text};}else{if(pq.$==5){px=pq.$0;ps={$:1,$0:px};}else{py=pq.$1;pz=pq.$0;ps=pp(pz,pp(py,pr));}}}}}return ps;};pA=S.DocChildren(pn);pB=pn.El;pC=$.GetOptional(pn.Delimiters);pD=S.Children(pB,pC);pE=pn.El;pF=function(pG){return x.RemoveNode(pE,pG);};pH=S.Except(pA,pD);S.Iter(pF,pH);pI=$.GetOptional(pn.Delimiters);if(pI.$==1){pL=pI.$0[1];pK={$:1,$0:pL};}else{pK={$:0};}pJ=pK;pM=pp(pn.Children,pJ);return;},DomNodes:$.Class({},{Children:function(pN,pO){var pP,pQ,pR,pS,pT,pU,pV;if(pO.$==1){pQ=pO.$0[1];pR=pO.$0[0];pS=b.prototype.constructor.apply(b,[]);pT=pR.nextSibling;while(pT!==pQ){pU=pS.push(pT);pT=pT.nextSibling;}pP=$.New(S,{$:0,$0:pS});}else{pV=pN.childNodes;pP=$.New(S,{$:0,$0:c.init(pN.childNodes.length,function(pW){return pV[pW];})});}return pP;},DocChildren:function(pX){var pY,pZ;pY=[];pZ=function(p0){var p1,p2,p3,p4,p5,p6,p7;if(p0.$==2){p2=p0.$0;p1=pZ(p2.Current);}else{if(p0.$==1){p3=p0.$0;p1=pY.push(p3.El);}else{if(p0.$==3){p1=null;}else{if(p0.$==5){p4=p0.$0;p1=pY.push(p4);}else{if(p0.$==4){p5=p0.$0;p1=pY.push(p5.Text);}else{p6=p0.$1;p7=p0.$0;pZ(p7);p1=pZ(p6);}}}}}return p1;};pZ(pX.Children);return $.New(S,{$:0,$0:pY.slice(0)});},Except:function(p8,p9){var p_,p$,qa,qe;p_=p8.$0;p$=p9.$0;qa=function(qb){var qc;qc=function(qd){return!(qb===qd);};return d.forall(qc,p_);};qe=c.filter(qa,p$);return $.New(S,{$:0,$0:qe});},FoldBack:function(qf,qg,qh){var qi;qi=qg.$0;return c.foldBack(qf,qi,qh);},Iter:function(qj,qk){var ql;ql=qk.$0;return c.iter(qj,ql);}}),InsertDoc:function(qm,qn,qo){var qp,qq,qr,qs,qt,qu,qv;if(qn.$==1){qq=qn.$0;qp=J.InsertNode(qm,qq.El,qo);}else{if(qn.$==2){qr=qn.$0;qr.Dirty=false;qp=J.InsertDoc(qm,qr.Current,qo);}else{if(qn.$==3){qp=qo;}else{if(qn.$==4){qs=qn.$0;qp=J.InsertNode(qm,qs.Text,qo);}else{if(qn.$==5){qt=qn.$0;qp=J.InsertNode(qm,qt,qo);}else{qu=qn.$1;qv=qn.$0;qp=J.InsertDoc(qm,qv,J.InsertDoc(qm,qu,qo));}}}}}return qp;},InsertNode:function(qw,qx,qy){x.InsertAt(qw,qy,qx);return{$:1,$0:qx};},LinkElement:function(qz,qA){var qB;qB=J.InsertDoc(qz,qA,{$:0});return;},LinkPrevElement:function(qC,qD){var qE;qE=J.InsertDoc(qC.parentNode,qD,{$:1,$0:qC});return;},NodeSet:$.Class({},{Except:function(qF,qG){var qH,qI;qH=qF.$0;qI=qG.$0;return $.New(Q,{$:0,$0:k.Except(qH,qI)});},Filter:function(qJ,qK){var qL;qL=qK.$0;return $.New(Q,{$:0,$0:k.Filter(qJ,qL)});},FindAll:function(qM){var qN,qO;qN=[];qO=function(qP){var qQ,qR,qS,qT,qU;if(qP.$==0){qR=qP.$1;qS=qP.$0;qO(qS);qQ=qO(qR);}else{if(qP.$==1){qT=qP.$0;qN.push(qT);qQ=qO(qT.Children);}else{if(qP.$==2){qU=qP.$0;qQ=qO(qU.Current);}else{qQ=null;}}}return qQ;};qO(qM);return $.New(Q,{$:0,$0:j.New(qN.slice(0))});},Intersect:function(qV,qW){var qX,qY;qX=qV.$0;qY=qW.$0;return $.New(Q,{$:0,$0:k.Intersect(qX,qY)});},IsEmpty:function(qZ){var q0;q0=qZ.$0;return q0.get_Count()===0;},ToArray:function(q1){var q2;q2=q1.$0;return k.ToArray(q2);},get_Empty:function(){return $.New(Q,{$:0,$0:j.New11()});}}),PerformAnimatedUpdate:function(q3,q4){return a.Delay(function(){var q6,q7,q8,q9;q6=Q.FindAll(q4);q7=J.ComputeChangeAnim(q3,q6);q8=J.ComputeEnterAnim(q3,q6);q9=J.ComputeExitAnim(q3,q6);return a.Bind(n.Play(n.Append(q7,q9)),function(){J.SyncElemNode(q3.Top);return a.Bind(n.Play(q8),function(){return a.Return(void(q3.PreviousNodes=q6));});});});},Sync:function(ra){var rb;rb=function(rc){var rd,re,rf,rg,rh,ri,rj;if(rc.$==1){re=rc.$0;J.SyncElement(re);rd=rb(re.Children);}else{if(rc.$==2){rf=rc.$0;rd=rb(rf.Current);}else{if(rc.$==3){rd=null;}else{if(rc.$==5){rd=null;}else{if(rc.$==4){rg=rc.$0;if(rg.Dirty){rg.Text.nodeValue=rg.Value;rh=void(rg.Dirty=false);}else{rh=null;}rd=rh;}else{ri=rc.$1;rj=rc.$0;rb(rj);rd=rb(ri);}}}}}return rd;};return rb(ra);},SyncElemNode:function(rk){J.SyncElement(rk);return J.Sync(rk.Children);},SyncElement:function(rl){var rm,ru,rv,rw;rm=function(rn){var ro;ro=function(rp){var rq,rr,rs,rt;if(rp.$==0){rr=rp.$1;rs=rp.$0;rq=ro(rs)?true:ro(rr);}else{if(rp.$==2){rt=rp.$0;rq=rt.Dirty?true:ro(rt.Current);}else{rq=false;}}return rq;};return ro(rn.Children);};w.Sync(rl.El,rl.Attr);rm(rl)?J.DoSyncElement(rl):null;ru=$.GetOptional(rl.Render);if(ru.$==1){rw=ru.$0;rw(rl.El);rv=void(delete rl.Render);}else{rv=null;}return rv;},UpdateEmbedNode:function(rx,ry){rx.Current=ry;rx.Dirty=true;return;},UpdateTextNode:function(rz,rA){rz.Value=rA;rz.Dirty=true;return;}},DomUtility:{AddClass:function(rB,rC){var rD;rD=P(rB).addClass(rC);return;},AppendTo:function(rE,rF){var rG;rG=rE.appendChild(rF);return;},Clear:function(rH){var rI;while(rH.hasChildNodes()){rI=rH.removeChild(rH.firstChild);}return;},ClearAttrs:function(rJ){var rK;while(rJ.hasAttributes()){rK=rJ.removeAttributeNode(rJ.attributes.item(0));}return;},CreateAttr:function(rL,rM){var rN;rN=x.Doc().createAttribute(rL);rN.value=rM;return rN;},CreateElement:function(rO){return x.Doc().createElement(rO);},CreateSvgElement:function(rP){return x.Doc().createElementNS("http://www.w3.org/2000/svg",rP);},CreateText:function(rQ){return x.Doc().createTextNode(rQ);},Doc:$.Field(function(){return F;}),InsertAt:function(rR,rS,rT){var rU,rX,rY,rZ,r0,r1,r2,r3,r4,r5,r6,r7,r8,r9;rU=function(rV){var rW;rW=rV.nextSibling;return m.Equals(rW,null)?{$:0}:{$:1,$0:rW};};if(rT.parentNode===rR){rZ=rU(rT);r0=[rS,rZ];if(r0[0].$==1){if(r0[1].$==1){r3=r0[0].$0;r4=r0[1].$0;r2=r3===r4;}else{r2=false;}r1=r2;}else{r1=r0[1].$==0?true:false;}rY=r1;}else{rY=false;}rX=rY;if(!rX){if(rS.$==1){r7=rS.$0;r8=rR.insertBefore(rT,r7);r6=void r8;}else{r9=rR.appendChild(rT);r6=void r9;}r5=r6;}else{r5=null;}return r5;},RemoveAttr:function(r_,r$){return r_.removeAttribute(r$);},RemoveClass:function(sa,sb){var sc;sc=P(sa).removeClass(sb);return;},RemoveNode:function(sd,se){var sf,sg;if(se.parentNode===sd){sg=sd.removeChild(se);sf=void sg;}else{sf=null;}return sf;},SetAttr:function(sh,si,sj){return sh.setAttribute(si,sj);},SetProperty:function($target,$name,$value){var $0=this,$this=this;return $target.setProperty($name,$value);},SetStyle:function(sk,sl,sm){return x.SetProperty(sk.style,sl,sm);}},DoubleInterpolation:$.Class({Interpolate:function(sn,so,sp){return so+sn*(sp-so);}}),DynamicAttrNode:$.Class({GetChangeAnim:function(){return n.get_Empty();},GetEnterAnim:function(){return n.get_Empty();},GetExitAnim:function(){return n.get_Empty();},Init:function(st){return this.init.call(null,st);},Sync:function(su){var sv;if(this.dirty){(this.push.call(null,su))(this.value);sv=void(this.dirty=false);}else{sv=null;}return sv;},get_Changed:function(){return this.updates;}},{New:function(sw,sx,sy){var sz,sA;sz=$.New(this,{});sz.init=sx;sz.push=sy;sz.value=undefined;sz.dirty=true;sA=function(sB){sz.value=sB;sz.dirty=true;return;};sz.updates=t.Map(sA,sw);return sz;}}),Easing:$.Class({},{Custom:function(sC){return $.New(T,{TransformTime:sC});},get_CubicInOut:function(){return U.CubicInOut();}}),Easings:{CubicInOut:$.Field(function(){var sD;sD=function(sE){var sF,sG;sF=sE*sE;sG=sF*sE;return 3*sF-2*sG;};return $.New(T,{TransformTime:sD});})},Elt:$.Class({AddClass:function($cls){var $this=this;return $this.elt.className+=" "+$cls;},Append:function(sH){var sI,sJ,sK,sN,sO,sP;sI=this.get_DocElemNode();sI.Children={$:0,$0:sI.Children,$1:sH.get_DocNode()};sJ=this.rvUpdates;sK=function(){return function(){return null;};};sN=V.Get(this.rvUpdates);sO=sH.get_Updates();W.Set(sJ,t.Map2(sK,sN,sO));sP=J.InsertDoc(this.elt,sH.get_DocNode(),{$:0});return;},Clear:function(){var sQ;this.get_DocElemNode().Children={$:3};W.Set(this.rvUpdates,E.Const(null));while(this.elt.hasChildNodes()){sQ=this.elt.removeChild(this.elt.firstChild);}return;},GetAttribute:function(sR){return this.elt.getAttribute(sR);},GetProperty:function(sS){return this.elt[sS];},GetText:function(){return this.elt.textContent;},GetValue:function(){return this.elt.value;},HasAttribute:function(sT){return this.elt.hasAttribute(sT);},HasClass:function(sU){return(new X("(\\s|^)"+sU+"(\\s|$)")).test(this.elt.className);},Html:function(){return this.elt.outerHTML;},Id:function(){return this.elt.id;},OnAfterRender:function(sV){var sW,sX,sY;sW=$.GetOptional(this.get_DocElemNode().Render);if(sW.$==1){sY=sW.$0;sX={$:1,$0:function(sZ){sY(sZ);return sV(sZ);}};}else{sX={$:1,$0:sV};}$.SetOptional(this.get_DocElemNode(),"Render",sX);return this;},OnAfterRenderView:function(s0,s1){var s2,s3,s5=this;s2=h.Id();s3=function(s4){(s5.get_Element())[s2]=s4;return G.get_Empty();};this.Append(G.BindView(s3,s0));return s5.OnAfterRender(function(s6){return(s1(s6))(s6[s2]);});},Prepend:function(s7){var s8,s9,s_,tb,tc,td,te,tf;s8=this.get_DocElemNode();s8.Children={$:0,$0:s7.get_DocNode(),$1:s8.Children};s9=this.rvUpdates;s_=function(){return function(){return null;};};tb=V.Get(this.rvUpdates);tc=s7.get_Updates();W.Set(s9,t.Map2(s_,tb,tc));td=this.elt.firstChild;te=m.Equals(td,null)?{$:0}:{$:1,$0:td};tf=J.InsertDoc(this.elt,s7.get_DocNode(),te);return;},RemoveAttribute:function(tg){return this.elt.removeAttribute(tg);},RemoveClass:function(th){this.elt.className=this.elt.className.replace(new X("(\\s|^)"+th+"(\\s|$)")," ");},SetAttribute:function(ti,tj){return this.elt.setAttribute(ti,tj);},SetProperty:function(tk,tl){this.elt[tk]=tl;},SetStyle:function(tm,tn){this.elt.style[tm]=tn;},SetText:function(to){this.get_DocElemNode().Children={$:3};W.Set(this.rvUpdates,E.Const(null));this.elt.textContent=to;return;},SetValue:function(tp){this.elt.value=tp;},get_DocElemNode:function(){var tq,tr,ts;tq=this.docNode1;if(tq.$==1){ts=tq.$0;tr=ts;}else{tr=N.FailWith("Elt: Invalid docNode");}return tr;},get_Element:function(){return this.elt;},on:function(tt,tu){this.elt.addEventListener(tt,tu(this.elt),false);return this;},onView:function(tv,tw,tx){var ty,tz,tB=this;ty=h.Id();tz=function(tA){(tB.get_Element())[ty]=tA;return G.get_Empty();};this.Append(G.BindView(tz,tw));tB.elt.addEventListener(tv,function(tC){return((tx(tB.elt))(tC))(tB.elt[ty]);},false);return tB;}},{New:function(tD,tE,tF){var tG,tH,tI,tJ,tM,tO,tP;tG=J.CreateElemNode(tD,tE,tF.get_DocNode());tH=V.Create(tF.get_Updates());tI=w.Updates(tG.Attr);tJ=function(){return function(){return null;};};tM=function(tN){return t.Map2(tJ,tI,tN);};tO=tH.get_View();tP=E.Bind(tM,tO);return H.New1({$:1,$0:tG},tP,tD,tH,tI);},New1:function(tQ,tR,tS,tT){var tV;tV=$.New(this,G.New(tQ,tR));tV.docNode1=tQ;tV.elt=tS;tV.rvUpdates=tT;return tV;}}),Flow:$.Class({},{Bind:function(tW,tX){return{Render:function(tY){return function(tZ){return(tW.Render.call(null,tY))(function(t0){return(tX(t0).Render.call(null,tY))(tZ);});};}};},Map:function(t1,t2){return{Render:function(t3){return function(t4){return(t2.Render.call(null,t3))(function(t5){return t4(t1(t5));});};}};},Return:function(t6){return{Render:function(){return function(t8){return t8(t6);};}};},get_Do:function(){return Y.New();}}),Flow1:$.Class({},{Define:function(t9){return{Render:function(t_){return function(t$){var ua;ua=t9(t$);return W.Set(t_,ua);};}};},Embed:function(ub){var uc;uc=V.Create(G.get_Empty());(ub.Render.call(null,uc))(function(){});return G.EmbedView(uc.get_View());},Static:function(ue){return{Render:function(uf){return function(ug){W.Set(uf,ue);return ug(null);};}};}}),FlowBuilder:$.Class({Bind:function(uh,ui){return Z.Bind(uh,ui);},Return:function(uj){return Z.Return(uj);},ReturnFrom:function(uk){return uk;}},{New:function(){return $.New(this,{});}}),Html:{attr:$.Class({},{New:function(){return $.New(this,{});}})},Input:{ActivateButtonListener:$.Field(function(){var ul,ut;ul=function(um,un){var uo,up,uq,ur,us;uo=um.button;if(uo===0){uq=_0.MouseBtnSt1().Left;up=W.Set(uq,un);}else{if(uo===1){ur=_0.MouseBtnSt1().Middle;up=W.Set(ur,un);}else{if(uo===2){us=_0.MouseBtnSt1().Right;up=W.Set(us,un);}else{up=null;}}}return up;};if(!_0.MouseBtnSt1().Active){_0.MouseBtnSt1().Active=true;F.addEventListener("mousedown",function(uu){return ul(uu,true);},false);ut=F.addEventListener("mouseup",function(uv){return ul(uv,false);},false);}else{ut=null;}return ut;}),ActivateKeyListener:$.Field(function(){var uw,ux,uD;if(!_0.KeyListenerState().KeyListenerActive){ux=P(F).keydown(function(uy){var uz,uA,uB;uz=uy.which;uA=_0.KeyListenerState().LastPressed;W.Set(uA,uz);uB=V.Get(_0.KeyListenerState().KeysPressed);return!d.exists(function(uC){return uC===uz;},uB)?W.Set(_0.KeyListenerState().KeysPressed,A.append(uB,A.ofArray([uz]))):null;});uD=P(F).keyup(function(uE){var uF,uG,uH,uJ;uF=uE.which;uG=_0.KeyListenerState().KeysPressed;uH=function(uI){return uI!==uF;};uJ=function(uK){return A.filter(uH,uK);};return W.Update(uG,uJ);});uw=void uD;}else{uw=null;}return uw;}),KeyListenerState:$.Field(function(){return{KeysPressed:V.Create($.New(O,{$:0})),KeyListenerActive:false,LastPressed:V.Create(-1)};}),Keyboard:$.Class({},{IsPressed:function(uL){var uM;_0.ActivateKeyListener();uM=function(uN){return uN===uL;};return t.Map(function(uO){return d.exists(uM,uO);},_0.KeyListenerState().KeysPressed.get_View());},get_KeysPressed:function(){_0.ActivateKeyListener();return _0.KeyListenerState().KeysPressed.get_View();},get_LastPressed:function(){_0.ActivateKeyListener();return _0.KeyListenerState().LastPressed.get_View();}}),Mouse:$.Class({},{get_LeftPressed:function(){_0.ActivateButtonListener();return _0.MouseBtnSt1().Left.get_View();},get_MiddlePressed:function(){_0.ActivateButtonListener();return _0.MouseBtnSt1().Middle.get_View();},get_MousePressed:function(){_0.ActivateButtonListener();return E.Apply(E.Apply(E.Apply(E.Const(function(uP){return function(uQ){return function(uR){return(uP?true:uQ)?true:uR;};};}),_0.MouseBtnSt1().Left.get_View()),_0.MouseBtnSt1().Middle.get_View()),_0.MouseBtnSt1().Right.get_View());},get_Position:function(){var uS,uW;uS=function(uT){var uU,uV;uU=_0.MousePosSt1().PosV;uV=[uT.clientX,uT.clientY];return W.Set(uU,uV);};if(!_0.MousePosSt1().Active){F.addEventListener("mousemove",uS,false);uW=void(_0.MousePosSt1().Active=true);}else{uW=null;}return _0.MousePosSt1().PosV.get_View();},get_RightPressed:function(){_0.ActivateButtonListener();return _0.MouseBtnSt1().Right.get_View();}}),MouseBtnSt1:$.Field(function(){return{Active:false,Left:V.Create(false),Middle:V.Create(false),Right:V.Create(false)};}),MousePosSt1:$.Field(function(){return{Active:false,PosV:V.Create([0,0])};})},Interpolation1:$.Class({},{get_Double:function(){return $.New(_1,{$:0});}}),Key:$.Class({},{Fresh:function(){return $.New(_2,{$:0,$0:h.Int()});}}),ListModel:$.Class({Add:function(uX){var uY,uZ,u0,u1,u3=this,u4;uY=this.Var.get_Value();if(!_3.Contains(this.get_Key(),uX,uY)){u0=this.Storage;uZ=this.Var.set_Value(u0.Add(uX,uY));}else{u1=c.findINdex(function(u2){return m.Equals((u3.get_Key())(u2),(u3.get_Key())(uX));},uY);u4=u3.Storage;uZ=u3.Var.set_Value(u4.SetAt(u1,uX,uY));}return uZ;},Clear:function(){return this.Var.set_Value(this.Storage.Set(d.empty()));},ContainsKey:function(u5){var u7=this;return d.exists(function(u6){return m.Equals(u7.key.call(null,u6),u5);},u7.Var.get_Value());},ContainsKeyAsView:function(u8){var u9,u$=this,va,vc;u9=function(u_){return m.Equals(u$.key.call(null,u_),u8);};va=function(vb){return d.exists(u9,vb);};vc=u$.Var.get_View();return t.Map(va,vc);},Find:function(vd){return c.find(vd,this.Var.get_Value());},FindAsView:function(ve){var vf,vh;vf=function(vg){return c.find(ve,vg);};vh=this.Var.get_View();return t.Map(vf,vh);},FindByKey:function(vi){var vk=this;return c.find(function(vj){return m.Equals(vk.key.call(null,vj),vi);},vk.Var.get_Value());},FindByKeyAsView:function(vl){var vm,vo=this,vp,vr;vm=function(vn){return m.Equals(vo.key.call(null,vn),vl);};vp=function(vq){return c.find(vm,vq);};vr=vo.Var.get_View();return t.Map(vp,vr);},Iter:function(vs){return c.iter(vs,this.Var.get_Value());},Lens:function(vt){var vu,vw;vu=function(vv){return vv;};vw=function(){return function(vy){return vy;};};return this.LensInto(vu,vw,vt);},LensInto:function(vz,vA,vB){return _4.New(this,vB,vz,vA);},Remove:function(vC){var vD,vE,vF,vG,vH,vI;vD=this.Var.get_Value();if(_3.Contains(this.key,vC,vD)){vF=this.key;vG=vF(vC);vH=this.Storage;vI=function(vJ){return!m.Equals(vF(vJ),vG);};vE=this.Var.set_Value(vH.RemoveIf(vI,vD));}else{vE=null;}return vE;},RemoveBy:function(vK){var vL,vM,vP;vL=this.Storage;vM=function(vN){var vO;vO=vK(vN);return!vO;};vP=this.Var.get_Value();return this.Var.set_Value(vL.RemoveIf(vM,vP));},RemoveByKey:function(vQ){var vR,vS,vU=this,vV;vR=this.Storage;vS=function(vT){return!m.Equals((vU.get_Key())(vT),vQ);};vV=vU.Var.get_Value();return this.Var.set_Value(vR.RemoveIf(vS,vV));},Set:function(vW){return this.Var.set_Value(this.Storage.Set(vW));},TryFind:function(vX){return c.tryFind(vX,this.Var.get_Value());},TryFindAsView:function(vY){var vZ,v1;vZ=function(v0){return c.tryFind(vY,v0);};v1=this.Var.get_View();return t.Map(vZ,v1);},TryFindByKey:function(v2){var v4=this;return c.tryFind(function(v3){return m.Equals(v4.key.call(null,v3),v2);},v4.Var.get_Value());},TryFindByKeyAsView:function(v5){var v6,v8=this,v9,v$;v6=function(v7){return m.Equals(v8.key.call(null,v7),v5);};v9=function(v_){return c.tryFind(v6,v_);};v$=v8.Var.get_View();return t.Map(v9,v$);},UpdateAll:function(wa){var wb,wc,wk=this;wb=this.Var;wc=function(wd){var we;we=function(wf){return function(wg){var wh,wj;wh=function(wi){return c.set(wd,wf,wi);};wj=wa(wg);return s.iter(wh,wj);};};c.iteri(we,wd);return wk.Storage.Set(wd);};return wb.Update(wc);},UpdateBy:function(wl,wm){var wn,wo,wq=this,wr,ws,wt,wu,wv,ww;wn=this.Var.get_Value();wo=c.tryFindIndex(function(wp){return m.Equals(wq.key.call(null,wp),wm);},wn);if(wo.$==1){ws=wo.$0;wt=wl(c.get(wn,ws));if(wt.$==1){wv=wt.$0;ww=wq.Storage;wu=wq.Var.set_Value(ww.SetAt(ws,wv,wn));}else{wu=null;}wr=wu;}else{wr=null;}return wr;},Wrap:function(wx,wy,wz){return _5.Wrap(this,wx,wy,wz);},get_Key:function(){return this.key;},get_Length:function(){return c.length(this.Var.get_Value());},get_LengthAsView:function(){var wA,wC;wA=function(wB){return c.length(wB);};wC=this.Var.get_View();return t.Map(wA,wC);},get_View:function(){return this.view;}},{Create:function(wD,wE){var wF,wG;wF=d.toArray(wE);wG=_6.InMemory(wF);return _7.CreateWithStorage(wD,wG);},CreateWithStorage:function(wH,wI){var wJ,wK,wL,wM,wP,wQ;wJ=I.distinctBy(wH,wI.Init());wK=d.toArray(wJ);wL=V.Create(wK);wM=function(wN){var wO;wO=wI.Set(wN);return wN.slice();};wP=wL.get_View();wQ=t.Map(wM,wP);return $.New(_7,{key:wH,Var:wL,Storage:wI,view:wQ});}}),ListModel1:$.Class({},{FromSeq:function(wR){var wS;wS=function(wT){return wT;};return _7.Create(wS,wR);},Key:function(wU){return wU.key;},View:function(wV){return wV.view;},Wrap:function(wW,wX,wY,wZ){var w0,w1,w4,w5,w6,w7,xd,xl,xm;w0=[_8.New12()];w1=function(w2){var w3;w3=wY(w2);w0[0].set_Item((wW.get_Key())(w2),w3);return w3;};w4=wW.Var.get_Value();w5=c.map(w1,w4);w6=wW.Var;w7=function(w8){var w9,w_,xc;w9=_8.New12();w_=function(w$){var xa,xb;xa=(wW.get_Key())(w$);xb=w0[0].ContainsKey(xa)?(wZ(w0[0].get_Item(xa)))(w$):wY(w$);w9.set_Item(xa,xb);return xb;};xc=c.map(w_,w8);w0[0]=w9;return xc;};xd=function(){return function(xf){var xg,xh,xk;xg=_8.New12();xh=function(xi){var xj;xj=wX(xi);xg.set_Item((wW.get_Key())(xj),xi);return xj;};xk=c.map(xh,xf);w0[0]=xg;return xk;};};xl=W.Lens(w6,w7,xd);xm=wW.get_Key();return $.New(_7,{key:function(xn){return xm(wX(xn));},Var:xl,Storage:_6.InMemory(w5),view:t.Map(function(xo){return xo;},xl.get_View())});}}),ListModels:{Contains:function(xp,xq,xr){var xs;xs=xp(xq);return d.exists(function(xt){return m.Equals(xp(xt),xs);},xr);}},Model:$.Class({get_View:function(){return _9.View(this);}},{Create:function(xu,xv){var xw,xx,xy;xw=V.Create(xv);xx=xw.get_View();xy=t.Map(xu,xx);return $.New(_,{$:0,$0:xw,$1:xy});},Update:function(xz,xA){var xB,xC;xB=xA.$0;xC=function(xD){xz(xD);return xD;};return W.Update(xB,xC);}}),Model1:$.Class({},{View:function(xE){var xF;xF=xE.$1;return xF;}}),ReactiveExtensions:$.Class({},{New:function(){return $.New(this,{});}}),RefImpl:$.Class({Get:function(){return this.get.call(null,this.baseRef.Get());},Set:function(xG){var xI=this;return this.baseRef.Update(function(xH){return(xI.update.call(null,xH))(xG);});},Update:function(xJ){var xL=this;return this.baseRef.Update(function(xK){return(xL.update.call(null,xK))(xJ(xL.get.call(null,xK)));});},UpdateMaybe:function(xM){var xO=this;return this.baseRef.UpdateMaybe(function(xN){return s.map(xO.update.call(null,xN),xM(xO.get.call(null,xN)));});},get_Id:function(){return this.id;},get_Value:function(){return this.get.call(null,this.baseRef.Get());},get_View:function(){var xP,xQ;xP=this.get;xQ=this.baseRef.get_View();return t.Map(xP,xQ);},set_Value:function(xR){var xT=this;return this.baseRef.Update(function(xS){return(xT.update.call(null,xS))(xR);});}},{New:function(xU,xV,xW){var xX;xX=$.New(this,{});xX.baseRef=xU;xX.get=xV;xX.update=xW;xX.id=h.Id();return xX;}}),RefImpl1:$.Class({Get:function(){return this.get.call(null,this.m.FindByKey(this.key));},Set:function(xY){var xZ,x0,x2=this,x3;xZ=this.m;x0=function(x1){return{$:1,$0:(x2.update.call(null,x1))(xY)};};x3=x2.key;return xZ.UpdateBy(x0,x3);},Update:function(x4){var x5,x6,x8=this,x9;x5=this.m;x6=function(x7){return{$:1,$0:(x8.update.call(null,x7))(x4(x8.get.call(null,x7)))};};x9=x8.key;return x5.UpdateBy(x6,x9);},UpdateMaybe:function(x_){var x$,ya,yc=this,yd;x$=this.m;ya=function(yb){return s.map(yc.update.call(null,yb),x_(yc.get.call(null,yb)));};yd=yc.key;return x$.UpdateBy(ya,yd);},get_Id:function(){return this.id;},get_Value:function(){return this.Get();},get_View:function(){var ye,yf;ye=this.get;yf=this.m.FindByKeyAsView(this.key);return t.Map(ye,yf);},set_Value:function(yg){return this.Set(yg);}},{New:function(yh,yi,yj,yk){var yl;yl=$.New(this,{});yl.m=yh;yl.key=yi;yl.get=yj;yl.update=yk;yl.id=h.Id();return yl;}}),Route:{Append:function(ym,yn){var yo,yp;yo=ym.$0;yp=yn.$0;return{$:0,$0:o.Append(yo,yp)};},FromList:function(yq){var yr,ys;yr=c.ofSeq(yq);ys=o.FromArray(yr);return{$:0,$0:ys};},MakeHash:function(yt){var yu,yv,yw;yu=yt.$0;yv=o.ToArray(yu);yw=c.map(function(yx){return ba(yx);},yv);return bb.concat("/",yw);},NoHash:function(yy){return bb.StartsWith(yy,"#")?yy.substring(1):yy;},ParseHash:function(yz){var yA,yB,yD;yA=bb.SplitChars(bc.NoHash(yz),[47],1);yB=c.map(function(yC){return bd(yC);},yA);yD=o.FromArray(yB);return{$:0,$0:yD};},SameHash:function(yE,yF){return bc.NoHash(yE)===bc.NoHash(yF);},ToList:function(yG){var yH,yI;yH=yG.$0;yI=o.ToArray(yH);return A.ofArray(yI);}},RouteMap1:$.Class({},{Create:function(yJ,yK){return{Des:yK,Ser:yJ};},Install:function(yL){return be.InstallMap(yL);}}),Router:$.Class({},{Dir:function(yM,yN){var yO;yO=bf.Merge(yN);return bf.Prefix(yM,yO);},Install:function(yP,yQ){return be.Install(yP,yQ);},Merge:function(yR){return be.MergeRouters(yR);},Prefix:function(yS,yT){var yU,yV;yU=yT.$0;yV=yT.$1;return{$:0,$0:yU,$1:bg.Prefix(yS,yV)};}}),Router1:$.Class({},{Route:function(yW,yX,yY){return be.DefineRoute(yW,yX,yY);}}),Routing:{ComputeBodies:function(yZ){var y0,y1,y3;y0=_8.New12();y1=function(y2){return y0.set_Item(y2.RouteId,y2);};y3=bg.ToArray(yZ);c.iter(y1,y3);return y0;},DefineRoute:function(y4,y5,y6){var y7,y8,y9,y_;y7=V.Create(y5);y8=h.Int();y9=(y6({$:0,$0:y8}))(y7);y_=bg.Leaf({$:0,$0:y8,$1:function(y$){var za,zc;za=function(zb){return y$.UpdateRoute.call(null,be.DoLink(y4,zb));};zc=y7.get_View();E.Sink(za,zc);return{OnRouteChanged:function(zd){return W.Set(y7,be.DoRoute(y4,zd));},OnSelect:function(){return y$.UpdateRoute.call(null,be.DoLink(y4,V.Get(y7)));},RouteId:y8,RouteValue:y9};}});return{$:0,$0:{$:1,$0:y9},$1:y_};},DoLink:function(zf,zg){return bc.FromList(zf.Ser.call(null,zg));},DoRoute:function(zh,zi){return zh.Des.call(null,bc.ToList(zi));},Install:function(zj,zk){var zl,zm,zn,zq,zr,zx,zy,zA,zB,zC,zD,zE,zF,zG,zH,zJ,zK,zR;zl=zk.$0;zm=zk.$1;zn=be.InstallMap({Des:function(zo){return bc.FromList(zo);},Ser:function(zp){return bc.ToList(zp);}});zq={Bodies:undefined,CurrentRoute:zn,CurrentSite:0,Selection:undefined};zr=function(zs){return function(zt){var zu,zv;zu=zt.$1;zv=zt.$0;return zu({UpdateRoute:function(zw){return be.OnInternalSiteUpdate(zq,zv,zs,zw);}});};};zx=bg.Map(zr,zm);zq.Bodies=be.ComputeBodies(zx);zy=function(zz){return bg.Lookup(zx,bc.ToList(zz));};zA=zy(V.Get(zn));if(zA.$==0){zD=zA.$0;zA.$1;zq.CurrentSite=zD.RouteId;zC=V.Create(zD.RouteValue);}else{if(zl.$==1){zG=zl.$0;zF=zG;}else{zF=N.FailWith("Site.Install fails on empty site");}zE=zF;zC=V.Create(zE);}zB=zC;zq.Selection=zB;zH=function(zI){return be.OnSelectSite(zq,zj(zI));};zJ=zB.get_View();E.Sink(zH,zJ);zK=function(zL){var zM,zN,zO,zP,zQ;zM=zy(zL);if(zM.$==1){zN=null;}else{zO=zM.$0;zP=zM.$1;zQ=bc.FromList(zP);zN=be.OnGlobalRouteChange(zq,zO,zQ);}return zN;};zK(V.Get(zn));zR=zn.get_View();E.Sink(zK,zR);return zB;},InstallMap:function(zS){var zT,zW,zX,z0,z2,z5;zT=function(){var zV;zV=bc.ParseHash(bh.location.hash);return zS.Des.call(null,bc.ToList(zV));};zW=V.Create(zT(null));zX=function(zY){var zZ;zZ=V.Get(zW);return!m.Equals(zS.Ser.call(null,zZ),zS.Ser.call(null,zY))?W.Set(zW,zY):null;};z0=function(){return zX(zT(null));};bh.onpopstate=z0;bh.onhashchange=z0;z2=function(z3){var z4;z4=bc.MakeHash(bc.FromList(zS.Ser.call(null,z3)));return!bc.SameHash(bh.location.hash,z4)?void(bh.location.hash=z4):null;};z5=zW.get_View();E.Sink(z2,z5);return zW;},MergeRouters:function(z6){var z7,z8,z$,Aa,Ab,Ae,Af,Ag;z7=d.toArray(z6);z8=function(z9){var z_;z_=z9.$1;return z_;};z$=d.map(z8,z7);Aa=bg.Merge(z$);Ab=function(Ac){var Ad;Ad=Ac.$0;return Ad;};Ae=d.tryPick(Ab,z7);if(Aa.$==1){Ag=Aa.$0;Af={$:0,$0:Ae,$1:Ag};}else{Af=N.FailWith("Invalid Site.Merge: need more prefix disambiguation");}return Af;},OnGlobalRouteChange:function(Ah,Ai,Aj){var Ak;if(Ah.CurrentSite!==Ai.RouteId){Ah.CurrentSite=Ai.RouteId;Ak=W.Set(Ah.Selection,Ai.RouteValue);}else{Ak=null;}return Ai.OnRouteChanged.call(null,Aj);},OnInternalSiteUpdate:function(Al,Am,An,Ao){var Ap,Aq;if(Al.CurrentSite===Am){Aq=bc.Append(bc.FromList(An),Ao);Ap=be.SetCurrentRoute(Al,Aq);}else{Ap=null;}return Ap;},OnSelectSite:function(Ar,As){var At,Au;At=As.$0;if(Ar.CurrentSite!==At){Ar.CurrentSite=At;Au=Ar.Bodies.get_Item(At).OnSelect.call(null,null);}else{Au=null;}return Au;},SetCurrentRoute:function(Av,Aw){return!m.Equals(V.Get(Av.CurrentRoute),Aw)?W.Set(Av.CurrentRoute,Aw):null;}},Snap1:{Bind:function(Ax,Ay){var Az,AA,AC;Az=bi.Create();AA=function(){return bi.MarkObsolete(Az);};AC=function(AD){var AE;AE=Ax(AD);return bi.When(AE,function(AF){return(bi.IsForever(AE)?bi.IsForever(Ay):false)?bi.MarkForever(Az,AF):bi.MarkReady(Az,AF);},AA);};bi.When(Ay,AC,AA);return Az;},Create:function(){return bi.Make({$:3,$0:[],$1:[]});},CreateForever:function(AG){return bi.Make({$:0,$0:AG});},CreateForeverAsync:function(AH){var AI,AJ;AI=bi.Make({$:3,$0:[],$1:[]});AJ=a.Delay(function(){return a.Bind(AH,function(AL){return a.Return(bi.MarkForever(AI,AL));});});a.Start(AJ,{$:0});return AI;},CreateWithValue:function(AM){return bi.Make({$:2,$0:AM,$1:[]});},IsForever:function(AN){var AO;AO=AN.State;return AO.$==0?true:false;},IsObsolete:function(AP){var AQ;AQ=AP.State;return AQ.$==1?true:false;},Make:function(AR){return{State:AR};},Map:function(AS,AT){var AU,AV,AW,AX;AU=AT.State;if(AU.$==0){AW=AU.$0;AV=bi.CreateForever(AS(AW));}else{AX=bi.Create();bi.When(AT,function(AY){var AZ;AZ=AS(AY);return bi.MarkDone(AX,AT,AZ);},function(){return bi.MarkObsolete(AX);});AV=AX;}return AV;},Map2:function(A1,A2,A3){var A4,A5,A6,A7,A8,A9,A_,A$,Bb,Bc,Bd,Be,Bg;A4=[A2.State,A3.State];if(A4[0].$==0){if(A4[1].$==0){A7=A4[0].$0;A8=A4[1].$0;A6=bi.CreateForever((A1(A7))(A8));}else{A9=A4[0].$0;A6=bi.Map(A1(A9),A3);}A5=A6;}else{if(A4[1].$==0){A$=A4[1].$0;A_=bi.Map(function(Ba){return(A1(Ba))(A$);},A2);}else{Bb=bi.Create();Bc=[{$:0}];Bd=[{$:0}];Be=function(){Bc[0]={$:0};Bd[0]={$:0};return bi.MarkObsolete(Bb);};Bg=function(){var Bi,Bj,Bk,Bl,Bm;Bi=[Bc[0],Bd[0]];if(Bi[0].$==1){if(Bi[1].$==1){Bl=Bi[0].$0;Bm=Bi[1].$0;Bk=(bi.IsForever(A2)?bi.IsForever(A3):false)?bi.MarkForever(Bb,(A1(Bl))(Bm)):bi.MarkReady(Bb,(A1(Bl))(Bm));}else{Bk=null;}Bj=Bk;}else{Bj=null;}return Bj;};bi.When(A2,function(Bn){Bc[0]={$:1,$0:Bn};return Bg(null);},Be);bi.When(A3,function(Bo){Bd[0]={$:1,$0:Bo};return Bg(null);},Be);A_=Bb;}A5=A_;}return A5;},Map3:function(Bp,Bq,Br,Bs){var Bt,Bu,Bv,Bw,Bx,By,Bz,BA,BB,BD,BE,BF,BH,BK,BL,BM,BN,BP,BS,BT,BW,BX,BY,BZ,B0,B2;Bt=[Bq.State,Br.State,Bs.State];if(Bt[0].$==0){if(Bt[1].$==0){if(Bt[2].$==0){Bx=Bt[0].$0;By=Bt[1].$0;Bz=Bt[2].$0;Bw=bi.CreateForever(((Bp(Bx))(By))(Bz));}else{BA=Bt[0].$0;BB=Bt[1].$0;Bw=bi.Map(function(BC){return((Bp(BA))(BB))(BC);},Bs);}Bv=Bw;}else{if(Bt[2].$==0){BE=Bt[0].$0;BF=Bt[2].$0;BD=bi.Map(function(BG){return((Bp(BE))(BG))(BF);},Br);}else{BH=Bt[0].$0;BD=bi.Map2(function(BI){return function(BJ){return((Bp(BH))(BI))(BJ);};},Br,Bs);}Bv=BD;}Bu=Bv;}else{if(Bt[1].$==0){if(Bt[2].$==0){BM=Bt[1].$0;BN=Bt[2].$0;BL=bi.Map(function(BO){return((Bp(BO))(BM))(BN);},Bq);}else{BP=Bt[1].$0;BL=bi.Map2(function(BQ){return function(BR){return((Bp(BQ))(BP))(BR);};},Bq,Bs);}BK=BL;}else{if(Bt[2].$==0){BT=Bt[2].$0;BS=bi.Map2(function(BU){return function(BV){return((Bp(BU))(BV))(BT);};},Bq,Br);}else{BW=bi.Create();BX=[{$:0}];BY=[{$:0}];BZ=[{$:0}];B0=function(){BX[0]={$:0};BY[0]={$:0};BZ[0]={$:0};return bi.MarkObsolete(BW);};B2=function(){var B4,B5,B6,B7,B8,B9,B_;B4=[BX[0],BY[0],BZ[0]];if(B4[0].$==1){if(B4[1].$==1){if(B4[2].$==1){B8=B4[0].$0;B9=B4[1].$0;B_=B4[2].$0;B7=((bi.IsForever(Bq)?bi.IsForever(Br):false)?bi.IsForever(Bs):false)?bi.MarkForever(BW,((Bp(B8))(B9))(B_)):bi.MarkReady(BW,((Bp(B8))(B9))(B_));}else{B7=null;}B6=B7;}else{B6=null;}B5=B6;}else{B5=null;}return B5;};bi.When(Bq,function(B$){BX[0]={$:1,$0:B$};return B2(null);},B0);bi.When(Br,function(Ca){BY[0]={$:1,$0:Ca};return B2(null);},B0);bi.When(Bs,function(Cb){BZ[0]={$:1,$0:Cb};return B2(null);},B0);BS=BW;}BK=BS;}Bu=BK;}return Bu;},MapAsync:function(Cc,Cd){var Ce;Ce=bi.Create();bi.When(Cd,function(Cf){return bj.StartTo(Cc(Cf),function(Cg){return bi.MarkDone(Ce,Cd,Cg);});},function(){return bi.MarkObsolete(Ce);});return Ce;},MapCached:function(Ci,Cj,Ck){var Cl;Cl=function(Cm){var Cn,Co,Cp,Cq,Cr,Cs,Ct;Cn=Ci[0];if(Cn.$==1){Cn.$0[1];Cp=Cn.$0[0];if(m.Equals(Cm,Cp)){Cn.$0[0];Cr=Cn.$0[1];Cq=Cr;}else{Cs=Cj(Cm);Ci[0]={$:1,$0:[Cm,Cs]};Cq=Cs;}Co=Cq;}else{Ct=Cj(Cm);Ci[0]={$:1,$0:[Cm,Ct]};Co=Ct;}return Co;};return bi.Map(Cl,Ck);},MarkDone:function(Cu,Cv,Cw){return bi.IsForever(Cv)?bi.MarkForever(Cu,Cw):bi.MarkReady(Cu,Cw);},MarkForever:function(Cx,Cy){var Cz,CA,CB;Cz=Cx.State;if(Cz.$==3){CB=Cz.$0;Cx.State={$:0,$0:Cy};CA=d.iter(function(CC){return CC(Cy);},CB);}else{CA=null;}return CA;},MarkObsolete:function(CD){var CE,CF,CG,CI;CE=CD.State;if(CE.$==1){CF=null;}else{if(CE.$==2){CG=CE.$1;CD.State={$:1};CF=d.iter(function(CH){return CH(null);},CG);}else{if(CE.$==3){CI=CE.$1;CD.State={$:1};CF=d.iter(function(CJ){return CJ(null);},CI);}else{CF=null;}}}return CF;},MarkReady:function(CK,CL){var CM,CN,CO,CP;CM=CK.State;if(CM.$==3){CO=CM.$1;CP=CM.$0;CK.State={$:2,$0:CL,$1:CO};CN=d.iter(function(CQ){return CQ(CL);},CP);}else{CN=null;}return CN;},Sequence:function(CR){var CS,CT,CU,CV,CW,CX,CY,C0,C3;if(d.isEmpty(CR)){CS=bi.CreateForever(d.empty());}else{CT=bi.Create();CU=c.ofSeq(CR);CV=c.length(CU);CW=[0];CX=[[]];CY=function(){CW[0]=0;CX[0]=[];return bi.MarkObsolete(CT);};C0=function(){return CW[0]===CV?d.forall(function(C2){return bi.IsForever(C2);},CU)?bi.MarkForever(CT,CX[0]):bi.MarkReady(CT,CX[0]):null;};C3=function(C4){return function(C5){return bi.When(C5,function(C6){CX[0][C4]=C6;bk.incr(CW);return C0(null);},CY);};};c.iteri(C3,CU);CS=CT;}return CS;},SnapshotOn:function(C7,C8){var C9,C_,C$,Da,Dc;C9=bi.Create();C_=[{$:0}];C$=[false];Da=function(){C_[0]={$:0};return bi.MarkObsolete(C9);};Dc=function(){var De,Df,Dg,Dh,Di,Dj,Dk,Dl,Dm;if(C$[0]){Df=C_[0];if(Df.$==1){Df.$0;if(bi.IsForever(C7)){Di=Df.$0;Dh=bi.MarkForever(C9,Di);}else{if(Df.$==1){Dk=Df.$0;Dj=bi.MarkReady(C9,Dk);}else{Dj=null;}Dh=Dj;}Dg=Dh;}else{if(Df.$==1){Dm=Df.$0;Dl=bi.MarkReady(C9,Dm);}else{Dl=null;}Dg=Dl;}De=Dg;}else{De=null;}return De;};bi.When(C7,function(){C$[0]=true;return Dc(null);},Da);bi.When(C8,function(Do){C_[0]={$:1,$0:Do};return Dc(null);},function(){});return C9;},When:function(Dq,Dr,Ds){var Dt,Du,Dv,Dw,Dx,Dy,Dz;Dt=Dq.State;if(Dt.$==1){Du=Ds(null);}else{if(Dt.$==2){Dv=Dt.$0;Dw=Dt.$1;Dw.push(Ds);Du=Dr(Dv);}else{if(Dt.$==3){Dx=Dt.$1;Dy=Dt.$0;Dy.push(Dr);Du=Dx.push(Ds);}else{Dz=Dt.$0;Du=Dr(Dz);}}}return Du;}},Storage1:{ArrayStorage:$.Class({Add:function(DA,DB){var DC;DC=DB.push(DA);return DB;},Init:function(){return this.init;},RemoveIf:function(DD,DE){return c.filter(DD,DE);},Set:function(DF){return d.toArray(DF);},SetAt:function(DG,DH,DI){c.set(DI,DG,DH);return DI;}},{New:function(DJ){var DK;DK=$.New(this,{});DK.init=DJ;return DK;}}),InMemory:function(DL){return bl.New(DL);},LocalStorage:function(DM,DN){return bm.New(DM,DN);},LocalStorageBackend:$.Class({Add:function(DO,DP){var DQ;DQ=DP.push(DO);return this.set(DP);},Init:function(){var DR,DS,DT,DU,DV,DW;DR=this.storage.getItem(this.id);if(DR===null){DS=[];}else{try{DU=bn.parse(DR);DV=this.serializer.Decode;DT=c.map(DV,DU);}catch(DW){DT=[];}DS=DT;}return DS;},RemoveIf:function(DX,DY){var DZ;DZ=c.filter(DX,DY);return this.set(DZ);},Set:function(D0){var D1;D1=d.toArray(D0);return this.set(D1);},SetAt:function(D2,D3,D4){c.set(D4,D2,D3);return this.set(D4);},clear:function(){return this.storage.removeItem(this.id);},set:function(D5){var D6,D7;D6=this.serializer.Encode;D7=c.map(D6,D5);this.storage.setItem(this.id,bn.stringify(D7));return D5;}},{New:function(D8,D9){var D_;D_=$.New(this,{});D_.id=D8;D_.serializer=D9;D_.storage=bh.localStorage;return D_;}})},String:{isBlank:function(D$){return bb.forall(function(Ea){return bo.IsWhiteSpace(Ea);},D$);}},Submitter:$.Class({Trigger:function(){return W.Set(this["var"],null);},get_Input:function(){return this.input;},get_View:function(){return this.view;}},{Create:function(Eb,Ec){return bp.New(Eb,Ec);},New:function(Ed,Ee){var Ef,Eg,Eh;Ef=$.New(this,{});Ef.input=Ed;Ef["var"]=V.Create(null);Eg=Ef["var"].get_View();Eh=Ef.input;Ef.view=t.SnapshotOn(Ee,Eg,Eh);return Ef;}}),Submitter1:$.Class({},{CreateOption:function(Ei){var Ej;Ej=function(Ek){return{$:1,$0:Ek};};return bp.New(t.Map(Ej,Ei),{$:0});},Input:function(El){return El.get_Input();},Trigger:function(Em){return Em.Trigger();},View:function(En){return En.get_View();}}),Trans:$.Class({},{AnimateChange:function(Eo,Ep,Eq){return(Eo.TChange.call(null,Ep))(Eq);},AnimateEnter:function(Er,Es){return Er.TEnter.call(null,Es);},AnimateExit:function(Et,Eu){return Et.TExit.call(null,Eu);}}),Trans1:$.Class({},{CanAnimateChange:function(Ev){return(Ev.TFlags&1)!==0;},CanAnimateEnter:function(Ew){return(Ew.TFlags&2)!==0;},CanAnimateExit:function(Ex){return(Ex.TFlags&4)!==0;},Change:function(Ey,Ez){var EA;EA=Ez.TFlags|1;return{TChange:Ey,TEnter:Ez.TEnter,TExit:Ez.TExit,TFlags:EA};},Create:function(EB){return{TChange:EB,TEnter:function(EC){return n.Const(EC);},TExit:function(ED){return n.Const(ED);},TFlags:1};},Enter:function(EE,EF){var EG;EG=EF.TFlags|2;return{TChange:EF.TChange,TEnter:EE,TExit:EF.TExit,TFlags:EG};},Exit:function(EH,EI){var EJ;EJ=EI.TFlags|4;return{TChange:EI.TChange,TEnter:EI.TEnter,TExit:EH,TFlags:EJ};},Trivial:function(){return{TChange:function(){return function(EL){return n.Const(EL);};},TEnter:function(EM){return n.Const(EM);},TExit:function(EN){return n.Const(EN);},TFlags:0};}}),Trie1:{AllSome:function(EO){var EP,EQ,ER,ES,ET,EU;EP=bq.Get(EO);EQ=bs.New2();ER=true;while(ER?EP.MoveNext():false){ES=EP.get_Current();if(ES.$==1){EU=ES.$0;ET=EQ.Add(EU);}else{ET=ER=false;}}return ER?{$:1,$0:EQ.ToArray()}:{$:0};},Empty:function(){return{$:1};},IsLeaf:function(EV){return EV.$==2?true:false;},Leaf:function(EW){return{$:2,$0:EW};},Look:function(EX,EY){var EZ,E0,E1,E2,E3,E4,E5,E6,E7,E8;EZ=[EY,EX];if(EZ[0].$==2){E1=EZ[0].$0;E0={$:0,$0:E1,$1:EX};}else{if(EZ[0].$==0){if(EZ[1].$==1){E3=EZ[1].$0;E4=EZ[1].$1;E5=EZ[0].$0;E6=bt.TryFind(E3,E5);if(E6.$==0){E7={$:1};}else{E8=E6.$0;E7=bg.Look(E4,E8);}E2=E7;}else{E2={$:1};}E0=E2;}else{E0={$:1};}}return E0;},Lookup:function(E9,E_){return bg.Look(d.toList(E_),E9);},Map:function(E$,Fa){return bg.MapLoop($.New(O,{$:0}),E$,Fa);},MapLoop:function(Fb,Fc,Fd){var Fe,Ff,Fg,Fh,Fk;if(Fd.$==1){Fe={$:1};}else{if(Fd.$==2){Ff=Fd.$0;Fe={$:2,$0:(Fc(Fb))(Ff)};}else{Fg=Fd.$0;Fh=function(Fi){return function(Fj){return bg.MapLoop(A.append(Fb,A.ofArray([Fi])),Fc,Fj);};};Fk=bt.Map(Fh,Fg);Fe=bg.TrieBranch(Fk);}}return Fe;},Mapi:function(Fl,Fm){var Fn,Fo;Fn=[0];Fo=function(){var Fq;Fq=Fn[0];Fn[0]=Fq+1;return Fq;};return bg.Map(function(Fr){return(Fl(Fo(null)))(Fr);},Fm);},Merge:function(Fs){var Ft,Fu,Fv,Fx,Fy,FC,FE,FG,FH;Ft=d.toArray(Fs);Fu=c.length(Ft);if(Fu===0){Fv={$:1,$0:{$:1}};}else{if(Fu===1){Fv={$:1,$0:c.get(Ft,0)};}else{if(d.exists(function(Fw){return bg.IsLeaf(Fw);},Ft)){Fx={$:0};}else{Fy=function(Fz){var FA,FB;if(Fz.$==0){FB=Fz.$0;FA={$:1,$0:FB};}else{FA={$:0};}return FA;};FC=function(FD){return bg.Merge(FD);};FE=function(FF){return bg.TrieBranch(FF);};FG=d.choose(Fy,Ft);FH=bg.MergeMaps(FC,FG);Fx=s.map(FE,FH);}Fv=Fx;}}return Fv;},MergeMaps:function(FI,FJ){var FK,FM,FR,FS,FT,FU,F1,F2,F3;FK=d.collect(function(FL){return bt.ToSeq(FL);},FJ);FM=function(FN){return function(FO){var FP,FQ;FP=FO[0];FQ=FO[1];return bg.MultiAdd(FP,FQ,FN);};};FR=bu.New1([]);FS=d.fold(FM,FR,FK);FT=bt.ToSeq(FS);FU=function(FV){var FW,FX,FY,F0;FW=FV[0];FX=FV[1];FY=function(FZ){return[FW,FZ];};F0=FI(FX);return s.map(FY,F0);};F1=d.map(FU,FT);F2=bg.AllSome(F1);F3=function(F4){return bt.OfArray(d.toArray(F4));};return s.map(F3,F2);},MultiAdd:function(F5,F6,F7){return F7.Add(F5,$.New(O,{$:1,$0:F6,$1:bg.MultiFind(F5,F7)}));},MultiFind:function(F8,F9){return N.DefaultArg(bt.TryFind(F8,F9),$.New(O,{$:0}));},Prefix:function(F_,F$){return bg.TrieBranch(bu.New1(A.ofArray([[F_,F$]])));},ToArray:function(Ga){var Gb,Gc;Gb=[];Gc=bg.Map(function(){return function(Ge){return Gb.push(Ge);};},Ga);return Gb.slice(0);},TrieBranch:function(Gf){return Gf.get_IsEmpty()?{$:1}:{$:0,$0:Gf};}},Var:$.Class({Get:function(){return V.Get(this);},Set:function(Gg){return W.Set(this,Gg);},Update:function(Gh){return W.Update(this,Gh);},UpdateMaybe:function(Gi){var Gj,Gk,Gl;Gj=Gi(V.Get(this));if(Gj.$==1){Gl=Gj.$0;Gk=W.Set(this,Gl);}else{Gk=null;}return Gk;},get_Id:function(){return"uinref"+$$.String(W.GetId(this));},get_Value:function(){return V.Get(this);},get_View:function(){var Gn=this;return{$:0,$0:function(){return W.Observe(Gn);}};},get_View1:function(){return this.get_View();},set_Value:function(Go){return W.Set(this,Go);}},{Create:function(Gp){return $.New(V,{Const:false,Current:Gp,Snap:bi.CreateWithValue(Gp),Id:h.Int()});},Get:function(Gq){return Gq.Current;}}),Var1:$.Class({},{GetId:function(Gr){return Gr.Id;},Lens:function(Gs,Gt,Gu){return bv.New(Gs,Gt,Gu);},Observe:function(Gv){return Gv.Snap;},Set:function(Gw,Gx){var Gy;if(Gw.Const){Gy=null;}else{bi.MarkObsolete(Gw.Snap);Gw.Current=Gx;Gy=void(Gw.Snap=bi.CreateWithValue(Gx));}return Gy;},SetFinal:function(Gz,GA){var GB;if(Gz.Const){GB=null;}else{Gz.Const=true;Gz.Current=GA;GB=void(Gz.Snap=bi.CreateForever(GA));}return GB;},Update:function(GC,GD){var GE;GE=GD(V.Get(GC));return W.Set(GC,GE);}}),View:$.Class({},{ConvertSeqNode:function(GF,GG){var GH,GI;GH=V.Create(GG);GI=GH.get_View();return{NValue:GF(GI),NVar:GH,NView:GI};},CreateLazy:function(GJ){var GK,GL;GK=[{$:0}];GL=function(){var GN,GO,GP,GQ,GR,GS,GT;GN=GK[0];if(GN.$==1){GP=GN.$0;if(!bi.IsObsolete(GP)){GR=GN.$0;GQ=GR;}else{GS=GJ(null);GK[0]={$:1,$0:GS};GQ=GS;}GO=GQ;}else{GT=GJ(null);GK[0]={$:1,$0:GT};GO=GT;}return GO;};return{$:0,$0:GL};},CreateLazy2:function(GU,GV,GW){var GX,GY;GX=GV.$0;GY=GW.$0;return t.CreateLazy(function(){var G0,G1;G0=GX(null);G1=GY(null);return(GU(G0))(G1);});},Map:function(G2,G3){var G4;G4=G3.$0;return t.CreateLazy(function(){var G6;G6=G4(null);return bi.Map(G2,G6);});},Map2:function(G7,G8,G9){var G_;G_=function(G$){return function(Ha){return bi.Map2(G7,G$,Ha);};};return t.CreateLazy2(G_,G8,G9);},MapAsync:function(Hb,Hc){var Hd;Hd=Hc.$0;return t.CreateLazy(function(){var Hf;Hf=Hd(null);return bi.MapAsync(Hb,Hf);});},MapAsync2:function(Hg,Hh,Hi){var Hj,Hl;Hj=function(Hk){return Hk;};Hl=t.Map2(Hg,Hh,Hi);return t.MapAsync(Hj,Hl);},MapCached:function(Hm,Hn){var Ho,Hp;Ho=Hn.$0;Hp=[{$:0}];return t.CreateLazy(function(){var Hr;Hr=Ho(null);return bi.MapCached(Hp,Hm,Hr);});},MapSeqCached:function(Hs,Ht){var Hu;Hu=function(Hv){return Hv;};return t.MapSeqCachedBy(Hu,Hs,Ht);},MapSeqCachedBy:function(Hw,Hx,Hy){var Hz,HA;Hz=[_8.New12()];HA=function(HB){var HC,HD,HE,HI,HJ;HC=Hz[0];HD=_8.New12();HE=function(HF){var HG,HH;HG=Hw(HF);HH=HC.ContainsKey(HG)?HC.get_Item(HG):Hx(HF);HD.set_Item(HG,HH);return HH;};HI=d.toArray(HB);HJ=c.map(HE,HI);Hz[0]=HD;return HJ;};return t.Map(HA,Hy);},MapSeqCachedView:function(HK,HL){var HM,HO;HM=function(HN){return HN;};HO=function(){return function(HQ){return HK(HQ);};};return t.MapSeqCachedViewBy(HM,HO,HL);},MapSeqCachedViewBy:function(HR,HS,HT){var HU,HV;HU=[_8.New12()];HV=function(HW){var HX,HY,HZ,H0,H9;HX=HU[0];HY=_8.New12();HZ=d.toArray(HW);H0=function(H1){var H2,H3,H4,H5,H6,H7;H2=HR(H1);if(HX.ContainsKey(H2)){H5=HX.get_Item(H2);H6=H5.NVar;W.Set(H6,H1);H4=H5;}else{H7=function(H8){return(HS(H2))(H8);};H4=t.ConvertSeqNode(H7,H1);}H3=H4;HY.set_Item(H2,H3);return H3.NValue;};H9=c.map(H0,HZ);HU[0]=HY;return H9;};return t.Map(HV,HT);},SnapshotOn:function(H_,H$,Ia){var Ib,Ic,Id,Ie;Ib=H$.$0;Ic=Ia.$0;Id=bi.CreateWithValue(H_);Ie=function(){var Ig,Ih,Ii,Ij;Ig=Ib(null);Ih=Ic(null);if(bi.IsObsolete(Id)){Ii=bi.SnapshotOn(Ig,Ih);}else{Ij=bi.SnapshotOn(Ig,Ih);bi.When(Ij,function(){},function(){return bi.MarkObsolete(Id);});Ii=Id;}return Ii;};return t.CreateLazy(Ie);},UpdateWhile:function(Im,In,Io){var Ip,Iq;Ip=[Im];Iq=function(Ir){return function(Is){Ir?void(Ip[0]=Is):null;return Ip[0];};};return t.Map2(Iq,In,Io);},get_Do:function(){return{$:0};}}),View1:$.Class({},{Apply:function(It,Iu){var Iv;Iv=function(Iw){return function(Ix){return Iw(Ix);};};return t.Map2(Iv,It,Iu);},Bind:function(Iy,Iz){return E.Join(t.Map(Iy,Iz));},Const:function(IA){var IB;IB=bi.CreateForever(IA);return{$:0,$0:function(){return IB;}};},ConstAsync:function(ID){var IE;IE=bi.CreateForeverAsync(ID);return{$:0,$0:function(){return IE;}};},Join:function(IG){var IH;IH=IG.$0;return t.CreateLazy(function(){var IJ,IM;IJ=function(IK){var IL;IL=IK.$0;return IL(null);};IM=IH(null);return bi.Bind(IJ,IM);});},Sequence:function(IN){return t.CreateLazy(function(){var IP,IS;IP=function(IQ){var IR;IR=IQ.$0;return IR(null);};IS=d.map(IP,IN);return bi.Sequence(IS);});},Sink:function(IT,IU){var IV,IW;IV=IU.$0;IW=function(){var IY;IY=IV(null);return bi.When(IY,IT,function(){return bj.Schedule(IW);});};return bj.Schedule(IW);},TryFinally:function(I0,I1){var I2;I2=I1.$0;return t.CreateLazy(function(){var I4;try{I4=I2(null);}finally{I0(null);}return I4;});},TryWith:function(I5,I6){var I7;I7=I6.$0;return t.CreateLazy(function(){var I9,I_,I$,Ja;try{I9=I7(null);}catch(I_){I$=I5(I_);Ja=I$.$0;I9=Ja(null);}return I9;});}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Concurrency);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Arrays);d=$.Safe($$.WebSharper.Seq);e=$.Safe($$.WebSharper.UI);f=$.Safe(e.Next);g=$.Safe(f.Abbrev);h=$.Safe(g.Fresh);i=$.Safe($$.WebSharper.Collections);j=$.Safe(i.HashSetProxy);k=$.Safe(g.HashSet);l=$.Safe(g.Slot1);m=$.Safe($$.WebSharper.Unchecked);n=$.Safe(f.An);o=$.Safe(f.AppendList1);p=$.Safe(f.Anims);q=$.Safe($$.requestAnimationFrame);r=$.Safe(f.Trans);s=$.Safe($$.WebSharper.Option);t=$.Safe(f.View);u=$.Safe($$.WebSharper.Lazy);v=$.Safe(f.Array);w=$.Safe(f.Attrs);x=$.Safe(f.DomUtility);y=$.Safe(f.AttrModule);z=$.Safe(f.AttrProxy);A=$.Safe($$.WebSharper.List);B=$.Safe(f.AnimatedAttrNode);C=$.Safe(f.Trans1);D=$.Safe(f.DynamicAttrNode);E=$.Safe(f.View1);F=$.Safe($$.document);G=$.Safe(f.Doc);H=$.Safe(f.Elt);I=$.Safe($$.Seq);J=$.Safe(f.Docs);K=$.Safe(f.String);L=$.Safe(f.CheckedInput);M=$.Safe(g.Mailbox);N=$.Safe($$.WebSharper.Operators);O=$.Safe(A.T);P=$.Safe($$.jQuery);Q=$.Safe(J.NodeSet);R=$.Safe(f.DocElemNode);S=$.Safe(J.DomNodes);T=$.Safe(f.Easing);U=$.Safe(f.Easings);V=$.Safe(f.Var);W=$.Safe(f.Var1);X=$.Safe($$.RegExp);Y=$.Safe(f.FlowBuilder);Z=$.Safe(f.Flow);_0=$.Safe(f.Input);_1=$.Safe(f.DoubleInterpolation);_2=$.Safe(f.Key);_3=$.Safe(f.ListModels);_4=$.Safe(f.RefImpl1);_5=$.Safe(f.ListModel1);_6=$.Safe(f.Storage1);_7=$.Safe(f.ListModel);_8=$.Safe(i.Dictionary);_9=$.Safe(f.Model1);_=$.Safe(f.Model);ba=$.Safe($$.encodeURIComponent);bb=$.Safe($$.WebSharper.Strings);bc=$.Safe(f.Route);bd=$.Safe($$.decodeURIComponent);be=$.Safe(f.Routing);bf=$.Safe(f.Router);bg=$.Safe(f.Trie1);bh=$.Safe($$.window);bi=$.Safe(f.Snap1);bj=$.Safe(g.Async);bk=$.Safe($$.WebSharper.Ref);bl=$.Safe(_6.ArrayStorage);bm=$.Safe(_6.LocalStorageBackend);bn=$.Safe($$.JSON);bo=$.Safe($$.WebSharper.Char);bp=$.Safe(f.Submitter);bq=$.Safe($$.WebSharper.Enumerator);br=$.Safe(i.ResizeArray);bs=$.Safe(br.ResizeArrayProxy);bt=$.Safe(i.MapModule);bu=$.Safe(i.FSharpMap);return bv=$.Safe(f.RefImpl);});$.OnLoad(function(){$.Inherit(H,G);_0.MousePosSt1();_0.MouseBtnSt1();_0.KeyListenerState();_0.ActivateKeyListener();_0.ActivateButtonListener();U.CubicInOut();x.Doc();w.EmptyAttr();h.counter();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;$.Define($$,{WebSharper:{Html:{Client:{Attr:{Attr:$.Field(function(){return c.Attr();})},Attribute:$.Class({get_Body:function(){var u;u=this.HtmlProvider.CreateAttribute(this.Name);u.value=this.Value;return u;}},{New:function(v,w,x){var y;y=d.New1(v);y.Name=w;y.Value=x;return y;},New1:function(z){var A;A=$.New(this,e.New());A.HtmlProvider=z;return A;}}),AttributeBuilder:$.Class({NewAttr:function(B,C){var D;D=d.New(this.HtmlProvider,B,C);return D;}},{New:function(E){var F;F=$.New(this,{});F.HtmlProvider=E;return F;}}),Default:{OnLoad:function(G){return c.HtmlProvider().OnDocumentReady(G);}},DeprecatedAttributeBuilder:$.Class({NewAttr:function(H,I){var J;J=d.New(this.HtmlProvider,H,I);return J;}},{New:function(K){var L;L=$.New(this,{});L.HtmlProvider=K;return L;}}),DeprecatedTagBuilder:$.Class({NewTag:function(M,N){var O,P,Q,R;O=f.New(this.HtmlProvider,M);P=g.Get(N);try{while(P.MoveNext()){R=P.get_Current();O.AppendI(R);}}finally{P.Dispose!=undefined?P.Dispose():null;}return O;}},{New:function(S){var T;T=$.New(this,{});T.HtmlProvider=S;return T;}}),Element:$.Class({AppendI:function(U){var V,W,X,Y,Z,_0,_1,_2,_3;V=U.get_Body();if(V.nodeType===2){X=this["HtmlProvider@33"];Y=this.get_Body();W=X.AppendAttribute(Y,V);}else{Z=this["HtmlProvider@33"];_0=this.get_Body();_1=U.get_Body();W=Z.AppendNode(_0,_1);}if(this.IsRendered){_2=U.Render();}else{_3=this.RenderInternal;_2=void(this.RenderInternal=function(){_3(null);return U.Render();});}return _2;},AppendN:function(_5){var _6,_7;_6=this["HtmlProvider@33"];_7=this.get_Body();return _6.AppendNode(_7,_5);},OnLoad:function(_8){var _9,_;_9=this["HtmlProvider@33"];_=this.get_Body();return _9.OnLoad(_,_8);},Render:function(){var ba;if(!this.IsRendered){this.RenderInternal.call(null,null);ba=void(this.IsRendered=true);}else{ba=null;}return ba;},get_Body:function(){return this.Dom;},get_Html:function(){return this["HtmlProvider@33"].GetHtml(this.get_Body());},get_HtmlProvider:function(){return this["HtmlProvider@33"];},get_Id:function(){var ba,bb,bc,bd,be,bf,bg;ba=this["HtmlProvider@33"];bb=this.get_Body();bc=ba.GetProperty(bb,"id");if(bc===undefined?true:bc===""){be="id"+h.round(h.random()*100000000);bf=this["HtmlProvider@33"];bg=this.get_Body();bf.SetProperty(bg,"id",be);bd=be;}else{bd=bc;}return bd;},get_Item:function(bh){var bi,bj,bk,bl;bi=this["HtmlProvider@33"];bj=this.get_Body();bi.GetAttribute(bj,bh);bk=this["HtmlProvider@33"];bl=this.get_Body();return bk.GetAttribute(bl,bh);},get_Text:function(){return this["HtmlProvider@33"].GetText(this.get_Body());},get_Value:function(){return this["HtmlProvider@33"].GetValue(this.get_Body());},set_Html:function(bm){var bn,bo;bn=this["HtmlProvider@33"];bo=this.get_Body();return bn.SetHtml(bo,bm);},set_Item:function(bp,bq){var br,bs;br=this["HtmlProvider@33"];bs=this.get_Body();return br.SetAttribute(bs,bp,bq);},set_Text:function(bt){var bu,bv;bu=this["HtmlProvider@33"];bv=this.get_Body();return bu.SetText(bv,bt);},set_Value:function(bw){var bx,by;bx=this["HtmlProvider@33"];by=this.get_Body();return bx.SetValue(by,bw);}},{New:function(bz,bA){var bB,bC;bB=f.New1(bz);bC=i.createElement(bA);bB.RenderInternal=function(){};bB.Dom=bC;bB.IsRendered=false;return bB;},New1:function(bE){var bF;bF=$.New(this,e.New());bF["HtmlProvider@33"]=bE;return bF;}}),Events:{JQueryEventSupport:$.Class({OnBlur:function(bG,bH){return j(bH.get_Body()).bind("blur",function(bI){return(bG(bH))(bI);});},OnChange:function(bJ,bK){return j(bK.get_Body()).bind("change",function(bL){return(bJ(bK))(bL);});},OnClick:function(bM,bN){return this.OnMouse("click",bM,bN);},OnDoubleClick:function(bO,bP){return this.OnMouse("dblclick",bO,bP);},OnError:function(bQ,bR){return j(bR.get_Body()).bind("error",function(bS){return(bQ(bR))(bS);});},OnEvent:function(bT,bU,bV){return j(bV.get_Body()).bind(bT,function(bW){return(bU(bV))(bW);});},OnFocus:function(bX,bY){return j(bY.get_Body()).bind("focus",function(bZ){return(bX(bY))(bZ);});},OnKeyDown:function(b0,b1){return j(b1.get_Body()).bind("keydown",function(b2){return(b0(b1))({KeyCode:b2.keyCode,Event:b2});});},OnKeyPress:function(b3,b4){return j(b4.get_Body()).keypress(function(b5){return(b3(b4))({CharacterCode:b5.which,Event:b5});});},OnKeyUp:function(b6,b7){return j(b7.get_Body()).bind("keyup",function(b8){return(b6(b7))({KeyCode:b8.keyCode,Event:b8});});},OnLoad:function(b9,b_){return j(b_.get_Body()).bind("load",function(b$){return(b9(b_))(b$);});},OnMouse:function(ca,cb,cc){return j(cc.get_Body()).bind(ca,function(cd){return(cb(cc))({X:cd.pageX,Y:cd.pageY,Event:cd});});},OnMouseDown:function(ce,cf){return this.OnMouse("mousedown",ce,cf);},OnMouseEnter:function(cg,ch){return this.OnMouse("mouseenter",cg,ch);},OnMouseLeave:function(ci,cj){return this.OnMouse("mouseleave",ci,cj);},OnMouseMove:function(ck,cl){return this.OnMouse("mousemove",ck,cl);},OnMouseOut:function(cm,cn){return this.OnMouse("mouseout",cm,cn);},OnMouseUp:function(co,cp){return this.OnMouse("mouseup",co,cp);},OnResize:function(cq,cr){return j(cr.get_Body()).bind("resize",function(cs){return(cq(cr))(cs);});},OnScroll:function(ct,cu){return j(cu.get_Body()).bind("scroll",function(cv){return(ct(cu))(cv);});},OnSelect:function(cw,cx){return j(cx.get_Body()).bind("select",function(cy){return(cw(cx))(cy);});},OnSubmit:function(cz,cA){return j(cA.get_Body()).bind("submit",function(cB){return(cz(cA))(cB);});},OnUnLoad:function(cC,cD){return j(cD.get_Body()).bind("unload",function(cE){return(cC(cD))(cE);});}},{New:function(){return $.New(this,{});}})},EventsPervasives:{Events:$.Field(function(){return l.New();})},Implementation:{Attr:$.Field(function(){return m.New(c.HtmlProvider());}),DeprecatedHtml:$.Field(function(){return n.New(c.HtmlProvider());}),HtmlProvider:$.Field(function(){return o.New();}),JQueryHtmlProvider:$.Class({AddClass:function(cF,cG){return j(cF).addClass(cG);},AppendAttribute:function(cH,cI){var cJ,cK;cJ=cI.nodeName;cK=cI.value;return this.SetAttribute(cH,cJ,cK);},AppendNode:function(cL,cM){return j(cL).append(j(cM));},Clear:function(cN){return j(cN).contents().detach();},CreateAttribute:function(cO){return i.createAttribute(cO);},CreateElement:function(cP){return i.createElement(cP);},CreateTextNode:function(cQ){return i.createTextNode(cQ);},GetAttribute:function(cR,cS){return j(cR).attr(cS);},GetHtml:function(cT){return j(cT).html();},GetProperty:function(cU,cV){var cW;cW=j(cU).prop(cV);return cW;},GetText:function(cX){return cX.textContent;},GetValue:function(cY){var cZ;cZ=j(cY).val();return cZ;},HasAttribute:function(c0,c1){return j(c0).attr(c1)!=null;},OnDocumentReady:function(c2){return j(i).ready(c2);},OnLoad:function(c3,c4){return j(c3).ready(c4);},Remove:function(c5){return j(c5).remove();},RemoveAttribute:function(c6,c7){return j(c6).removeAttr(c7);},RemoveClass:function(c8,c9){return j(c8).removeClass(c9);},SetAttribute:function(c_,c$,da){return j(c_).attr(c$,da);},SetCss:function(db,dc,dd){return j(db).css(dc,dd);},SetHtml:function(de,df){return j(de).html(df);},SetProperty:function(dg,dh,di){var dj;dj=j(dg).prop(dh,di);return dj;},SetStyle:function(dk,dl){return j(dk).attr("style",dl);},SetText:function(dm,dn){dm.textContent=dn;},SetValue:function(_do,dp){return j(_do).val(dp);}},{New:function(){return $.New(this,{});}}),Tags:$.Field(function(){return p.New(c.HtmlProvider());})},Operators:{OnAfterRender:function(dq,dr){var ds;ds=dr.Render;dr.Render=function(){ds.apply(dr);return dq(dr);};return;},OnBeforeRender:function(du,dv){var dw;dw=dv.Render;dv.Render=function(){du(dv);return dw.apply(dv);};return;},add:function(dy,dz){var dA,dB,dC;dA=g.Get(dz);try{while(dA.MoveNext()){dC=dA.get_Current();dy.AppendI(dC);}}finally{dA.Dispose!=undefined?dA.Dispose():null;}return dy;}},Pagelet:$.Class({AppendTo:function(dD){var dE,dF;dE=i.getElementById(dD);dF=dE.appendChild(this.get_Body());return this.Render();},Render:function(){return null;},ReplaceInDom:function(dG){var dH;dH=dG.parentNode.replaceChild(this.get_Body(),dG);return this.Render();}},{New:function(){return $.New(this,{});}}),TagBuilder:$.Class({NewTag:function(dI,dJ){var dK,dL,dM,dN;dK=f.New(this.HtmlProvider,dI);dL=g.Get(dJ);try{while(dL.MoveNext()){dN=dL.get_Current();dK.AppendI(dN);}}finally{dL.Dispose!=undefined?dL.Dispose():null;}return dK;},text:function(dO){return q.New(dO);}},{New:function(dP){var dQ;dQ=$.New(this,{});dQ.HtmlProvider=dP;return dQ;}}),Tags:{Deprecated:$.Field(function(){return c.DeprecatedHtml();}),Tags:$.Field(function(){return c.Tags();})},Text:$.Class({get_Body:function(){return i.createTextNode(this.text);}},{New:function(dR){var dS;dS=$.New(this,e.New());dS.text=dR;return dS;}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Html);b=$.Safe(a.Client);c=$.Safe(b.Implementation);d=$.Safe(b.Attribute);e=$.Safe(b.Pagelet);f=$.Safe(b.Element);g=$.Safe($$.WebSharper.Enumerator);h=$.Safe($$.Math);i=$.Safe($$.document);j=$.Safe($$.jQuery);k=$.Safe(b.Events);l=$.Safe(k.JQueryEventSupport);m=$.Safe(b.AttributeBuilder);n=$.Safe(b.DeprecatedTagBuilder);o=$.Safe(c.JQueryHtmlProvider);p=$.Safe(b.TagBuilder);q=$.Safe(b.Text);r=$.Safe(b.Attr);s=$.Safe(b.EventsPervasives);return t=$.Safe(b.Tags);});$.OnLoad(function(){$.Inherit(d,e);$.Inherit(f,e);$.Inherit(q,e);t.Tags();t.Deprecated();c.Tags();c.HtmlProvider();c.DeprecatedHtml();c.Attr();s.Events();r.Attr();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;$.Define($$,{WebSharper:{Control:{Disposable:{Of:function(F){return{Dispose:F};}},Event:{Event:$.Class({AddHandler:function(G){return this.Handlers.Add(G);},RemoveHandler:function(H){var I,K,L,N,O;I=function(J){return a.Equals(H,J);};K=this.Handlers;L=function(M){return K.RemoveAt(M);};N=this.Handlers;O=b.tryFindIndex(I,N);return c.iter(L,O);},Subscribe:function(P){var Q,T=this;Q=function(R){return P.OnNext(R);};this.AddHandler(Q);return e.Of(function(){return T.RemoveHandler(Q);});},Trigger:function(U){var V,W,X;V=this.Handlers.ToArray();for(W=0;W<=V.length-1;W++){X=f.get(V,W);X(U);}return;}})},EventModule:{Choose:function(Y,Z){var _0;_0=g.New();h.addListener(Z,function(_1){var _2,_3,_4;_2=Y(_1);if(_2.$==0){_3=null;}else{_4=_2.$0;_3=_0.event.Trigger(_4);}return _3;});return _0.event;},Filter:function(_5,_6){var _7;_7=$.New(j,{Handlers:m.New2()});h.addListener(_6,function(_8){return _5(_8)?_7.Trigger(_8):null;});return _7;},Map:function(_9,_){var ba;ba=$.New(j,{Handlers:m.New2()});h.addListener(_,function(bb){return ba.Trigger(_9(bb));});return ba;},Merge:function(bb,bc){var bd;bd=$.New(j,{Handlers:m.New2()});h.addListener(bb,function(be){return bd.Trigger(be);});h.addListener(bc,function(bf){return bd.Trigger(bf);});return bd;},Pairwise:function(bg){var bh,bi;bh=[{$:0}];bi=$.New(j,{Handlers:m.New2()});h.addListener(bg,function(bj){var bk,bl,bm;bk=bh[0];if(bk.$==1){bm=bk.$0;bh[0]={$:1,$0:bj};bl=bi.Trigger([bm,bj]);}else{bl=void(bh[0]={$:1,$0:bj});}return bl;});return bi;},Partition:function(bn,bo){return[n.Filter(bn,bo),n.Filter(function(bp){var bq;bq=bn(bp);return!bq;},bo)];},Scan:function(br,bs,bt){var bu,bv;bu=[bs];bv=function(bw){bu[0]=(br(bu[0]))(bw);return bu[0];};return n.Map(bv,bt);},Split:function(bx,by){var bz,bE;bz=function(bA){var bB,bC,bD;bB=bx(bA);if(bB.$==0){bD=bB.$0;bC={$:1,$0:bD};}else{bC={$:0};}return bC;};bE=function(bF){var bG,bH,bI;bG=bx(bF);if(bG.$==1){bI=bG.$0;bH={$:1,$0:bI};}else{bH={$:0};}return bH;};return[n.Choose(bz,by),n.Choose(bE,by)];}},FSharpEvent:$.Class({},{New:function(){var bJ;bJ=$.New(this,{});bJ.event=$.New(j,{Handlers:m.New2()});return bJ;}}),HotStream:{HotStream:$.Class({Subscribe:function(bK){var bL;this.Latest[0].$==1?bK.OnNext(this.Latest[0].$0):null;bL=h.subscribeTo(this.Event.event,function(bM){return bK.OnNext(bM);});return bL;},Trigger:function(bN){this.Latest[0]={$:1,$0:bN};return this.Event.event.Trigger(bN);}},{New:function(){return $.New(p,{Latest:[{$:0}],Event:g.New()});}})},MailboxProcessor:$.Class({PostAndAsyncReply:function(bO,bP){var bR=this;return q.Delay(function(){return q.Bind(bR.PostAndTryAsyncReply(bO,bP),function(bS){var bT,bU;if(bS.$==1){bU=bS.$0;bT=bU;}else{bT=r.Raise(s.New());}return q.Return(bT);});});},PostAndTryAsyncReply:function(bV,bW){var bX,bY,b6=this;bX=r.DefaultArg(bW,this.get_DefaultTimeout());bY=function(bZ){var b0,b1,b2,b3,b4,b7,b8,b$;b0=bZ[0];b1=bZ[1];b2=bZ[2];if(bX<0){b4=bV(function(b5){return b0({$:1,$0:b5});});b6.mailbox.AddLast(b4);b3=b6.resume();}else{b7=[true];b8=bV(function(b9){var b_;if(b7[0]){b7[0]=false;b_=b0({$:1,$0:b9});}else{b_=null;}return b_;});b6.mailbox.AddLast(b8);b6.resume();b$=t(function(){var cb;if(b7[0]){b7[0]=false;cb=b0({$:0});}else{cb=null;}return cb;},bX);b3=void b$;}return b3;};return q.FromContinuations(bY);},Receive:function(cc){var ce=this;return q.Delay(function(){return q.Bind(ce.TryReceive(cc),function(cf){var cg,ch;if(cf.$==1){ch=cf.$0;cg=ch;}else{cg=r.Raise(s.New());}return q.Return(cg);});});},Scan:function(ci,cj){var cl=this;return q.Delay(function(){return q.Bind(cl.TryScan(ci,cj),function(cm){var cn,co;if(cm.$==1){co=cm.$0;cn=co;}else{cn=r.Raise(s.New());}return q.Return(cn);});});},Start:function(){var cp,cq,ct=this;if(this.started){cp=r.FailWith("The MailboxProcessor has already been started.");}else{this.started=true;cq=q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(ct.initial.call(null,ct),function(){return q.Return(null);});}),function(cv){ct.errorEvent.event.Trigger(cv);return q.Return(null);});});cp=ct.startAsync(cq);}return cp;},TryReceive:function(cw){var cx,cy,cD=this;cx=r.DefaultArg(cw,this.get_DefaultTimeout());cy=function(cz){var cA,cB,cC,cE,cF,cG,cJ,cK,cN,cR;cA=cz[0];cB=cz[1];cC=cz[2];if(a.Equals(cD.mailbox.get_First(),null)){if(cx<0){cG=q.Delay(function(){var cI;cI=cD.dequeue();cA({$:1,$0:cI});return q.Return(null);});cF=void(cD.savedCont={$:1,$0:cG});}else{cJ=[true];cK=t(function(){var cM;if(cJ[0]){cJ[0]=false;cD.savedCont={$:0};cM=cA({$:0});}else{cM=null;}return cM;},cx);cN=q.Delay(function(){var cP,cQ;if(cJ[0]){cJ[0]=false;u(cK);cQ=cD.dequeue();cA({$:1,$0:cQ});cP=q.Return(null);}else{cP=q.Return(null);}return cP;});cF=void(cD.savedCont={$:1,$0:cN});}cE=cF;}else{cR=cD.dequeue();cE=cA({$:1,$0:cR});}return cE;};return q.FromContinuations(cy);},TryScan:function(cS,cT){var cU,cZ=this;cU=r.DefaultArg(cT,this.get_DefaultTimeout());return q.Delay(function(){var cW,c3,c4,c5,c7;cW=function(){var cY,c0,c1,c2;cY=cZ.mailbox.get_First();c0={$:0};while(!a.Equals(cY,null)){c1=cS(cY.v);if(c1.$==0){c2=cY=cY.n;}else{cZ.mailbox.Remove(cY);cY=null;c2=c0=c1;}}return c0;};c3=cW(null);if(c3.$==1){c5=c3.$0;c4=q.Bind(c5,function(c6){return q.Return({$:1,$0:c6});});}else{c7=function(c8){var c9,c_,c$,da,db,dj,dk,dn;c9=c8[0];c_=c8[1];c$=c8[2];if(cU<0){db=function(){var dd;dd=q.Delay(function(){var df,dg,dh;df=cS(cZ.mailbox.get_First().v);if(df.$==1){dh=df.$0;cZ.mailbox.RemoveFirst();dg=q.Bind(dh,function(di){c9({$:1,$0:di});return q.Return(null);});}else{db(null);dg=q.Return(null);}return dg;});cZ.savedCont={$:1,$0:dd};return;};da=db(null);}else{dj=[true];dk=t(function(){var dm;if(dj[0]){dj[0]=false;cZ.savedCont={$:0};dm=c9({$:0});}else{dm=null;}return dm;},cU);dn=function(){var dp;dp=q.Delay(function(){var dr,ds,dt;dr=cS(cZ.mailbox.get_First().v);if(dr.$==1){dt=dr.$0;cZ.mailbox.RemoveFirst();ds=q.Bind(dt,function(du){var dv;if(dj[0]){dj[0]=false;u(dk);c9({$:1,$0:du});dv=q.Return(null);}else{dv=q.Return(null);}return dv;});}else{dn(null);ds=q.Return(null);}return ds;});cZ.savedCont={$:1,$0:dp};return;};da=dn(null);}return da;};c4=q.FromContinuations(c7);}return c4;});},dequeue:function(){var dw;dw=this.mailbox.get_First().v;this.mailbox.RemoveFirst();return dw;},get_CurrentQueueLength:function(){return this.mailbox.get_Count();},get_DefaultTimeout:function(){return this["DefaultTimeout@"];},get_Error:function(){return this.errorEvent.event;},resume:function(){var dx,dy,dz;dx=this.savedCont;if(dx.$==1){dz=dx.$0;this.savedCont={$:0};dy=this.startAsync(dz);}else{dy=null;}return dy;},set_DefaultTimeout:function(dA){this["DefaultTimeout@"]=dA;return;},startAsync:function(dB){return q.Start(dB,this.token);}},{New:function(dC,dD){var dE,dF,dG,dH,dI;dE=$.New(this,{});dE.initial=dC;dE.token=dD;dE.started=false;dE.errorEvent=g.New();dE.mailbox=w.New();dE.savedCont={$:0};dF=dE.token;if(dF.$==0){dG=null;}else{dH=dF.$0;dI=q.Register(dH,function(){return function(){return dE.resume();}();});dG=void dI;}dE["DefaultTimeout@"]=-1;return dE;},Start:function(dL,dM){var dN;dN=x.New(dL,dM);dN.Start();return dN;}}),Observable:{Aggregate:function(dO,dP,dQ){var dR;dR=function(dS){var dT,dU,dZ;dT=[dP];dU=function(dV){return y.Protect(function(){return(dQ(dT[0]))(dV);},function(dX){dT[0]=dX;return dS.OnNext(dX);},function(dY){return dS.OnError(dY);});};dZ=z.New(dU,function(d0){return dS.OnError(d0);},function(){return dS.OnCompleted();});return dO.Subscribe(dZ);};return y.New(dR);},Choose:function(d2,d3){var d4;d4=function(d5){var d6,eb;d6=function(d7){var d9;d9=function(d_){return d5.OnNext(d_);};return y.Protect(function(){return d2(d7);},function(d$){return c.iter(d9,d$);},function(ea){return d5.OnError(ea);});};eb=z.New(d6,function(ec){return d5.OnError(ec);},function(){return d5.OnCompleted();});return d3.Subscribe(eb);};return y.New(d4);},CombineLatest:function(ee,ef,eg){var eh;eh=function(ei){var ej,ek,el,ev,ex,eA,eC,eF,eG;ej=[{$:0}];ek=[{$:0}];el=function(){var en,eo,ep,eq,er;en=[ej[0],ek[0]];if(en[0].$==1){if(en[1].$==1){eq=en[0].$0;er=en[1].$0;ep=y.Protect(function(){return(eg(eq))(er);},function(et){return ei.OnNext(et);},function(eu){return ei.OnError(eu);});}else{ep=null;}eo=ep;}else{eo=null;}return eo;};ev=function(ew){ej[0]={$:1,$0:ew};return el(null);};ex=z.New(ev,function(){},function(){});eA=function(eB){ek[0]={$:1,$0:eB};return el(null);};eC=z.New(eA,function(){},function(){});eF=ee.Subscribe(ex);eG=ef.Subscribe(eC);return e.Of(function(){eF.Dispose();return eG.Dispose();});};return y.New(eh);},Concat:function(eI,eJ){var eK;eK=function(eL){var eM,eN,eS;eM=[{$:0}];eN=eI.Subscribe(z.New(function(eO){return eL.OnNext(eO);},function(){},function(){var eR;eR=eJ.Subscribe(eL);eM[0]={$:1,$0:eR};}));eS=function(){eM[0].$==1?eM[0].$0.Dispose():null;return eN.Dispose();};return e.Of(eS);};return y.New(eK);},Drop:function(eU,eV){var eW;eW=function(eX){var eY,eZ,e1;eY=[0];eZ=function(e0){A.incr(eY);return eY[0]>eU?eX.OnNext(e0):null;};e1=z.New(eZ,function(e2){return eX.OnError(e2);},function(){return eX.OnCompleted();});return eV.Subscribe(e1);};return y.New(eW);},Filter:function(e4,e5){var e6;e6=function(e7){var e8,fd;e8=function(e9){var e$;e$=function(fa){return e7.OnNext(fa);};return y.Protect(function(){return e4(e9)?{$:1,$0:e9}:{$:0};},function(fb){return c.iter(e$,fb);},function(fc){return e7.OnError(fc);});};fd=z.New(e8,function(fe){return e7.OnError(fe);},function(){return e7.OnCompleted();});return e5.Subscribe(fd);};return y.New(e6);},Map:function(fg,fh){var fi;fi=function(fj){var fk,fp;fk=function(fl){return y.Protect(function(){return fg(fl);},function(fn){return fj.OnNext(fn);},function(fo){return fj.OnError(fo);});};fp=z.New(fk,function(fq){return fj.OnError(fq);},function(){return fj.OnCompleted();});return fh.Subscribe(fp);};return y.New(fi);},Merge:function(fs,ft){var fu;fu=function(fv){var fw,fx,fy,fC,fD,fH;fw=[false];fx=[false];fy=z.New(function(fz){return fv.OnNext(fz);},function(){},function(){fw[0]=true;return(fw[0]?fx[0]:false)?fv.OnCompleted():null;});fC=fs.Subscribe(fy);fD=z.New(function(fE){return fv.OnNext(fE);},function(){},function(){fx[0]=true;return(fw[0]?fx[0]:false)?fv.OnCompleted():null;});fH=ft.Subscribe(fD);return e.Of(function(){fC.Dispose();return fH.Dispose();});};return y.New(fu);},Never:function(){return y.New(function(){return e.Of(function(){});});},New:function(fL){return $.New(B,{Subscribe1:fL});},Observable:$.Class({Subscribe:function(fM){return this.Subscribe1.call(null,fM);}}),Of:function(fN){return y.New(function(fO){return e.Of(fN(function(fP){return fO.OnNext(fP);}));});},Protect:function(fQ,fR,fS){var fT,fU,fV,fW,fX,fY;try{fU={$:0,$0:fQ(null)};}catch(fV){fU={$:1,$0:fV};}fT=fU;if(fT.$==1){fX=fT.$0;fW=fS(fX);}else{fY=fT.$0;fW=fR(fY);}return fW;},Range:function(fZ,f0){var f1;f1=function(f2){var f3;for(f3=fZ;f3<=fZ+f0;f3++){f2.OnNext(f3);}return e.Of(function(){});};return y.New(f1);},Return:function(f5){var f6;f6=function(f7){f7.OnNext(f5);f7.OnCompleted();return e.Of(function(){});};return y.New(f6);},SelectMany:function(f9){return y.New(function(f_){var f$,gb;f$=[function(){}];gb=h.subscribeTo(f9,function(gc){var gd;gd=h.subscribeTo(gc,function(ge){return f_.OnNext(ge);});f$[0]=function(){f$[0].call(null,null);return gd.Dispose();};return;});return e.Of(function(){f$[0].call(null,null);return gb.Dispose();});});},Sequence:function(gh){var gi;gi=function(gj){var gk,gl,gm,gn;if(gj.$==1){gl=gj.$1;gm=gj.$0;gn=gi(gl);gk=y.CombineLatest(gm,gn,function(go){return function(gp){return $.New(D,{$:1,$0:go,$1:gp});};});}else{gk=y.Return($.New(D,{$:0}));}return gk;};return gi(C.ofSeq(gh));},Switch:function(gq){return y.New(function(gr){var gs,gt,gu;gs=[0];gt=[{$:0}];gu=h.subscribeTo(gq,function(gv){var gw,gx,gz;A.incr(gs);gt[0].$==1?gt[0].$0.Dispose():null;gw=gs[0];gx=h.subscribeTo(gv,function(gy){return gw===gs[0]?gr.OnNext(gy):null;});gz={$:1,$0:gx};gt[0]=gz;return;});return gu;});}},ObservableModule:{Pairwise:function(gA){var gB;gB=function(gC){var gD,gE,gJ;gD=[{$:0}];gE=function(gF){var gG,gH,gI;gG=gD[0];if(gG.$==1){gI=gG.$0;gH=gC.OnNext([gI,gF]);}else{gH=null;}gD[0]={$:1,$0:gF};return;};gJ=z.New(gE,function(gK){return gC.OnError(gK);},function(){return gC.OnCompleted();});return gA.Subscribe(gJ);};return y.New(gB);},Partition:function(gM,gN){return[y.Filter(gM,gN),y.Filter(function(gO){var gP;gP=gM(gO);return!gP;},gN)];},Scan:function(gQ,gR,gS){var gT;gT=function(gU){var gV,gW,g1;gV=[gR];gW=function(gX){return y.Protect(function(){return(gQ(gV[0]))(gX);},function(gZ){gV[0]=gZ;return gU.OnNext(gZ);},function(g0){return gU.OnError(g0);});};g1=z.New(gW,function(g2){return gU.OnError(g2);},function(){return gU.OnCompleted();});return gS.Subscribe(g1);};return y.New(gT);},Split:function(g4,g5){var g6,g$,ha,hf;g6=function(g7){var g8,g9,g_;g8=g4(g7);if(g8.$==0){g_=g8.$0;g9={$:1,$0:g_};}else{g9={$:0};}return g9;};g$=y.Choose(g6,g5);ha=function(hb){var hc,hd,he;hc=g4(hb);if(hc.$==1){he=hc.$0;hd={$:1,$0:he};}else{hd={$:0};}return hd;};hf=y.Choose(ha,g5);return[g$,hf];}},Observer:{New:function(hg,hh,hi){return $.New(E,{onNext:hg,onError:hh,onCompleted:hi});},Observer:$.Class({OnCompleted:function(){return this.onCompleted.call(null,null);},OnError:function(hj){return this.onError.call(null,hj);},OnNext:function(hk){return this.onNext.call(null,hk);}}),Of:function(hl){return $.New(E,{onNext:function(hm){return hl(hm);},onError:function(hn){return r.Raise(hn);},onCompleted:function(){return null;}});}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Unchecked);b=$.Safe($$.WebSharper.Seq);c=$.Safe($$.WebSharper.Option);d=$.Safe($$.WebSharper.Control);e=$.Safe(d.Disposable);f=$.Safe($$.WebSharper.Arrays);g=$.Safe(d.FSharpEvent);h=$.Safe($$.WebSharper.Util);i=$.Safe(d.Event);j=$.Safe(i.Event);k=$.Safe($$.WebSharper.Collections);l=$.Safe(k.ResizeArray);m=$.Safe(l.ResizeArrayProxy);n=$.Safe(d.EventModule);o=$.Safe(d.HotStream);p=$.Safe(o.HotStream);q=$.Safe($$.WebSharper.Concurrency);r=$.Safe($$.WebSharper.Operators);s=$.Safe($$.WebSharper.TimeoutException);t=$.Safe($$.setTimeout);u=$.Safe($$.clearTimeout);v=$.Safe(k.LinkedList);w=$.Safe(v.T);x=$.Safe(d.MailboxProcessor);y=$.Safe(d.Observable);z=$.Safe(d.Observer);A=$.Safe($$.WebSharper.Ref);B=$.Safe(y.Observable);C=$.Safe($$.WebSharper.List);D=$.Safe(C.T);return E=$.Safe(z.Observer);});$.OnLoad(function(){return;});}());

(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;$.Define($$,{ResourcesSplit:{Web:{Client:{main:$.Field(function(){var u,w,x,y,z,A,B,M,O;u=function(v){return v.Name;};w=a.ofArray([e.Green("Jlaw"),e.Green("Eyeball"),e.Green("Ah fat"),e.Green("Nkemp"),e.Green("Roush"),e.Green("Lunt"),e.Green("Dys"),e.Green("Grill"),e.Green("Perfect"),e.Green("Boots"),e.Green("Slevin"),e.Green("Pawlik"),e.Yellow("Ethan"),e.Yellow("Bx"),e.Yellow("Azeda"),e.Yellow("Rdwing"),e.Yellow("Wartech"),e.Yellow("Adodd"),e.Yellow("Jawilki"),e.Yellow("Johnjohn"),e.Red("Bongval"),e.Red("Ssumit"),e.Red("Che"),e.Red("Felichque"),e.Red("Wong"),e.Red("Ultraduck"),e.Red("Adiam"),e.Red("Atta"),e.Red("Rome")]);x=h.Create(u,w);y=i.Create("");z=a.ofArray([j.TextNode("Place a resource where there is the less resources based on Level. When groups have equal number of resources and decision cannot be made, place a resource where there is the less resource of the same Continent")]);j.RunById("explanation",j.Element("pre",[],z));A=a.ofArray([k.Create("style","margin: 15px 0")]);B=x.get_View();M=function(){return x.Add(e.Green(i.Get(y)));};j.RunById("resources",j.Element("div",A,a.ofArray([j.Convert(function(C){var D;D=a.ofArray([k.Create("style","height: 2em;")]);return j.Element("div",D,a.ofArray([j.Element("div",a.ofArray([k.Create("style","width: 100px; display: inline-block; margin: 0 5px;")]),a.ofArray([j.TextNode(C.Name)])),j.Select(a.ofArray([k.Create("style","width: 100px; margin: 0 5px;")]),function(E){return $$.String(E);},l.get_All(),x.LensInto(function(F){return F.Level;},function(G){return function(H){return $.New(e,{Name:G.Name,Level:H,Continent:G.Continent});};},C.Name)),j.Select(a.ofArray([k.Create("style","width: 100px; margin: 0 5px;")]),function(I){return $$.String(I);},m.get_All(),x.LensInto(function(J){return J.Continent;},function(K){return function(L){return $.New(e,{Name:K.Name,Level:K.Level,Continent:L});};},C.Name))]));},B),j.Element("div",$.New(n,{$:0}),a.ofArray([j.Input(a.ofArray([k.Create("placeholder","Enter new resource name"),k.Create("style","margin: 1em 1em 1em 0;")]),y),j.Button("Add",$.New(n,{$:0}),M)]))])));O=x.get_View();return j.RunById("result",j.BindView(function(P){var Q,R,S,V,X,Y,Z,_0,_3,bn;Q=o.get_Empty();R=p.toList(P);S=p.fold(function(T){return function(U){return o.Place(U,T);};},Q,R);V=function(W){return p.length(W);};X=a.ofArray([S.A,S.B,S.C]);Y=a.map(V,X);Z=a.max(Y);_0=p.toList(p.delay(function(){return p.map(function(_2){return a.ofArray([a.tryItem(_2,S.A),a.tryItem(_2,S.B),a.tryItem(_2,S.C)]);},p.toList(q.range(0,Z-1)));}));_3=function(_4){var _5,_6,_7,_9,_,bb,bc,be,bf,bh,bi,bk,bl;_6=a.ofArray([j.TextNode("Green")]);_7=a.ofArray([j.TextNode($$.String(p.length(a.filter(function(_8){return r.Equals(_8.Level,$.New(l,{$:0}));},_4))))]);_9=a.ofArray([j.TextNode("Yellow")]);_=a.ofArray([j.TextNode($$.String(p.length(a.filter(function(ba){return r.Equals(ba.Level,$.New(l,{$:1}));},_4))))]);bb=a.ofArray([j.TextNode("Red")]);bc=a.ofArray([j.TextNode($$.String(p.length(a.filter(function(bd){return r.Equals(bd.Level,$.New(l,{$:2}));},_4))))]);be=a.ofArray([j.TextNode("Asia")]);bf=a.ofArray([j.TextNode($$.String(p.length(a.filter(function(bg){return r.Equals(bg.Continent,$.New(m,{$:0}));},_4))))]);bh=a.ofArray([j.TextNode("Pacific")]);bi=a.ofArray([j.TextNode($$.String(p.length(a.filter(function(bj){return r.Equals(bj.Continent,$.New(m,{$:2}));},_4))))]);bk=a.ofArray([j.TextNode("Europe")]);bl=a.ofArray([j.TextNode($$.String(p.length(a.filter(function(bm){return r.Equals(bm.Continent,$.New(m,{$:1}));},_4))))]);_5=a.ofArray([j.Element("dt",[],_6),j.Element("dd",[],_7),j.Element("dt",[],_9),j.Element("dd",[],_),j.Element("dt",[],bb),j.Element("dd",[],bc),j.Element("dt",[],be),j.Element("dd",[],bf),j.Element("dt",[],bh),j.Element("dd",[],bi),j.Element("dt",[],bk),j.Element("dd",[],bl)]);return j.Element("dl",[],_5);};bn=p.toList(p.delay(function(){var bp,bq,br,bs;bq=a.ofArray([j.TextNode("Group A")]);br=a.ofArray([j.TextNode("Group B")]);bs=a.ofArray([j.TextNode("Group C")]);bp=a.ofArray([j.Element("th",[],bq),j.Element("th",[],br),j.Element("th",[],bs)]);return p.append([j.Element("tr",[],bp)],p.delay(function(){return p.append(a.map(function(bu){var bv;bv=a.map(function(bw){var bx,by;if(bw.$==0){bx=$.New(n,{$:0});return j.Element("td",[],bx);}else{by=bw.$0;return j.Element("td",a.ofArray([k.Create("style","background-color:"+l.Color(by.Level))]),a.ofArray([j.TextNode(by.Name),j.Element("span",a.ofArray([k.Create("class","small-text")]),a.ofArray([j.TextNode("("+s.toSafe($$.String(by.Continent))+")")]))]));}},bu);return j.Element("tr",[],bv);},_0),p.delay(function(){var bz,bA,bB,bC;bA=a.ofArray([_3(S.A)]);bB=a.ofArray([_3(S.B)]);bC=a.ofArray([_3(S.C)]);bz=a.ofArray([j.Element("td",[],bA),j.Element("td",[],bB),j.Element("td",[],bC)]);return[j.Element("tr",[],bz)];}));}));}));return j.Element("table",[],bn);},O));})},Domain:{Continent:$.Class({toString:function(){var bD;bD=[];bD[1]=this;bD[0]=1;while(bD[0]){if(bD[1].$==2){bD[0]=0;bD[1]="Pacific";}else{if(bD[1].$==1){bD[0]=0;bD[1]="Europe";}else{bD[0]=0;bD[1]="Asia";}}}return bD[1];}},{get_All:function(){return a.ofArray([$.New(m,{$:0}),$.New(m,{$:1}),$.New(m,{$:2})]);}}),Groups:$.Class({},{Place:function(bE,bF){var bG,bJ,bL,bN,bQ,bS,bU,bV,bW,bX,bZ,b0,b1,b2,b3,b4,b5;bG=function(bH){var bI;bI=bH.Level;return bI.$==1?2:bI.$==2?1:3;};bJ=function(bK){return p.sumBy(bG,bK);};bL=function(bM){return r.Equals(bM.Continent,bE.Continent);};bN=function(bO){var bP;bP=a.filter(bL,bO);return p.length(bP);};bQ=function(bR){return bJ(bR[0]);};bS=function(bT){return bT[0];};bU=a.ofArray([[bF.A,"A"],[bF.B,"B"],[bF.C,"C"]]);bV=a.groupBy(bQ,bU);bW=a.minBy(bS,bV);bX=function(bY){return bN(bY[0]);};bZ=bW[1];b0=a.minBy(bX,bZ);b1=b0[1];if(b1==="A"){b2=$.New(o,{A:$.New(n,{$:1,$0:bE,$1:bF.A}),B:bF.B,C:bF.C});}else{if(b1==="B"){b4=$.New(n,{$:1,$0:bE,$1:bF.B});b3=$.New(o,{A:bF.A,B:b4,C:bF.C});}else{b5=$.New(n,{$:1,$0:bE,$1:bF.C});b3=$.New(o,{A:bF.A,B:bF.B,C:b5});}b2=b3;}return b2;},get_Empty:function(){return $.New(o,{A:$.New(n,{$:0}),B:$.New(n,{$:0}),C:$.New(n,{$:0})});}}),Level:$.Class({toString:function(){var b6;b6=[];b6[1]=this;b6[0]=1;while(b6[0]){if(b6[1].$==2){b6[0]=0;b6[1]="Red";}else{if(b6[1].$==1){b6[0]=0;b6[1]="Yellow";}else{b6[0]=0;b6[1]="Green";}}}return b6[1];}},{Color:function(b7){return b7.$==1?"#f9fb83":b7.$==2?"#ffa8a8":"#95ea95";},get_All:function(){return a.ofArray([$.New(l,{$:0}),$.New(l,{$:1}),$.New(l,{$:2})]);}}),Resource:$.Class({},{Green:function(b8){return $.New(e,{Name:b8,Level:$.New(l,{$:0}),Continent:$.New(m,{$:0})});},Red:function(b9){return $.New(e,{Name:b9,Level:$.New(l,{$:2}),Continent:$.New(m,{$:0})});},Yellow:function(b_){return $.New(e,{Name:b_,Level:$.New(l,{$:1}),Continent:$.New(m,{$:0})});}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.List);b=$.Safe($$.ResourcesSplit);c=$.Safe(b.Web);d=$.Safe(c.Domain);e=$.Safe(d.Resource);f=$.Safe($$.WebSharper.UI);g=$.Safe(f.Next);h=$.Safe(g.ListModel);i=$.Safe(g.Var);j=$.Safe(g.Doc);k=$.Safe(g.AttrProxy);l=$.Safe(d.Level);m=$.Safe(d.Continent);n=$.Safe(a.T);o=$.Safe(d.Groups);p=$.Safe($$.WebSharper.Seq);q=$.Safe($$.WebSharper.Operators);r=$.Safe($$.WebSharper.Unchecked);s=$.Safe($$.WebSharper.PrintfHelpers);return t=$.Safe(c.Client);});$.OnLoad(function(){t.main();return;});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
